(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();function bm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mc={exports:{}},Ns={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function Iv(){if(bh)return Ns;bh=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(s,r,c){var f=null;if(c!==void 0&&(f=""+c),r.key!==void 0&&(f=""+r.key),"key"in r){c={};for(var y in r)y!=="key"&&(c[y]=r[y])}else c=r;return r=c.ref,{$$typeof:n,type:s,key:f,ref:r!==void 0?r:null,props:c}}return Ns.Fragment=e,Ns.jsx=o,Ns.jsxs=o,Ns}var Uh;function Dv(){return Uh||(Uh=1,mc.exports=Iv()),mc.exports}var C=Dv(),gc={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function bv(){if(Fh)return $e;Fh=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function _(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,w={};function I(L,T,J){this.props=L,this.context=T,this.refs=w,this.updater=J||U}I.prototype.isReactComponent={},I.prototype.setState=function(L,T){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,T,"setState")},I.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function pe(){}pe.prototype=I.prototype;function le(L,T,J){this.props=L,this.context=T,this.refs=w,this.updater=J||U}var he=le.prototype=new pe;he.constructor=le,P(he,I.prototype),he.isPureReactComponent=!0;var Ce=Array.isArray;function _e(){}var ve={H:null,A:null,T:null,S:null},Je=Object.prototype.hasOwnProperty;function Ae(L,T,J){var Re=J.ref;return{$$typeof:n,type:L,key:T,ref:Re!==void 0?Re:null,props:J}}function Ve(L,T){return Ae(L.type,T,L.props)}function Ze(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function it(L){var T={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(J){return T[J]})}var nt=/\/+/g;function ht(L,T){return typeof L=="object"&&L!==null&&L.key!=null?it(""+L.key):T.toString(36)}function yt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(_e,_e):(L.status="pending",L.then(function(T){L.status==="pending"&&(L.status="fulfilled",L.value=T)},function(T){L.status==="pending"&&(L.status="rejected",L.reason=T)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function j(L,T,J,Re,Fe){var Xe=typeof L;(Xe==="undefined"||Xe==="boolean")&&(L=null);var He=!1;if(L===null)He=!0;else switch(Xe){case"bigint":case"string":case"number":He=!0;break;case"object":switch(L.$$typeof){case n:case e:He=!0;break;case v:return He=L._init,j(He(L._payload),T,J,Re,Fe)}}if(He)return Fe=Fe(L),He=Re===""?"."+ht(L,0):Re,Ce(Fe)?(J="",He!=null&&(J=He.replace(nt,"$&/")+"/"),j(Fe,T,J,"",function(Nt){return Nt})):Fe!=null&&(Ze(Fe)&&(Fe=Ve(Fe,J+(Fe.key==null||L&&L.key===Fe.key?"":(""+Fe.key).replace(nt,"$&/")+"/")+He)),T.push(Fe)),1;He=0;var Ye=Re===""?".":Re+":";if(Ce(L))for(var Ct=0;Ct<L.length;Ct++)Re=L[Ct],Xe=Ye+ht(Re,Ct),He+=j(Re,T,J,Xe,Fe);else if(Ct=_(L),typeof Ct=="function")for(L=Ct.call(L),Ct=0;!(Re=L.next()).done;)Re=Re.value,Xe=Ye+ht(Re,Ct++),He+=j(Re,T,J,Xe,Fe);else if(Xe==="object"){if(typeof L.then=="function")return j(yt(L),T,J,Re,Fe);throw T=String(L),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return He}function xe(L,T,J){if(L==null)return L;var Re=[],Fe=0;return j(L,Re,"","",function(Xe){return T.call(J,Xe,Fe++)}),Re}function ze(L){if(L._status===-1){var T=L._result;T=T(),T.then(function(J){(L._status===0||L._status===-1)&&(L._status=1,L._result=J)},function(J){(L._status===0||L._status===-1)&&(L._status=2,L._result=J)}),L._status===-1&&(L._status=0,L._result=T)}if(L._status===1)return L._result.default;throw L._result}var We=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},at={map:xe,forEach:function(L,T,J){xe(L,function(){T.apply(this,arguments)},J)},count:function(L){var T=0;return xe(L,function(){T++}),T},toArray:function(L){return xe(L,function(T){return T})||[]},only:function(L){if(!Ze(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return $e.Activity=x,$e.Children=at,$e.Component=I,$e.Fragment=o,$e.Profiler=r,$e.PureComponent=le,$e.StrictMode=s,$e.Suspense=m,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,$e.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ve.H.useMemoCache(L)}},$e.cache=function(L){return function(){return L.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(L,T,J){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Re=P({},L.props),Fe=L.key;if(T!=null)for(Xe in T.key!==void 0&&(Fe=""+T.key),T)!Je.call(T,Xe)||Xe==="key"||Xe==="__self"||Xe==="__source"||Xe==="ref"&&T.ref===void 0||(Re[Xe]=T[Xe]);var Xe=arguments.length-2;if(Xe===1)Re.children=J;else if(1<Xe){for(var He=Array(Xe),Ye=0;Ye<Xe;Ye++)He[Ye]=arguments[Ye+2];Re.children=He}return Ae(L.type,Fe,Re)},$e.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},$e.createElement=function(L,T,J){var Re,Fe={},Xe=null;if(T!=null)for(Re in T.key!==void 0&&(Xe=""+T.key),T)Je.call(T,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Fe[Re]=T[Re]);var He=arguments.length-2;if(He===1)Fe.children=J;else if(1<He){for(var Ye=Array(He),Ct=0;Ct<He;Ct++)Ye[Ct]=arguments[Ct+2];Fe.children=Ye}if(L&&L.defaultProps)for(Re in He=L.defaultProps,He)Fe[Re]===void 0&&(Fe[Re]=He[Re]);return Ae(L,Xe,Fe)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(L){return{$$typeof:y,render:L}},$e.isValidElement=Ze,$e.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ze}},$e.memo=function(L,T){return{$$typeof:p,type:L,compare:T===void 0?null:T}},$e.startTransition=function(L){var T=ve.T,J={};ve.T=J;try{var Re=L(),Fe=ve.S;Fe!==null&&Fe(J,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(_e,We)}catch(Xe){We(Xe)}finally{T!==null&&J.types!==null&&(T.types=J.types),ve.T=T}},$e.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},$e.use=function(L){return ve.H.use(L)},$e.useActionState=function(L,T,J){return ve.H.useActionState(L,T,J)},$e.useCallback=function(L,T){return ve.H.useCallback(L,T)},$e.useContext=function(L){return ve.H.useContext(L)},$e.useDebugValue=function(){},$e.useDeferredValue=function(L,T){return ve.H.useDeferredValue(L,T)},$e.useEffect=function(L,T){return ve.H.useEffect(L,T)},$e.useEffectEvent=function(L){return ve.H.useEffectEvent(L)},$e.useId=function(){return ve.H.useId()},$e.useImperativeHandle=function(L,T,J){return ve.H.useImperativeHandle(L,T,J)},$e.useInsertionEffect=function(L,T){return ve.H.useInsertionEffect(L,T)},$e.useLayoutEffect=function(L,T){return ve.H.useLayoutEffect(L,T)},$e.useMemo=function(L,T){return ve.H.useMemo(L,T)},$e.useOptimistic=function(L,T){return ve.H.useOptimistic(L,T)},$e.useReducer=function(L,T,J){return ve.H.useReducer(L,T,J)},$e.useRef=function(L){return ve.H.useRef(L)},$e.useState=function(L){return ve.H.useState(L)},$e.useSyncExternalStore=function(L,T,J){return ve.H.useSyncExternalStore(L,T,J)},$e.useTransition=function(){return ve.H.useTransition()},$e.version="19.2.3",$e}var Lh;function Bc(){return Lh||(Lh=1,gc.exports=bv()),gc.exports}var ee=Bc();const Um=bm(ee);var vc={exports:{}},ws={},xc={exports:{}},Sc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph;function Uv(){return Ph||(Ph=1,(function(n){function e(j,xe){var ze=j.length;j.push(xe);e:for(;0<ze;){var We=ze-1>>>1,at=j[We];if(0<r(at,xe))j[We]=xe,j[ze]=at,ze=We;else break e}}function o(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var xe=j[0],ze=j.pop();if(ze!==xe){j[0]=ze;e:for(var We=0,at=j.length,L=at>>>1;We<L;){var T=2*(We+1)-1,J=j[T],Re=T+1,Fe=j[Re];if(0>r(J,ze))Re<at&&0>r(Fe,J)?(j[We]=Fe,j[Re]=ze,We=Re):(j[We]=J,j[T]=ze,We=T);else if(Re<at&&0>r(Fe,ze))j[We]=Fe,j[Re]=ze,We=Re;else break e}}return xe}function r(j,xe){var ze=j.sortIndex-xe.sortIndex;return ze!==0?ze:j.id-xe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,y=f.now();n.unstable_now=function(){return f.now()-y}}var m=[],p=[],v=1,x=null,S=3,_=!1,U=!1,P=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function he(j){for(var xe=o(p);xe!==null;){if(xe.callback===null)s(p);else if(xe.startTime<=j)s(p),xe.sortIndex=xe.expirationTime,e(m,xe);else break;xe=o(p)}}function Ce(j){if(P=!1,he(j),!U)if(o(m)!==null)U=!0,_e||(_e=!0,it());else{var xe=o(p);xe!==null&&yt(Ce,xe.startTime-j)}}var _e=!1,ve=-1,Je=5,Ae=-1;function Ve(){return w?!0:!(n.unstable_now()-Ae<Je)}function Ze(){if(w=!1,_e){var j=n.unstable_now();Ae=j;var xe=!0;try{e:{U=!1,P&&(P=!1,pe(ve),ve=-1),_=!0;var ze=S;try{t:{for(he(j),x=o(m);x!==null&&!(x.expirationTime>j&&Ve());){var We=x.callback;if(typeof We=="function"){x.callback=null,S=x.priorityLevel;var at=We(x.expirationTime<=j);if(j=n.unstable_now(),typeof at=="function"){x.callback=at,he(j),xe=!0;break t}x===o(m)&&s(m),he(j)}else s(m);x=o(m)}if(x!==null)xe=!0;else{var L=o(p);L!==null&&yt(Ce,L.startTime-j),xe=!1}}break e}finally{x=null,S=ze,_=!1}xe=void 0}}finally{xe?it():_e=!1}}}var it;if(typeof le=="function")it=function(){le(Ze)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,ht=nt.port2;nt.port1.onmessage=Ze,it=function(){ht.postMessage(null)}}else it=function(){I(Ze,0)};function yt(j,xe){ve=I(function(){j(n.unstable_now())},xe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Je=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(j){switch(S){case 1:case 2:case 3:var xe=3;break;default:xe=S}var ze=S;S=xe;try{return j()}finally{S=ze}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(j,xe){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ze=S;S=j;try{return xe()}finally{S=ze}},n.unstable_scheduleCallback=function(j,xe,ze){var We=n.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?We+ze:We):ze=We,j){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=ze+at,j={id:v++,callback:xe,priorityLevel:j,startTime:ze,expirationTime:at,sortIndex:-1},ze>We?(j.sortIndex=ze,e(p,j),o(m)===null&&j===o(p)&&(P?(pe(ve),ve=-1):P=!0,yt(Ce,ze-We))):(j.sortIndex=at,e(m,j),U||_||(U=!0,_e||(_e=!0,it()))),j},n.unstable_shouldYield=Ve,n.unstable_wrapCallback=function(j){var xe=S;return function(){var ze=S;S=xe;try{return j.apply(this,arguments)}finally{S=ze}}}})(Sc)),Sc}var kh;function Fv(){return kh||(kh=1,xc.exports=Uv()),xc.exports}var Ec={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Lv(){if(zh)return cn;zh=1;var n=Bc();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(m,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:m,containerInfo:p,implementation:v}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(m,p,null,v)},cn.flushSync=function(m){var p=f.T,v=s.p;try{if(f.T=null,s.p=2,m)return m()}finally{f.T=p,s.p=v,s.d.f()}},cn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},cn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},cn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,x=y(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:_}):v==="script"&&s.d.X(m,{crossOrigin:x,integrity:S,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=y(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},cn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=y(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=y(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},cn.requestFormReset=function(m){s.d.r(m)},cn.unstable_batchedUpdates=function(m,p){return m(p)},cn.useFormState=function(m,p,v){return f.H.useFormState(m,p,v)},cn.useFormStatus=function(){return f.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var Hh;function Pv(){if(Hh)return Ec.exports;Hh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ec.exports=Lv(),Ec.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function kv(){if(Gh)return ws;Gh=1;var n=Fv(),e=Bc(),o=Pv();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var l=t,a=i;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(a=h.return,a!==null){l=a;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return m(h),t;if(g===a)return m(h),i;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=h,a=g;else{for(var E=!1,A=h.child;A;){if(A===l){E=!0,l=h,a=g;break}if(A===a){E=!0,a=h,l=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===l){E=!0,l=g,a=h;break}if(A===a){E=!0,a=g,l=h;break}A=A.sibling}if(!E)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:i}function v(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=v(t),i!==null)return i;t=t.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),le=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Je=Symbol.for("react.lazy"),Ae=Symbol.for("react.activity"),Ve=Symbol.for("react.memo_cache_sentinel"),Ze=Symbol.iterator;function it(t){return t===null||typeof t!="object"?null:(t=Ze&&t[Ze]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function ht(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case I:return"Profiler";case w:return"StrictMode";case Ce:return"Suspense";case _e:return"SuspenseList";case Ae:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case le:return t.displayName||"Context";case pe:return(t._context.displayName||"Context")+".Consumer";case he:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ve:return i=t.displayName||null,i!==null?i:ht(t.type)||"Memo";case Je:i=t._payload,t=t._init;try{return ht(t(i))}catch{}}return null}var yt=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze={pending:!1,data:null,method:null,action:null},We=[],at=-1;function L(t){return{current:t}}function T(t){0>at||(t.current=We[at],We[at]=null,at--)}function J(t,i){at++,We[at]=t.current,t.current=i}var Re=L(null),Fe=L(null),Xe=L(null),He=L(null);function Ye(t,i){switch(J(Xe,i),J(Fe,t),J(Re,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?th(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=th(i),t=nh(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}T(Re),J(Re,t)}function Ct(){T(Re),T(Fe),T(Xe)}function Nt(t){t.memoizedState!==null&&J(He,t);var i=Re.current,l=nh(i,t.type);i!==l&&(J(Fe,t),J(Re,l))}function oi(t){Fe.current===t&&(T(Re),T(Fe)),He.current===t&&(T(He),_s._currentValue=ze)}var Ut,hi;function en(t){if(Ut===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ut=i&&i[1]||"",hi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+t+hi}var Jn=!1;function Gi(t,i){if(!t||Jn)return"";Jn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var $=te}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(te){$=te}t.call(ue.prototype)}}else{try{throw Error()}catch(te){$=te}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&$&&typeof te.stack=="string")return[te.stack,$.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var D=E.split(`
`),X=A.split(`
`);for(h=a=0;a<D.length&&!D[a].includes("DetermineComponentFrameRoot");)a++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(a===D.length||h===X.length)for(a=D.length-1,h=X.length-1;1<=a&&0<=h&&D[a]!==X[h];)h--;for(;1<=a&&0<=h;a--,h--)if(D[a]!==X[h]){if(a!==1||h!==1)do if(a--,h--,0>h||D[a]!==X[h]){var oe=`
`+D[a].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=a&&0<=h);break}}}finally{Jn=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?en(l):""}function kl(t,i){switch(t.tag){case 26:case 27:case 5:return en(t.type);case 16:return en("Lazy");case 13:return t.child!==i&&i!==null?en("Suspense Fallback"):en("Suspense");case 19:return en("SuspenseList");case 0:case 15:return Gi(t.type,!1);case 11:return Gi(t.type.render,!1);case 1:return Gi(t.type,!0);case 31:return en("Activity");default:return""}}function vo(t){try{var i="",l=null;do i+=kl(t,l),l=t,t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var xo=Object.prototype.hasOwnProperty,yi=n.unstable_scheduleCallback,qi=n.unstable_cancelCallback,So=n.unstable_shouldYield,zl=n.unstable_requestPaint,tn=n.unstable_now,mi=n.unstable_getCurrentPriorityLevel,Mn=n.unstable_ImmediatePriority,Eo=n.unstable_UserBlockingPriority,Xn=n.unstable_NormalPriority,To=n.unstable_LowPriority,Xo=n.unstable_IdlePriority,Ko=n.log,Kn=n.unstable_setDisableYieldValue,li=null,Yt=null;function Ln(t){if(typeof Ko=="function"&&Kn(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(li,t)}catch{}}var zt=Math.clz32?Math.clz32:Vi,nn=Math.log,ye=Math.LN2;function Vi(t){return t>>>=0,t===0?32:31-(nn(t)/ye|0)|0}var V=256,W=262144,de=4194304;function K(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function b(t,i,l){var a=t.pendingLanes;if(a===0)return 0;var h=0,g=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var A=a&134217727;return A!==0?(a=A&~g,a!==0?h=K(a):(E&=A,E!==0?h=K(E):l||(l=A&~t,l!==0&&(h=K(l))))):(A=a&~g,A!==0?h=K(A):E!==0?h=K(E):l||(l=a&~t,l!==0&&(h=K(l)))),h===0?0:i!==0&&i!==h&&(i&g)===0&&(g=h&-h,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:h}function se(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Pe(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Se(){var t=de;return de<<=1,(de&62914560)===0&&(de=4194304),t}function Ne(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function Ge(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function je(t,i,l,a,h,g){var E=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var A=t.entanglements,D=t.expirationTimes,X=t.hiddenUpdates;for(l=E&~l;0<l;){var oe=31-zt(l),ue=1<<oe;A[oe]=0,D[oe]=-1;var $=X[oe];if($!==null)for(X[oe]=null,oe=0;oe<$.length;oe++){var te=$[oe];te!==null&&(te.lane&=-536870913)}l&=~ue}a!==0&&dn(t,a,0),g!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=g&~(E&~i))}function dn(t,i,l){t.pendingLanes|=i,t.suspendedLanes&=~i;var a=31-zt(i);t.entangledLanes|=i,t.entanglements[a]=t.entanglements[a]|1073741824|l&261930}function Oe(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var a=31-zt(l),h=1<<a;h&i|t[a]&i&&(t[a]|=i),l&=~h}}function gi(t,i){var l=i&-i;return l=(l&42)!==0?1:Ht(l),(l&(t.suspendedLanes|i))!==0?0:l}function Ht(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ot(){var t=xe.p;return t!==0?t:(t=window.event,t===void 0?32:Ah(t.type))}function ct(t,i){var l=xe.p;try{return xe.p=t,i()}finally{xe.p=l}}var wt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+wt,Jt="__reactProps$"+wt,on="__reactContainer$"+wt,Hl="__reactEvents$"+wt,Fs="__reactListeners$"+wt,Gl="__reactHandles$"+wt,Ls="__reactResources$"+wt,si="__reactMarker$"+wt;function ql(t){delete t[Lt],delete t[Jt],delete t[Hl],delete t[Fs],delete t[Gl]}function Bi(t){var i=t[Lt];if(i)return i;for(var l=t.parentNode;l;){if(i=l[on]||l[Lt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=uh(t);t!==null;){if(l=t[Lt])return l;t=uh(t)}return i}t=l,l=t.parentNode}return null}function $n(t){if(t=t[Lt]||t[on]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Co(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Oi(t){var i=t[Ls];return i||(i=t[Ls]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function qt(t){t[si]=!0}var Ps=new Set,ks={};function un(t,i){Qn(t,i),Qn(t+"Capture",i)}function Qn(t,i){for(ks[t]=i,t=0;t<i.length;t++)Ps.add(i[t])}var mr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$o={},zs={};function Qo(t){return xo.call(zs,t)?!0:xo.call($o,t)?!1:mr.test(t)?zs[t]=!0:($o[t]=!0,!1)}function Yi(t,i,l){if(Qo(i))if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+l)}}function Ji(t,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+l)}}function Rn(t,i,l,a){if(a===null)t.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(i,l,""+a)}}function xn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hs(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vl(t,i,l){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,g.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Xi(t){if(!t._valueTracker){var i=Hs(t)?"checked":"value";t._valueTracker=Vl(t,i,""+t[i])}}function Gs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),a="";return t&&(a=Hs(t)?t.checked?"true":"false":t.value),t=a,t!==l?(i.setValue(t),!0):!1}function Zo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var M=/[\n"\\]/g;function R(t){return t.replace(M,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Q(t,i,l,a,h,g,E,A){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+xn(i)):t.value!==""+xn(i)&&(t.value=""+xn(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?G(t,E,xn(i)):l!=null?G(t,E,xn(l)):a!=null&&t.removeAttribute("value"),h==null&&g!=null&&(t.defaultChecked=!!g),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+xn(A):t.removeAttribute("name")}function ie(t,i,l,a,h,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Xi(t);return}l=l!=null?""+xn(l):"",i=i!=null?""+xn(i):l,A||i===t.value||(t.value=i),t.defaultValue=i}a=a??h,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=A?t.checked:!!a,t.defaultChecked=!!a,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E),Xi(t)}function G(t,i,l){i==="number"&&Zo(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function q(t,i,l,a){if(t=t.options,i){i={};for(var h=0;h<l.length;h++)i["$"+l[h]]=!0;for(l=0;l<t.length;l++)h=i.hasOwnProperty("$"+t[l].value),t[l].selected!==h&&(t[l].selected=h),h&&a&&(t[l].defaultSelected=!0)}else{for(l=""+xn(l),i=null,h=0;h<t.length;h++){if(t[h].value===l){t[h].selected=!0,a&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function fe(t,i,l){if(i!=null&&(i=""+xn(i),i!==t.value&&(t.value=i),l==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=l!=null?""+xn(l):""}function me(t,i,l,a){if(i==null){if(a!=null){if(l!=null)throw Error(s(92));if(yt(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),i=l}l=xn(i),t.defaultValue=l,a=t.textContent,a===l&&a!==""&&a!==null&&(t.value=a),Xi(t)}function O(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var F=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function z(t,i,l){var a=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":a?t.setProperty(i,l):typeof l!="number"||l===0||F.has(i)?i==="float"?t.cssFloat=l:t[i]=(""+l).trim():t[i]=l+"px"}function N(t,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var h in i)a=i[h],i.hasOwnProperty(h)&&l[h]!==a&&z(t,h,a)}else for(var g in i)i.hasOwnProperty(g)&&z(t,g,i[g])}function H(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ne=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Te=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function we(t){return Te.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ee(){}var Ue=null;function ae(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ge=null,De=null;function Ie(t){var i=$n(t);if(i&&(t=i.stateNode)){var l=t[Jt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Q(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+R(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var a=l[i];if(a!==t&&a.form===t.form){var h=a[Jt]||null;if(!h)throw Error(s(90));Q(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<l.length;i++)a=l[i],a.form===t.form&&Gs(a)}break e;case"textarea":fe(t,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&q(t,!!l.multiple,i,!1)}}}var ce=!1;function Le(t,i,l){if(ce)return t(i,l);ce=!0;try{var a=t(i);return a}finally{if(ce=!1,(ge!==null||De!==null)&&(Ra(),ge&&(i=ge,t=De,De=ge=null,Ie(i),t)))for(i=0;i<t.length;i++)Ie(t[i])}}function Vt(t,i){var l=t.stateNode;if(l===null)return null;var a=l[Jt]||null;if(a===null)return null;l=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=!1;if(pn)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){_o=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{_o=!1}var Zn=null,gr=null,qs=null;function tf(){if(qs)return qs;var t,i=gr,l=i.length,a,h="value"in Zn?Zn.value:Zn.textContent,g=h.length;for(t=0;t<l&&i[t]===h[t];t++);var E=l-t;for(a=1;a<=E&&i[l-a]===h[g-a];a++);return qs=h.slice(t,1<a?1-a:void 0)}function Vs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Bs(){return!0}function nf(){return!1}function Sn(t){function i(l,a,h,g,E){this._reactName=l,this._targetInst=h,this.type=a,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(l=t[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Bs:nf,this.isPropagationStopped=nf,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),i}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Sn(Mo),Bl=x({},Mo,{view:0,detail:0}),Ng=Sn(Bl),vr,xr,Ol,Ys=x({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ol&&(Ol&&t.type==="mousemove"?(vr=t.screenX-Ol.screenX,xr=t.screenY-Ol.screenY):xr=vr=0,Ol=t),vr)},movementY:function(t){return"movementY"in t?t.movementY:xr}}),of=Sn(Ys),wg=x({},Ys,{dataTransfer:0}),Ig=Sn(wg),Dg=x({},Bl,{relatedTarget:0}),Sr=Sn(Dg),bg=x({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ug=Sn(bg),Fg=x({},Mo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lg=Sn(Fg),Pg=x({},Mo,{data:0}),lf=Sn(Pg),kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gg(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Hg[t])?!!i[t]:!1}function Er(){return Gg}var qg=x({},Bl,{key:function(t){if(t.key){var i=kg[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(t){return t.type==="keypress"?Vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vg=Sn(qg),Bg=x({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=Sn(Bg),Og=x({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),Yg=Sn(Og),Jg=x({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xg=Sn(Jg),Kg=x({},Ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$g=Sn(Kg),Qg=x({},Mo,{newState:0,oldState:0}),Zg=Sn(Qg),Wg=[9,13,27,32],Tr=pn&&"CompositionEvent"in window,Yl=null;pn&&"documentMode"in document&&(Yl=document.documentMode);var jg=pn&&"TextEvent"in window&&!Yl,af=pn&&(!Tr||Yl&&8<Yl&&11>=Yl),rf=" ",uf=!1;function cf(t,i){switch(t){case"keyup":return Wg.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function e0(t,i){switch(t){case"compositionend":return ff(i);case"keypress":return i.which!==32?null:(uf=!0,rf);case"textInput":return t=i.data,t===rf&&uf?null:t;default:return null}}function t0(t,i){if(Wo)return t==="compositionend"||!Tr&&cf(t,i)?(t=tf(),qs=gr=Zn=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return af&&i.locale!=="ko"?null:i.data;default:return null}}var n0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!n0[t.type]:i==="textarea"}function pf(t,i,l,a){ge?De?De.push(a):De=[a]:ge=a,i=Fa(i,"onChange"),0<i.length&&(l=new Os("onChange","change",null,l,a),t.push({event:l,listeners:i}))}var Jl=null,Xl=null;function i0(t){$p(t,0)}function Js(t){var i=Co(t);if(Gs(i))return t}function hf(t,i){if(t==="change")return i}var yf=!1;if(pn){var Cr;if(pn){var _r="oninput"in document;if(!_r){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),_r=typeof mf.oninput=="function"}Cr=_r}else Cr=!1;yf=Cr&&(!document.documentMode||9<document.documentMode)}function gf(){Jl&&(Jl.detachEvent("onpropertychange",vf),Xl=Jl=null)}function vf(t){if(t.propertyName==="value"&&Js(Xl)){var i=[];pf(i,Xl,t,ae(t)),Le(i0,i)}}function o0(t,i,l){t==="focusin"?(gf(),Jl=i,Xl=l,Jl.attachEvent("onpropertychange",vf)):t==="focusout"&&gf()}function l0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Js(Xl)}function s0(t,i){if(t==="click")return Js(i)}function a0(t,i){if(t==="input"||t==="change")return Js(i)}function r0(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Nn=typeof Object.is=="function"?Object.is:r0;function Kl(t,i){if(Nn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),a=Object.keys(i);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var h=l[a];if(!xo.call(i,h)||!Nn(t[h],i[h]))return!1}return!0}function xf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sf(t,i){var l=xf(t);t=0;for(var a;l;){if(l.nodeType===3){if(a=t+l.textContent.length,t<=i&&a>=i)return{node:l,offset:i-t};t=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xf(l)}}function Ef(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Ef(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Tf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Zo(t.document);i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=Zo(t.document)}return i}function Ar(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var u0=pn&&"documentMode"in document&&11>=document.documentMode,jo=null,Mr=null,$l=null,Rr=!1;function Cf(t,i,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Rr||jo==null||jo!==Zo(a)||(a=jo,"selectionStart"in a&&Ar(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),$l&&Kl($l,a)||($l=a,a=Fa(Mr,"onSelect"),0<a.length&&(i=new Os("onSelect","select",null,i,l),t.push({event:i,listeners:a}),i.target=jo)))}function Ro(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var el={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionrun:Ro("Transition","TransitionRun"),transitionstart:Ro("Transition","TransitionStart"),transitioncancel:Ro("Transition","TransitionCancel"),transitionend:Ro("Transition","TransitionEnd")},Nr={},_f={};pn&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function No(t){if(Nr[t])return Nr[t];if(!el[t])return t;var i=el[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in _f)return Nr[t]=i[l];return t}var Af=No("animationend"),Mf=No("animationiteration"),Rf=No("animationstart"),c0=No("transitionrun"),f0=No("transitionstart"),d0=No("transitioncancel"),Nf=No("transitionend"),wf=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wr.push("scrollEnd");function Wn(t,i){wf.set(t,i),un(i,[t])}var Xs=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Pn=[],tl=0,Ir=0;function Ks(){for(var t=tl,i=Ir=tl=0;i<t;){var l=Pn[i];Pn[i++]=null;var a=Pn[i];Pn[i++]=null;var h=Pn[i];Pn[i++]=null;var g=Pn[i];if(Pn[i++]=null,a!==null&&h!==null){var E=a.pending;E===null?h.next=h:(h.next=E.next,E.next=h),a.pending=h}g!==0&&If(l,h,g)}}function $s(t,i,l,a){Pn[tl++]=t,Pn[tl++]=i,Pn[tl++]=l,Pn[tl++]=a,Ir|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function Dr(t,i,l,a){return $s(t,i,l,a),Qs(t)}function wo(t,i){return $s(t,null,null,i),Qs(t)}function If(t,i,l){t.lanes|=l;var a=t.alternate;a!==null&&(a.lanes|=l);for(var h=!1,g=t.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(h=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,h&&i!==null&&(h=31-zt(l),t=g.hiddenUpdates,a=t[h],a===null?t[h]=[i]:a.push(i),i.lane=l|536870912),g):null}function Qs(t){if(50<gs)throw gs=0,Gu=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var nl={};function p0(t,i,l,a){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,i,l,a){return new p0(t,i,l,a)}function br(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vi(t,i){var l=t.alternate;return l===null?(l=wn(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Df(t,i){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,i=l.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Zs(t,i,l,a,h,g){var E=0;if(a=t,typeof t=="function")br(t)&&(E=1);else if(typeof t=="string")E=vv(t,l,Re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Ae:return t=wn(31,l,i,h),t.elementType=Ae,t.lanes=g,t;case P:return Io(l.children,h,g,i);case w:E=8,h|=24;break;case I:return t=wn(12,l,i,h|2),t.elementType=I,t.lanes=g,t;case Ce:return t=wn(13,l,i,h),t.elementType=Ce,t.lanes=g,t;case _e:return t=wn(19,l,i,h),t.elementType=_e,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:E=10;break e;case pe:E=9;break e;case he:E=11;break e;case ve:E=14;break e;case Je:E=16,a=null;break e}E=29,l=Error(s(130,t===null?"null":typeof t,"")),a=null}return i=wn(E,l,i,h),i.elementType=t,i.type=a,i.lanes=g,i}function Io(t,i,l,a){return t=wn(7,t,a,i),t.lanes=l,t}function Ur(t,i,l){return t=wn(6,t,null,i),t.lanes=l,t}function bf(t){var i=wn(18,null,null,0);return i.stateNode=t,i}function Fr(t,i,l){return i=wn(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Uf=new WeakMap;function kn(t,i){if(typeof t=="object"&&t!==null){var l=Uf.get(t);return l!==void 0?l:(i={value:t,source:i,stack:vo(i)},Uf.set(t,i),i)}return{value:t,source:i,stack:vo(i)}}var il=[],ol=0,Ws=null,Ql=0,zn=[],Hn=0,Ki=null,ai=1,ri="";function xi(t,i){il[ol++]=Ql,il[ol++]=Ws,Ws=t,Ql=i}function Ff(t,i,l){zn[Hn++]=ai,zn[Hn++]=ri,zn[Hn++]=Ki,Ki=t;var a=ai;t=ri;var h=32-zt(a)-1;a&=~(1<<h),l+=1;var g=32-zt(i)+h;if(30<g){var E=h-h%5;g=(a&(1<<E)-1).toString(32),a>>=E,h-=E,ai=1<<32-zt(i)+h|l<<h|a,ri=g+t}else ai=1<<g|l<<h|a,ri=t}function Lr(t){t.return!==null&&(xi(t,1),Ff(t,1,0))}function Pr(t){for(;t===Ws;)Ws=il[--ol],il[ol]=null,Ql=il[--ol],il[ol]=null;for(;t===Ki;)Ki=zn[--Hn],zn[Hn]=null,ri=zn[--Hn],zn[Hn]=null,ai=zn[--Hn],zn[Hn]=null}function Lf(t,i){zn[Hn++]=ai,zn[Hn++]=ri,zn[Hn++]=Ki,ai=i.id,ri=i.overflow,Ki=t}var ln=null,It=null,ft=!1,$i=null,Gn=!1,kr=Error(s(519));function Qi(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(kn(i,t)),kr}function Pf(t){var i=t.stateNode,l=t.type,a=t.memoizedProps;switch(i[Lt]=t,i[Jt]=a,l){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(l=0;l<xs.length;l++)st(xs[l],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":st("invalid",i),ie(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":st("invalid",i);break;case"textarea":st("invalid",i),me(i,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||a.suppressHydrationWarning===!0||jp(i.textContent,l)?(a.popover!=null&&(st("beforetoggle",i),st("toggle",i)),a.onScroll!=null&&st("scroll",i),a.onScrollEnd!=null&&st("scrollend",i),a.onClick!=null&&(i.onclick=Ee),i=!0):i=!1,i||Qi(t,!0)}function kf(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:ln=ln.return}}function ll(t){if(t!==ln)return!1;if(!ft)return kf(t),ft=!0,!1;var i=t.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||tc(t.type,t.memoizedProps)),l=!l),l&&It&&Qi(t),kf(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));It=rh(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));It=rh(t)}else i===27?(i=It,co(t.type)?(t=sc,sc=null,It=t):It=i):It=ln?Vn(t.stateNode.nextSibling):null;return!0}function Do(){It=ln=null,ft=!1}function zr(){var t=$i;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),$i=null),t}function Zl(t){$i===null?$i=[t]:$i.push(t)}var Hr=L(null),bo=null,Si=null;function Zi(t,i,l){J(Hr,i._currentValue),i._currentValue=l}function Ei(t){t._currentValue=Hr.current,T(Hr)}function Gr(t,i,l){for(;t!==null;){var a=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),t===l)break;t=t.return}}function qr(t,i,l,a){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var g=h.dependencies;if(g!==null){var E=h.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=h;for(var D=0;D<i.length;D++)if(A.context===i[D]){g.lanes|=l,A=g.alternate,A!==null&&(A.lanes|=l),Gr(g.return,l,t),a||(E=null);break e}g=A.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),Gr(E,l,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function sl(t,i,l,a){t=null;for(var h=i,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var A=h.type;Nn(h.pendingProps.value,E.value)||(t!==null?t.push(A):t=[A])}}else if(h===He.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(_s):t=[_s])}h=h.return}t!==null&&qr(i,t,l,a),i.flags|=262144}function js(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Uo(t){bo=t,Si=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return zf(bo,t)}function ea(t,i){return bo===null&&Uo(t),zf(t,i)}function zf(t,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Si===null){if(t===null)throw Error(s(308));Si=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Si=Si.next=i;return l}var h0=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(l,a){t.push(a)}};this.abort=function(){i.aborted=!0,t.forEach(function(l){return l()})}},y0=n.unstable_scheduleCallback,m0=n.unstable_NormalPriority,Xt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vr(){return{controller:new h0,data:new Map,refCount:0}}function Wl(t){t.refCount--,t.refCount===0&&y0(m0,function(){t.controller.abort()})}var jl=null,Br=0,al=0,rl=null;function g0(t,i){if(jl===null){var l=jl=[];Br=0,al=Ju(),rl={status:"pending",value:void 0,then:function(a){l.push(a)}}}return Br++,i.then(Hf,Hf),i}function Hf(){if(--Br===0&&jl!==null){rl!==null&&(rl.status="fulfilled");var t=jl;jl=null,al=0,rl=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function v0(t,i){var l=[],a={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return t.then(function(){a.status="fulfilled",a.value=i;for(var h=0;h<l.length;h++)(0,l[h])(i)},function(h){for(a.status="rejected",a.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),a}var Gf=j.S;j.S=function(t,i){Cp=tn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&g0(t,i),Gf!==null&&Gf(t,i)};var Fo=L(null);function Or(){var t=Fo.current;return t!==null?t:Rt.pooledCache}function ta(t,i){i===null?J(Fo,Fo.current):J(Fo,i.pool)}function qf(){var t=Or();return t===null?null:{parent:Xt._currentValue,pool:t}}var ul=Error(s(460)),Yr=Error(s(474)),na=Error(s(542)),ia={then:function(){}};function Vf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Bf(t,i,l){switch(l=t[l],l===void 0?t.push(i):l!==i&&(i.then(Ee,Ee),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yf(t),t;default:if(typeof i.status=="string")i.then(Ee,Ee);else{if(t=Rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(a){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=a}},function(a){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Yf(t),t}throw Po=i,ul}}function Lo(t){try{var i=t._init;return i(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Po=l,ul):l}}var Po=null;function Of(){if(Po===null)throw Error(s(459));var t=Po;return Po=null,t}function Yf(t){if(t===ul||t===na)throw Error(s(483))}var cl=null,es=0;function oa(t){var i=es;return es+=1,cl===null&&(cl=[]),Bf(cl,t,i)}function ts(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function la(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Jf(t){function i(B,k){if(t){var Y=B.deletions;Y===null?(B.deletions=[k],B.flags|=16):Y.push(k)}}function l(B,k){if(!t)return null;for(;k!==null;)i(B,k),k=k.sibling;return null}function a(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function h(B,k){return B=vi(B,k),B.index=0,B.sibling=null,B}function g(B,k,Y){return B.index=Y,t?(Y=B.alternate,Y!==null?(Y=Y.index,Y<k?(B.flags|=67108866,k):Y):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function E(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function A(B,k,Y,re){return k===null||k.tag!==6?(k=Ur(Y,B.mode,re),k.return=B,k):(k=h(k,Y),k.return=B,k)}function D(B,k,Y,re){var qe=Y.type;return qe===P?oe(B,k,Y.props.children,re,Y.key):k!==null&&(k.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Je&&Lo(qe)===k.type)?(k=h(k,Y.props),ts(k,Y),k.return=B,k):(k=Zs(Y.type,Y.key,Y.props,null,B.mode,re),ts(k,Y),k.return=B,k)}function X(B,k,Y,re){return k===null||k.tag!==4||k.stateNode.containerInfo!==Y.containerInfo||k.stateNode.implementation!==Y.implementation?(k=Fr(Y,B.mode,re),k.return=B,k):(k=h(k,Y.children||[]),k.return=B,k)}function oe(B,k,Y,re,qe){return k===null||k.tag!==7?(k=Io(Y,B.mode,re,qe),k.return=B,k):(k=h(k,Y),k.return=B,k)}function ue(B,k,Y){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ur(""+k,B.mode,Y),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return Y=Zs(k.type,k.key,k.props,null,B.mode,Y),ts(Y,k),Y.return=B,Y;case U:return k=Fr(k,B.mode,Y),k.return=B,k;case Je:return k=Lo(k),ue(B,k,Y)}if(yt(k)||it(k))return k=Io(k,B.mode,Y,null),k.return=B,k;if(typeof k.then=="function")return ue(B,oa(k),Y);if(k.$$typeof===le)return ue(B,ea(B,k),Y);la(B,k)}return null}function $(B,k,Y,re){var qe=k!==null?k.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return qe!==null?null:A(B,k,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:return Y.key===qe?D(B,k,Y,re):null;case U:return Y.key===qe?X(B,k,Y,re):null;case Je:return Y=Lo(Y),$(B,k,Y,re)}if(yt(Y)||it(Y))return qe!==null?null:oe(B,k,Y,re,null);if(typeof Y.then=="function")return $(B,k,oa(Y),re);if(Y.$$typeof===le)return $(B,k,ea(B,Y),re);la(B,Y)}return null}function te(B,k,Y,re,qe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return B=B.get(Y)||null,A(k,B,""+re,qe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _:return B=B.get(re.key===null?Y:re.key)||null,D(k,B,re,qe);case U:return B=B.get(re.key===null?Y:re.key)||null,X(k,B,re,qe);case Je:return re=Lo(re),te(B,k,Y,re,qe)}if(yt(re)||it(re))return B=B.get(Y)||null,oe(k,B,re,qe,null);if(typeof re.then=="function")return te(B,k,Y,oa(re),qe);if(re.$$typeof===le)return te(B,k,Y,ea(k,re),qe);la(k,re)}return null}function be(B,k,Y,re){for(var qe=null,mt=null,ke=k,tt=k=0,ut=null;ke!==null&&tt<Y.length;tt++){ke.index>tt?(ut=ke,ke=null):ut=ke.sibling;var gt=$(B,ke,Y[tt],re);if(gt===null){ke===null&&(ke=ut);break}t&&ke&&gt.alternate===null&&i(B,ke),k=g(gt,k,tt),mt===null?qe=gt:mt.sibling=gt,mt=gt,ke=ut}if(tt===Y.length)return l(B,ke),ft&&xi(B,tt),qe;if(ke===null){for(;tt<Y.length;tt++)ke=ue(B,Y[tt],re),ke!==null&&(k=g(ke,k,tt),mt===null?qe=ke:mt.sibling=ke,mt=ke);return ft&&xi(B,tt),qe}for(ke=a(ke);tt<Y.length;tt++)ut=te(ke,B,tt,Y[tt],re),ut!==null&&(t&&ut.alternate!==null&&ke.delete(ut.key===null?tt:ut.key),k=g(ut,k,tt),mt===null?qe=ut:mt.sibling=ut,mt=ut);return t&&ke.forEach(function(mo){return i(B,mo)}),ft&&xi(B,tt),qe}function Be(B,k,Y,re){if(Y==null)throw Error(s(151));for(var qe=null,mt=null,ke=k,tt=k=0,ut=null,gt=Y.next();ke!==null&&!gt.done;tt++,gt=Y.next()){ke.index>tt?(ut=ke,ke=null):ut=ke.sibling;var mo=$(B,ke,gt.value,re);if(mo===null){ke===null&&(ke=ut);break}t&&ke&&mo.alternate===null&&i(B,ke),k=g(mo,k,tt),mt===null?qe=mo:mt.sibling=mo,mt=mo,ke=ut}if(gt.done)return l(B,ke),ft&&xi(B,tt),qe;if(ke===null){for(;!gt.done;tt++,gt=Y.next())gt=ue(B,gt.value,re),gt!==null&&(k=g(gt,k,tt),mt===null?qe=gt:mt.sibling=gt,mt=gt);return ft&&xi(B,tt),qe}for(ke=a(ke);!gt.done;tt++,gt=Y.next())gt=te(ke,B,tt,gt.value,re),gt!==null&&(t&&gt.alternate!==null&&ke.delete(gt.key===null?tt:gt.key),k=g(gt,k,tt),mt===null?qe=gt:mt.sibling=gt,mt=gt);return t&&ke.forEach(function(wv){return i(B,wv)}),ft&&xi(B,tt),qe}function Mt(B,k,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===P&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:e:{for(var qe=Y.key;k!==null;){if(k.key===qe){if(qe=Y.type,qe===P){if(k.tag===7){l(B,k.sibling),re=h(k,Y.props.children),re.return=B,B=re;break e}}else if(k.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Je&&Lo(qe)===k.type){l(B,k.sibling),re=h(k,Y.props),ts(re,Y),re.return=B,B=re;break e}l(B,k);break}else i(B,k);k=k.sibling}Y.type===P?(re=Io(Y.props.children,B.mode,re,Y.key),re.return=B,B=re):(re=Zs(Y.type,Y.key,Y.props,null,B.mode,re),ts(re,Y),re.return=B,B=re)}return E(B);case U:e:{for(qe=Y.key;k!==null;){if(k.key===qe)if(k.tag===4&&k.stateNode.containerInfo===Y.containerInfo&&k.stateNode.implementation===Y.implementation){l(B,k.sibling),re=h(k,Y.children||[]),re.return=B,B=re;break e}else{l(B,k);break}else i(B,k);k=k.sibling}re=Fr(Y,B.mode,re),re.return=B,B=re}return E(B);case Je:return Y=Lo(Y),Mt(B,k,Y,re)}if(yt(Y))return be(B,k,Y,re);if(it(Y)){if(qe=it(Y),typeof qe!="function")throw Error(s(150));return Y=qe.call(Y),Be(B,k,Y,re)}if(typeof Y.then=="function")return Mt(B,k,oa(Y),re);if(Y.$$typeof===le)return Mt(B,k,ea(B,Y),re);la(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,k!==null&&k.tag===6?(l(B,k.sibling),re=h(k,Y),re.return=B,B=re):(l(B,k),re=Ur(Y,B.mode,re),re.return=B,B=re),E(B)):l(B,k)}return function(B,k,Y,re){try{es=0;var qe=Mt(B,k,Y,re);return cl=null,qe}catch(ke){if(ke===ul||ke===na)throw ke;var mt=wn(29,ke,null,B.mode);return mt.lanes=re,mt.return=B,mt}finally{}}}var ko=Jf(!0),Xf=Jf(!1),Wi=!1;function Jr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xr(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ji(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function eo(t,i,l){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(xt&2)!==0){var h=a.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),a.pending=i,i=Qs(t),If(t,null,l),i}return $s(t,a,i,l),Qs(t)}function ns(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var a=i.lanes;a&=t.pendingLanes,l|=a,i.lanes=l,Oe(t,l)}}function Kr(t,i){var l=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?h=g=i:g=g.next=i}else h=g=i;l={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}var $r=!1;function is(){if($r){var t=rl;if(t!==null)throw t}}function os(t,i,l,a){$r=!1;var h=t.updateQueue;Wi=!1;var g=h.firstBaseUpdate,E=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var D=A,X=D.next;D.next=null,E===null?g=X:E.next=X,E=D;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==E&&(A===null?oe.firstBaseUpdate=X:A.next=X,oe.lastBaseUpdate=D))}if(g!==null){var ue=h.baseState;E=0,oe=X=D=null,A=g;do{var $=A.lane&-536870913,te=$!==A.lane;if(te?(rt&$)===$:(a&$)===$){$!==0&&$===al&&($r=!0),oe!==null&&(oe=oe.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var be=t,Be=A;$=i;var Mt=l;switch(Be.tag){case 1:if(be=Be.payload,typeof be=="function"){ue=be.call(Mt,ue,$);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Be.payload,$=typeof be=="function"?be.call(Mt,ue,$):be,$==null)break e;ue=x({},ue,$);break e;case 2:Wi=!0}}$=A.callback,$!==null&&(t.flags|=64,te&&(t.flags|=8192),te=h.callbacks,te===null?h.callbacks=[$]:te.push($))}else te={lane:$,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(X=oe=te,D=ue):oe=oe.next=te,E|=$;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;te=A,A=te.next,te.next=null,h.lastBaseUpdate=te,h.shared.pending=null}}while(!0);oe===null&&(D=ue),h.baseState=D,h.firstBaseUpdate=X,h.lastBaseUpdate=oe,g===null&&(h.shared.lanes=0),lo|=E,t.lanes=E,t.memoizedState=ue}}function Kf(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function $f(t,i){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Kf(l[t],i)}var fl=L(null),sa=L(0);function Qf(t,i){t=Ii,J(sa,t),J(fl,i),Ii=t|i.baseLanes}function Qr(){J(sa,Ii),J(fl,fl.current)}function Zr(){Ii=sa.current,T(fl),T(sa)}var In=L(null),qn=null;function to(t){var i=t.alternate;J(Bt,Bt.current&1),J(In,t),qn===null&&(i===null||fl.current!==null||i.memoizedState!==null)&&(qn=t)}function Wr(t){J(Bt,Bt.current),J(In,t),qn===null&&(qn=t)}function Zf(t){t.tag===22?(J(Bt,Bt.current),J(In,t),qn===null&&(qn=t)):no()}function no(){J(Bt,Bt.current),J(In,In.current)}function Dn(t){T(In),qn===t&&(qn=null),T(Bt)}var Bt=L(0);function aa(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||oc(l)||lc(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ti=0,et=null,_t=null,Kt=null,ra=!1,dl=!1,zo=!1,ua=0,ls=0,pl=null,x0=0;function Pt(){throw Error(s(321))}function jr(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!Nn(t[l],i[l]))return!1;return!0}function eu(t,i,l,a,h,g){return Ti=g,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,j.H=t===null||t.memoizedState===null?Fd:yu,zo=!1,g=l(a,h),zo=!1,dl&&(g=jf(i,l,a,h)),Wf(t),g}function Wf(t){j.H=rs;var i=_t!==null&&_t.next!==null;if(Ti=0,Kt=_t=et=null,ra=!1,ls=0,pl=null,i)throw Error(s(300));t===null||$t||(t=t.dependencies,t!==null&&js(t)&&($t=!0))}function jf(t,i,l,a){et=t;var h=0;do{if(dl&&(pl=null),ls=0,dl=!1,25<=h)throw Error(s(301));if(h+=1,Kt=_t=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}j.H=Ld,g=i(l,a)}while(dl);return g}function S0(){var t=j.H,i=t.useState()[0];return i=typeof i.then=="function"?ss(i):i,t=t.useState()[0],(_t!==null?_t.memoizedState:null)!==t&&(et.flags|=1024),i}function tu(){var t=ua!==0;return ua=0,t}function nu(t,i,l){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~l}function iu(t){if(ra){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ra=!1}Ti=0,Kt=_t=et=null,dl=!1,ls=ua=0,pl=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?et.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Ot(){if(_t===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var i=Kt===null?et.memoizedState:Kt.next;if(i!==null)Kt=i,_t=t;else{if(t===null)throw et.alternate===null?Error(s(467)):Error(s(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Kt===null?et.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ss(t){var i=ls;return ls+=1,pl===null&&(pl=[]),t=Bf(pl,t,i),i=et,(Kt===null?i.memoizedState:Kt.next)===null&&(i=i.alternate,j.H=i===null||i.memoizedState===null?Fd:yu),t}function fa(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ss(t);if(t.$$typeof===le)return sn(t)}throw Error(s(438,String(t)))}function ou(t){var i=null,l=et.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var a=et.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ca(),et.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(t),a=0;a<t;a++)l[a]=Ve;return i.index++,l}function Ci(t,i){return typeof i=="function"?i(t):i}function da(t){var i=Ot();return lu(i,_t,t)}function lu(t,i,l){var a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var h=t.baseQueue,g=a.pending;if(g!==null){if(h!==null){var E=h.next;h.next=g.next,g.next=E}i.baseQueue=h=g,a.pending=null}if(g=t.baseState,h===null)t.memoizedState=g;else{i=h.next;var A=E=null,D=null,X=i,oe=!1;do{var ue=X.lane&-536870913;if(ue!==X.lane?(rt&ue)===ue:(Ti&ue)===ue){var $=X.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ue===al&&(oe=!0);else if((Ti&$)===$){X=X.next,$===al&&(oe=!0);continue}else ue={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(A=D=ue,E=g):D=D.next=ue,et.lanes|=$,lo|=$;ue=X.action,zo&&l(g,ue),g=X.hasEagerState?X.eagerState:l(g,ue)}else $={lane:ue,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(A=D=$,E=g):D=D.next=$,et.lanes|=ue,lo|=ue;X=X.next}while(X!==null&&X!==i);if(D===null?E=g:D.next=A,!Nn(g,t.memoizedState)&&($t=!0,oe&&(l=rl,l!==null)))throw l;t.memoizedState=g,t.baseState=E,t.baseQueue=D,a.lastRenderedState=g}return h===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function su(t){var i=Ot(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var a=l.dispatch,h=l.pending,g=i.memoizedState;if(h!==null){l.pending=null;var E=h=h.next;do g=t(g,E.action),E=E.next;while(E!==h);Nn(g,i.memoizedState)||($t=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,a]}function ed(t,i,l){var a=et,h=Ot(),g=ft;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=i();var E=!Nn((_t||h).memoizedState,l);if(E&&(h.memoizedState=l,$t=!0),h=h.queue,uu(id.bind(null,a,h,t),[t]),h.getSnapshot!==i||E||Kt!==null&&Kt.memoizedState.tag&1){if(a.flags|=2048,hl(9,{destroy:void 0},nd.bind(null,a,h,l,i),null),Rt===null)throw Error(s(349));g||(Ti&127)!==0||td(a,i,l)}return l}function td(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=et.updateQueue,i===null?(i=ca(),et.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function nd(t,i,l,a){i.value=l,i.getSnapshot=a,od(i)&&ld(t)}function id(t,i,l){return l(function(){od(i)&&ld(t)})}function od(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!Nn(t,l)}catch{return!0}}function ld(t){var i=wo(t,2);i!==null&&An(i,t,2)}function au(t){var i=hn();if(typeof t=="function"){var l=t;if(t=l(),zo){Ln(!0);try{l()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},i}function sd(t,i,l,a){return t.baseState=l,lu(t,_t,typeof a=="function"?a:Ci)}function E0(t,i,l,a,h){if(ya(t))throw Error(s(485));if(t=i.action,t!==null){var g={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};j.T!==null?l(!0):g.isTransition=!1,a(g),l=i.pending,l===null?(g.next=i.pending=g,ad(i,g)):(g.next=l.next,i.pending=l.next=g)}}function ad(t,i){var l=i.action,a=i.payload,h=t.state;if(i.isTransition){var g=j.T,E={};j.T=E;try{var A=l(h,a),D=j.S;D!==null&&D(E,A),rd(t,i,A)}catch(X){ru(t,i,X)}finally{g!==null&&E.types!==null&&(g.types=E.types),j.T=g}}else try{g=l(h,a),rd(t,i,g)}catch(X){ru(t,i,X)}}function rd(t,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){ud(t,i,a)},function(a){return ru(t,i,a)}):ud(t,i,l)}function ud(t,i,l){i.status="fulfilled",i.value=l,cd(i),t.state=l,i=t.pending,i!==null&&(l=i.next,l===i?t.pending=null:(l=l.next,i.next=l,ad(t,l)))}function ru(t,i,l){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=l,cd(i),i=i.next;while(i!==a)}t.action=null}function cd(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function fd(t,i){return i}function dd(t,i){if(ft){var l=Rt.formState;if(l!==null){e:{var a=et;if(ft){if(It){t:{for(var h=It,g=Gn;h.nodeType!==8;){if(!g){h=null;break t}if(h=Vn(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){It=Vn(h.nextSibling),a=h.data==="F!";break e}}Qi(a)}a=!1}a&&(i=l[0])}}return l=hn(),l.memoizedState=l.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:i},l.queue=a,l=Dd.bind(null,et,a),a.dispatch=l,a=au(!1),g=hu.bind(null,et,!1,a.queue),a=hn(),h={state:i,dispatch:null,action:t,pending:null},a.queue=h,l=E0.bind(null,et,h,g,l),h.dispatch=l,a.memoizedState=t,[i,l,!1]}function pd(t){var i=Ot();return hd(i,_t,t)}function hd(t,i,l){if(i=lu(t,i,fd)[0],t=da(Ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=ss(i)}catch(E){throw E===ul?na:E}else a=i;i=Ot();var h=i.queue,g=h.dispatch;return l!==i.memoizedState&&(et.flags|=2048,hl(9,{destroy:void 0},T0.bind(null,h,l),null)),[a,g,t]}function T0(t,i){t.action=i}function yd(t){var i=Ot(),l=_t;if(l!==null)return hd(i,l,t);Ot(),i=i.memoizedState,l=Ot();var a=l.queue.dispatch;return l.memoizedState=t,[i,a,!1]}function hl(t,i,l,a){return t={tag:t,create:l,deps:a,inst:i,next:null},i=et.updateQueue,i===null&&(i=ca(),et.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=t.next=t:(a=l.next,l.next=t,t.next=a,i.lastEffect=t),t}function md(){return Ot().memoizedState}function pa(t,i,l,a){var h=hn();et.flags|=t,h.memoizedState=hl(1|i,{destroy:void 0},l,a===void 0?null:a)}function ha(t,i,l,a){var h=Ot();a=a===void 0?null:a;var g=h.memoizedState.inst;_t!==null&&a!==null&&jr(a,_t.memoizedState.deps)?h.memoizedState=hl(i,g,l,a):(et.flags|=t,h.memoizedState=hl(1|i,g,l,a))}function gd(t,i){pa(8390656,8,t,i)}function uu(t,i){ha(2048,8,t,i)}function C0(t){et.flags|=4;var i=et.updateQueue;if(i===null)i=ca(),et.updateQueue=i,i.events=[t];else{var l=i.events;l===null?i.events=[t]:l.push(t)}}function vd(t){var i=Ot().memoizedState;return C0({ref:i,nextImpl:t}),function(){if((xt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function xd(t,i){return ha(4,2,t,i)}function Sd(t,i){return ha(4,4,t,i)}function Ed(t,i){if(typeof i=="function"){t=t();var l=i(t);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Td(t,i,l){l=l!=null?l.concat([t]):null,ha(4,4,Ed.bind(null,i,t),l)}function cu(){}function Cd(t,i){var l=Ot();i=i===void 0?null:i;var a=l.memoizedState;return i!==null&&jr(i,a[1])?a[0]:(l.memoizedState=[t,i],t)}function _d(t,i){var l=Ot();i=i===void 0?null:i;var a=l.memoizedState;if(i!==null&&jr(i,a[1]))return a[0];if(a=t(),zo){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[a,i],a}function fu(t,i,l){return l===void 0||(Ti&1073741824)!==0&&(rt&261930)===0?t.memoizedState=i:(t.memoizedState=l,t=Ap(),et.lanes|=t,lo|=t,l)}function Ad(t,i,l,a){return Nn(l,i)?l:fl.current!==null?(t=fu(t,l,a),Nn(t,i)||($t=!0),t):(Ti&42)===0||(Ti&1073741824)!==0&&(rt&261930)===0?($t=!0,t.memoizedState=l):(t=Ap(),et.lanes|=t,lo|=t,i)}function Md(t,i,l,a,h){var g=xe.p;xe.p=g!==0&&8>g?g:8;var E=j.T,A={};j.T=A,hu(t,!1,i,l);try{var D=h(),X=j.S;if(X!==null&&X(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var oe=v0(D,a);as(t,i,oe,Fn(t))}else as(t,i,a,Fn(t))}catch(ue){as(t,i,{then:function(){},status:"rejected",reason:ue},Fn())}finally{xe.p=g,E!==null&&A.types!==null&&(E.types=A.types),j.T=E}}function _0(){}function du(t,i,l,a){if(t.tag!==5)throw Error(s(476));var h=Rd(t).queue;Md(t,h,i,ze,l===null?_0:function(){return Nd(t),l(a)})}function Rd(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ze,baseState:ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ze},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:l},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Nd(t){var i=Rd(t);i.next===null&&(i=t.alternate.memoizedState),as(t,i.next.queue,{},Fn())}function pu(){return sn(_s)}function wd(){return Ot().memoizedState}function Id(){return Ot().memoizedState}function A0(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var l=Fn();t=ji(l);var a=eo(i,t,l);a!==null&&(An(a,i,l),ns(a,i,l)),i={cache:Vr()},t.payload=i;return}i=i.return}}function M0(t,i,l){var a=Fn();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ya(t)?bd(i,l):(l=Dr(t,i,l,a),l!==null&&(An(l,t,a),Ud(l,i,a)))}function Dd(t,i,l){var a=Fn();as(t,i,l,a)}function as(t,i,l,a){var h={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ya(t))bd(i,h);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,l);if(h.hasEagerState=!0,h.eagerState=A,Nn(A,E))return $s(t,i,h,0),Rt===null&&Ks(),!1}catch{}finally{}if(l=Dr(t,i,h,a),l!==null)return An(l,t,a),Ud(l,i,a),!0}return!1}function hu(t,i,l,a){if(a={lane:2,revertLane:Ju(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ya(t)){if(i)throw Error(s(479))}else i=Dr(t,l,a,2),i!==null&&An(i,t,2)}function ya(t){var i=t.alternate;return t===et||i!==null&&i===et}function bd(t,i){dl=ra=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function Ud(t,i,l){if((l&4194048)!==0){var a=i.lanes;a&=t.pendingLanes,l|=a,i.lanes=l,Oe(t,l)}}var rs={readContext:sn,use:fa,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};rs.useEffectEvent=Pt;var Fd={readContext:sn,use:fa,useCallback:function(t,i){return hn().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:gd,useImperativeHandle:function(t,i,l){l=l!=null?l.concat([t]):null,pa(4194308,4,Ed.bind(null,i,t),l)},useLayoutEffect:function(t,i){return pa(4194308,4,t,i)},useInsertionEffect:function(t,i){pa(4,2,t,i)},useMemo:function(t,i){var l=hn();i=i===void 0?null:i;var a=t();if(zo){Ln(!0);try{t()}finally{Ln(!1)}}return l.memoizedState=[a,i],a},useReducer:function(t,i,l){var a=hn();if(l!==void 0){var h=l(i);if(zo){Ln(!0);try{l(i)}finally{Ln(!1)}}}else h=i;return a.memoizedState=a.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},a.queue=t,t=t.dispatch=M0.bind(null,et,t),[a.memoizedState,t]},useRef:function(t){var i=hn();return t={current:t},i.memoizedState=t},useState:function(t){t=au(t);var i=t.queue,l=Dd.bind(null,et,i);return i.dispatch=l,[t.memoizedState,l]},useDebugValue:cu,useDeferredValue:function(t,i){var l=hn();return fu(l,t,i)},useTransition:function(){var t=au(!1);return t=Md.bind(null,et,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,l){var a=et,h=hn();if(ft){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Rt===null)throw Error(s(349));(rt&127)!==0||td(a,i,l)}h.memoizedState=l;var g={value:l,getSnapshot:i};return h.queue=g,gd(id.bind(null,a,g,t),[t]),a.flags|=2048,hl(9,{destroy:void 0},nd.bind(null,a,g,l,i),null),l},useId:function(){var t=hn(),i=Rt.identifierPrefix;if(ft){var l=ri,a=ai;l=(a&~(1<<32-zt(a)-1)).toString(32)+l,i="_"+i+"R_"+l,l=ua++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=x0++,i="_"+i+"r_"+l.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:pu,useFormState:dd,useActionState:dd,useOptimistic:function(t){var i=hn();i.memoizedState=i.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=hu.bind(null,et,!0,l),l.dispatch=i,[t,i]},useMemoCache:ou,useCacheRefresh:function(){return hn().memoizedState=A0.bind(null,et)},useEffectEvent:function(t){var i=hn(),l={impl:t};return i.memoizedState=l,function(){if((xt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},yu={readContext:sn,use:fa,useCallback:Cd,useContext:sn,useEffect:uu,useImperativeHandle:Td,useInsertionEffect:xd,useLayoutEffect:Sd,useMemo:_d,useReducer:da,useRef:md,useState:function(){return da(Ci)},useDebugValue:cu,useDeferredValue:function(t,i){var l=Ot();return Ad(l,_t.memoizedState,t,i)},useTransition:function(){var t=da(Ci)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:ss(t),i]},useSyncExternalStore:ed,useId:wd,useHostTransitionStatus:pu,useFormState:pd,useActionState:pd,useOptimistic:function(t,i){var l=Ot();return sd(l,_t,t,i)},useMemoCache:ou,useCacheRefresh:Id};yu.useEffectEvent=vd;var Ld={readContext:sn,use:fa,useCallback:Cd,useContext:sn,useEffect:uu,useImperativeHandle:Td,useInsertionEffect:xd,useLayoutEffect:Sd,useMemo:_d,useReducer:su,useRef:md,useState:function(){return su(Ci)},useDebugValue:cu,useDeferredValue:function(t,i){var l=Ot();return _t===null?fu(l,t,i):Ad(l,_t.memoizedState,t,i)},useTransition:function(){var t=su(Ci)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:ss(t),i]},useSyncExternalStore:ed,useId:wd,useHostTransitionStatus:pu,useFormState:yd,useActionState:yd,useOptimistic:function(t,i){var l=Ot();return _t!==null?sd(l,_t,t,i):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:ou,useCacheRefresh:Id};Ld.useEffectEvent=vd;function mu(t,i,l,a){i=t.memoizedState,l=l(a,i),l=l==null?i:x({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var gu={enqueueSetState:function(t,i,l){t=t._reactInternals;var a=Fn(),h=ji(a);h.payload=i,l!=null&&(h.callback=l),i=eo(t,h,a),i!==null&&(An(i,t,a),ns(i,t,a))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var a=Fn(),h=ji(a);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=eo(t,h,a),i!==null&&(An(i,t,a),ns(i,t,a))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=Fn(),a=ji(l);a.tag=2,i!=null&&(a.callback=i),i=eo(t,a,l),i!==null&&(An(i,t,l),ns(i,t,l))}};function Pd(t,i,l,a,h,g,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,g,E):i.prototype&&i.prototype.isPureReactComponent?!Kl(l,a)||!Kl(h,g):!0}function kd(t,i,l,a){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,a),i.state!==t&&gu.enqueueReplaceState(i,i.state,null)}function Ho(t,i){var l=i;if("ref"in i){l={};for(var a in i)a!=="ref"&&(l[a]=i[a])}if(t=t.defaultProps){l===i&&(l=x({},l));for(var h in t)l[h]===void 0&&(l[h]=t[h])}return l}function zd(t){Xs(t)}function Hd(t){console.error(t)}function Gd(t){Xs(t)}function ma(t,i){try{var l=t.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function qd(t,i,l){try{var a=t.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function vu(t,i,l){return l=ji(l),l.tag=3,l.payload={element:null},l.callback=function(){ma(t,i)},l}function Vd(t){return t=ji(t),t.tag=3,t}function Bd(t,i,l,a){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=a.value;t.payload=function(){return h(g)},t.callback=function(){qd(i,l,a)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){qd(i,l,a),typeof h!="function"&&(so===null?so=new Set([this]):so.add(this));var A=a.stack;this.componentDidCatch(a.value,{componentStack:A!==null?A:""})})}function R0(t,i,l,a,h){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=l.alternate,i!==null&&sl(i,l,h,!0),l=In.current,l!==null){switch(l.tag){case 31:case 13:return qn===null?Na():l.alternate===null&&kt===0&&(kt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,a===ia?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([a]):i.add(a),Bu(t,a,h)),!1;case 22:return l.flags|=65536,a===ia?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([a]):l.add(a)),Bu(t,a,h)),!1}throw Error(s(435,l.tag))}return Bu(t,a,h),Na(),!1}if(ft)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,a!==kr&&(t=Error(s(422),{cause:a}),Zl(kn(t,l)))):(a!==kr&&(i=Error(s(423),{cause:a}),Zl(kn(i,l))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,a=kn(a,l),h=vu(t.stateNode,a,h),Kr(t,h),kt!==4&&(kt=2)),!1;var g=Error(s(520),{cause:a});if(g=kn(g,l),ms===null?ms=[g]:ms.push(g),kt!==4&&(kt=2),i===null)return!0;a=kn(a,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,t=h&-h,l.lanes|=t,t=vu(l.stateNode,a,t),Kr(l,t),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(so===null||!so.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Vd(h),Bd(h,t,l,a),Kr(l,h),!1}l=l.return}while(l!==null);return!1}var xu=Error(s(461)),$t=!1;function an(t,i,l,a){i.child=t===null?Xf(i,null,l,a):ko(i,t.child,l,a)}function Od(t,i,l,a,h){l=l.render;var g=i.ref;if("ref"in a){var E={};for(var A in a)A!=="ref"&&(E[A]=a[A])}else E=a;return Uo(i),a=eu(t,i,l,E,g,h),A=tu(),t!==null&&!$t?(nu(t,i,h),_i(t,i,h)):(ft&&A&&Lr(i),i.flags|=1,an(t,i,a,h),i.child)}function Yd(t,i,l,a,h){if(t===null){var g=l.type;return typeof g=="function"&&!br(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,Jd(t,i,g,a,h)):(t=Zs(l.type,null,a,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(g=t.child,!Ru(t,h)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:Kl,l(E,a)&&t.ref===i.ref)return _i(t,i,h)}return i.flags|=1,t=vi(g,a),t.ref=i.ref,t.return=i,i.child=t}function Jd(t,i,l,a,h){if(t!==null){var g=t.memoizedProps;if(Kl(g,a)&&t.ref===i.ref)if($t=!1,i.pendingProps=a=g,Ru(t,h))(t.flags&131072)!==0&&($t=!0);else return i.lanes=t.lanes,_i(t,i,h)}return Su(t,i,l,a,h)}function Xd(t,i,l,a){var h=a.children,g=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(a=i.child=t.child,h=0;a!==null;)h=h|a.lanes|a.childLanes,a=a.sibling;a=h&~g}else a=0,i.child=null;return Kd(t,i,g,l,a)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ta(i,g!==null?g.cachePool:null),g!==null?Qf(i,g):Qr(),Zf(i);else return a=i.lanes=536870912,Kd(t,i,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(ta(i,g.cachePool),Qf(i,g),no(),i.memoizedState=null):(t!==null&&ta(i,null),Qr(),no());return an(t,i,h,l),i.child}function us(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Kd(t,i,l,a,h){var g=Or();return g=g===null?null:{parent:Xt._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},t!==null&&ta(i,null),Qr(),Zf(i),t!==null&&sl(t,i,a,!0),i.childLanes=h,null}function ga(t,i){return i=xa({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function $d(t,i,l){return ko(i,t.child,null,l),t=ga(i,i.pendingProps),t.flags|=2,Dn(i),i.memoizedState=null,t}function N0(t,i,l){var a=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(ft){if(a.mode==="hidden")return t=ga(i,a),i.lanes=536870912,us(null,t);if(Wr(i),(t=It)?(t=ah(t,Gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:ai,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},l=bf(t),l.return=i,i.child=l,ln=i,It=null)):t=null,t===null)throw Qi(i);return i.lanes=536870912,null}return ga(i,a)}var g=t.memoizedState;if(g!==null){var E=g.dehydrated;if(Wr(i),h)if(i.flags&256)i.flags&=-257,i=$d(t,i,l);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if($t||sl(t,i,l,!1),h=(l&t.childLanes)!==0,$t||h){if(a=Rt,a!==null&&(E=gi(a,l),E!==0&&E!==g.retryLane))throw g.retryLane=E,wo(t,E),An(a,t,E),xu;Na(),i=$d(t,i,l)}else t=g.treeContext,It=Vn(E.nextSibling),ln=i,ft=!0,$i=null,Gn=!1,t!==null&&Lf(i,t),i=ga(i,a),i.flags|=4096;return i}return t=vi(t.child,{mode:a.mode,children:a.children}),t.ref=i.ref,i.child=t,t.return=i,t}function va(t,i){var l=i.ref;if(l===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(i.flags|=4194816)}}function Su(t,i,l,a,h){return Uo(i),l=eu(t,i,l,a,void 0,h),a=tu(),t!==null&&!$t?(nu(t,i,h),_i(t,i,h)):(ft&&a&&Lr(i),i.flags|=1,an(t,i,l,h),i.child)}function Qd(t,i,l,a,h,g){return Uo(i),i.updateQueue=null,l=jf(i,a,l,h),Wf(t),a=tu(),t!==null&&!$t?(nu(t,i,g),_i(t,i,g)):(ft&&a&&Lr(i),i.flags|=1,an(t,i,l,g),i.child)}function Zd(t,i,l,a,h){if(Uo(i),i.stateNode===null){var g=nl,E=l.contextType;typeof E=="object"&&E!==null&&(g=sn(E)),g=new l(a,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=gu,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=a,g.state=i.memoizedState,g.refs={},Jr(i),E=l.contextType,g.context=typeof E=="object"&&E!==null?sn(E):nl,g.state=i.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(mu(i,l,E,a),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&gu.enqueueReplaceState(g,g.state,null),os(i,a,g,h),is(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(t===null){g=i.stateNode;var A=i.memoizedProps,D=Ho(l,A);g.props=D;var X=g.context,oe=l.contextType;E=nl,typeof oe=="object"&&oe!==null&&(E=sn(oe));var ue=l.getDerivedStateFromProps;oe=typeof ue=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||X!==E)&&kd(i,g,a,E),Wi=!1;var $=i.memoizedState;g.state=$,os(i,a,g,h),is(),X=i.memoizedState,A||$!==X||Wi?(typeof ue=="function"&&(mu(i,l,ue,a),X=i.memoizedState),(D=Wi||Pd(i,l,D,a,$,X,E))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=X),g.props=a,g.state=X,g.context=E,a=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{g=i.stateNode,Xr(t,i),E=i.memoizedProps,oe=Ho(l,E),g.props=oe,ue=i.pendingProps,$=g.context,X=l.contextType,D=nl,typeof X=="object"&&X!==null&&(D=sn(X)),A=l.getDerivedStateFromProps,(X=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ue||$!==D)&&kd(i,g,a,D),Wi=!1,$=i.memoizedState,g.state=$,os(i,a,g,h),is();var te=i.memoizedState;E!==ue||$!==te||Wi||t!==null&&t.dependencies!==null&&js(t.dependencies)?(typeof A=="function"&&(mu(i,l,A,a),te=i.memoizedState),(oe=Wi||Pd(i,l,oe,a,$,te,D)||t!==null&&t.dependencies!==null&&js(t.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,te,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,te,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=te),g.props=a,g.state=te,g.context=D,a=oe):(typeof g.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),a=!1)}return g=a,va(t,i),a=(i.flags&128)!==0,g||a?(g=i.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,t!==null&&a?(i.child=ko(i,t.child,null,h),i.child=ko(i,null,l,h)):an(t,i,l,h),i.memoizedState=g.state,t=i.child):t=_i(t,i,h),t}function Wd(t,i,l,a){return Do(),i.flags|=256,an(t,i,l,a),i.child}var Eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tu(t){return{baseLanes:t,cachePool:qf()}}function Cu(t,i,l){return t=t!==null?t.childLanes&~l:0,i&&(t|=Un),t}function jd(t,i,l){var a=i.pendingProps,h=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),E&&(h=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(ft){if(h?to(i):no(),(t=It)?(t=ah(t,Gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:ai,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},l=bf(t),l.return=i,i.child=l,ln=i,It=null)):t=null,t===null)throw Qi(i);return lc(t)?i.lanes=32:i.lanes=536870912,null}var A=a.children;return a=a.fallback,h?(no(),h=i.mode,A=xa({mode:"hidden",children:A},h),a=Io(a,h,l,null),A.return=i,a.return=i,A.sibling=a,i.child=A,a=i.child,a.memoizedState=Tu(l),a.childLanes=Cu(t,E,l),i.memoizedState=Eu,us(null,a)):(to(i),_u(i,A))}var D=t.memoizedState;if(D!==null&&(A=D.dehydrated,A!==null)){if(g)i.flags&256?(to(i),i.flags&=-257,i=Au(t,i,l)):i.memoizedState!==null?(no(),i.child=t.child,i.flags|=128,i=null):(no(),A=a.fallback,h=i.mode,a=xa({mode:"visible",children:a.children},h),A=Io(A,h,l,null),A.flags|=2,a.return=i,A.return=i,a.sibling=A,i.child=a,ko(i,t.child,null,l),a=i.child,a.memoizedState=Tu(l),a.childLanes=Cu(t,E,l),i.memoizedState=Eu,i=us(null,a));else if(to(i),lc(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var X=E.dgst;E=X,a=Error(s(419)),a.stack="",a.digest=E,Zl({value:a,source:null,stack:null}),i=Au(t,i,l)}else if($t||sl(t,i,l,!1),E=(l&t.childLanes)!==0,$t||E){if(E=Rt,E!==null&&(a=gi(E,l),a!==0&&a!==D.retryLane))throw D.retryLane=a,wo(t,a),An(E,t,a),xu;oc(A)||Na(),i=Au(t,i,l)}else oc(A)?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,It=Vn(A.nextSibling),ln=i,ft=!0,$i=null,Gn=!1,t!==null&&Lf(i,t),i=_u(i,a.children),i.flags|=4096);return i}return h?(no(),A=a.fallback,h=i.mode,D=t.child,X=D.sibling,a=vi(D,{mode:"hidden",children:a.children}),a.subtreeFlags=D.subtreeFlags&65011712,X!==null?A=vi(X,A):(A=Io(A,h,l,null),A.flags|=2),A.return=i,a.return=i,a.sibling=A,i.child=a,us(null,a),a=i.child,A=t.child.memoizedState,A===null?A=Tu(l):(h=A.cachePool,h!==null?(D=Xt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=qf(),A={baseLanes:A.baseLanes|l,cachePool:h}),a.memoizedState=A,a.childLanes=Cu(t,E,l),i.memoizedState=Eu,us(t.child,a)):(to(i),l=t.child,t=l.sibling,l=vi(l,{mode:"visible",children:a.children}),l.return=i,l.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=l,i.memoizedState=null,l)}function _u(t,i){return i=xa({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function xa(t,i){return t=wn(22,t,null,i),t.lanes=0,t}function Au(t,i,l){return ko(i,t.child,null,l),t=_u(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ep(t,i,l){t.lanes|=i;var a=t.alternate;a!==null&&(a.lanes|=i),Gr(t.return,i,l)}function Mu(t,i,l,a,h,g){var E=t.memoizedState;E===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:h,treeForkCount:g}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=a,E.tail=l,E.tailMode=h,E.treeForkCount=g)}function tp(t,i,l){var a=i.pendingProps,h=a.revealOrder,g=a.tail;a=a.children;var E=Bt.current,A=(E&2)!==0;if(A?(E=E&1|2,i.flags|=128):E&=1,J(Bt,E),an(t,i,a,l),a=ft?Ql:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ep(t,l,i);else if(t.tag===19)ep(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(l=i.child,h=null;l!==null;)t=l.alternate,t!==null&&aa(t)===null&&(h=l),l=l.sibling;l=h,l===null?(h=i.child,i.child=null):(h=l.sibling,l.sibling=null),Mu(i,!1,h,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&aa(t)===null){i.child=h;break}t=h.sibling,h.sibling=l,l=h,h=t}Mu(i,!0,l,null,g,a);break;case"together":Mu(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function _i(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),lo|=i.lanes,(l&i.childLanes)===0)if(t!==null){if(sl(t,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,l=vi(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=vi(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function Ru(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&js(t)))}function w0(t,i,l){switch(i.tag){case 3:Ye(i,i.stateNode.containerInfo),Zi(i,Xt,t.memoizedState.cache),Do();break;case 27:case 5:Nt(i);break;case 4:Ye(i,i.stateNode.containerInfo);break;case 10:Zi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Wr(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(to(i),i.flags|=128,null):(l&i.child.childLanes)!==0?jd(t,i,l):(to(i),t=_i(t,i,l),t!==null?t.sibling:null);to(i);break;case 19:var h=(t.flags&128)!==0;if(a=(l&i.childLanes)!==0,a||(sl(t,i,l,!1),a=(l&i.childLanes)!==0),h){if(a)return tp(t,i,l);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Bt,Bt.current),a)break;return null;case 22:return i.lanes=0,Xd(t,i,l,i.pendingProps);case 24:Zi(i,Xt,t.memoizedState.cache)}return _i(t,i,l)}function np(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps)$t=!0;else{if(!Ru(t,l)&&(i.flags&128)===0)return $t=!1,w0(t,i,l);$t=(t.flags&131072)!==0}else $t=!1,ft&&(i.flags&1048576)!==0&&Ff(i,Ql,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(t=Lo(i.elementType),i.type=t,typeof t=="function")br(t)?(a=Ho(t,a),i.tag=1,i=Zd(null,i,t,a,l)):(i.tag=0,i=Su(null,i,t,a,l));else{if(t!=null){var h=t.$$typeof;if(h===he){i.tag=11,i=Od(null,i,t,a,l);break e}else if(h===ve){i.tag=14,i=Yd(null,i,t,a,l);break e}}throw i=ht(t)||t,Error(s(306,i,""))}}return i;case 0:return Su(t,i,i.type,i.pendingProps,l);case 1:return a=i.type,h=Ho(a,i.pendingProps),Zd(t,i,a,h,l);case 3:e:{if(Ye(i,i.stateNode.containerInfo),t===null)throw Error(s(387));a=i.pendingProps;var g=i.memoizedState;h=g.element,Xr(t,i),os(i,a,null,l);var E=i.memoizedState;if(a=E.cache,Zi(i,Xt,a),a!==g.cache&&qr(i,[Xt],l,!0),is(),a=E.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Wd(t,i,a,l);break e}else if(a!==h){h=kn(Error(s(424)),i),Zl(h),i=Wd(t,i,a,l);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(It=Vn(t.firstChild),ln=i,ft=!0,$i=null,Gn=!0,l=Xf(i,null,a,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Do(),a===h){i=_i(t,i,l);break e}an(t,i,a,l)}i=i.child}return i;case 26:return va(t,i),t===null?(l=ph(i.type,null,i.pendingProps,null))?i.memoizedState=l:ft||(l=i.type,t=i.pendingProps,a=La(Xe.current).createElement(l),a[Lt]=i,a[Jt]=t,rn(a,l,t),qt(a),i.stateNode=a):i.memoizedState=ph(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Nt(i),t===null&&ft&&(a=i.stateNode=ch(i.type,i.pendingProps,Xe.current),ln=i,Gn=!0,h=It,co(i.type)?(sc=h,It=Vn(a.firstChild)):It=h),an(t,i,i.pendingProps.children,l),va(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ft&&((h=a=It)&&(a=lv(a,i.type,i.pendingProps,Gn),a!==null?(i.stateNode=a,ln=i,It=Vn(a.firstChild),Gn=!1,h=!0):h=!1),h||Qi(i)),Nt(i),h=i.type,g=i.pendingProps,E=t!==null?t.memoizedProps:null,a=g.children,tc(h,g)?a=null:E!==null&&tc(h,E)&&(i.flags|=32),i.memoizedState!==null&&(h=eu(t,i,S0,null,null,l),_s._currentValue=h),va(t,i),an(t,i,a,l),i.child;case 6:return t===null&&ft&&((t=l=It)&&(l=sv(l,i.pendingProps,Gn),l!==null?(i.stateNode=l,ln=i,It=null,t=!0):t=!1),t||Qi(i)),null;case 13:return jd(t,i,l);case 4:return Ye(i,i.stateNode.containerInfo),a=i.pendingProps,t===null?i.child=ko(i,null,a,l):an(t,i,a,l),i.child;case 11:return Od(t,i,i.type,i.pendingProps,l);case 7:return an(t,i,i.pendingProps,l),i.child;case 8:return an(t,i,i.pendingProps.children,l),i.child;case 12:return an(t,i,i.pendingProps.children,l),i.child;case 10:return a=i.pendingProps,Zi(i,i.type,a.value),an(t,i,a.children,l),i.child;case 9:return h=i.type._context,a=i.pendingProps.children,Uo(i),h=sn(h),a=a(h),i.flags|=1,an(t,i,a,l),i.child;case 14:return Yd(t,i,i.type,i.pendingProps,l);case 15:return Jd(t,i,i.type,i.pendingProps,l);case 19:return tp(t,i,l);case 31:return N0(t,i,l);case 22:return Xd(t,i,l,i.pendingProps);case 24:return Uo(i),a=sn(Xt),t===null?(h=Or(),h===null&&(h=Rt,g=Vr(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),i.memoizedState={parent:a,cache:h},Jr(i),Zi(i,Xt,h)):((t.lanes&l)!==0&&(Xr(t,i),os(i,null,null,l),is()),h=t.memoizedState,g=i.memoizedState,h.parent!==a?(h={parent:a,cache:a},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Zi(i,Xt,a)):(a=g.cache,Zi(i,Xt,a),a!==h.cache&&qr(i,[Xt],l,!0))),an(t,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ai(t){t.flags|=4}function Nu(t,i,l,a,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(wp())t.flags|=8192;else throw Po=ia,Yr}else t.flags&=-16777217}function ip(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!vh(i))if(wp())t.flags|=8192;else throw Po=ia,Yr}function Sa(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Se():536870912,t.lanes|=i,vl|=i)}function cs(t,i){if(!ft)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Dt(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,a=0;if(i)for(var h=t.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags&65011712,a|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=a,t.childLanes=l,i}function I0(t,i,l){var a=i.pendingProps;switch(Pr(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(i),null;case 1:return Dt(i),null;case 3:return l=i.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ei(Xt),Ct(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ll(i)?Ai(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zr())),Dt(i),null;case 26:var h=i.type,g=i.memoizedState;return t===null?(Ai(i),g!==null?(Dt(i),ip(i,g)):(Dt(i),Nu(i,h,null,a,l))):g?g!==t.memoizedState?(Ai(i),Dt(i),ip(i,g)):(Dt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==a&&Ai(i),Dt(i),Nu(i,h,t,a,l)),null;case 27:if(oi(i),l=Xe.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ai(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return Dt(i),null}t=Re.current,ll(i)?Pf(i):(t=ch(h,a,l),i.stateNode=t,Ai(i))}return Dt(i),null;case 5:if(oi(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ai(i);else{if(!a){if(i.stateNode===null)throw Error(s(166));return Dt(i),null}if(g=Re.current,ll(i))Pf(i);else{var E=La(Xe.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?E.createElement("select",{is:a.is}):E.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?E.createElement(h,{is:a.is}):E.createElement(h)}}g[Lt]=i,g[Jt]=a;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=g;e:switch(rn(g,h,a),h){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ai(i)}}return Dt(i),Nu(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,l),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==a&&Ai(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(s(166));if(t=Xe.current,ll(i)){if(t=i.stateNode,l=i.memoizedProps,a=null,h=ln,h!==null)switch(h.tag){case 27:case 5:a=h.memoizedProps}t[Lt]=i,t=!!(t.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||jp(t.nodeValue,l)),t||Qi(i,!0)}else t=La(t).createTextNode(a),t[Lt]=i,i.stateNode=t}return Dt(i),null;case 31:if(l=i.memoizedState,t===null||t.memoizedState!==null){if(a=ll(i),l!==null){if(t===null){if(!a)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Lt]=i}else Do(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Dt(i),t=!1}else l=zr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return i.flags&256?(Dn(i),i):(Dn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Dt(i),null;case 13:if(a=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=ll(i),a!==null&&a.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Lt]=i}else Do(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Dt(i),h=!1}else h=zr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Dn(i),i):(Dn(i),null)}return Dn(i),(i.flags&128)!==0?(i.lanes=l,i):(l=a!==null,t=t!==null&&t.memoizedState!==null,l&&(a=i.child,h=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(h=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==h&&(a.flags|=2048)),l!==t&&l&&(i.child.flags|=8192),Sa(i,i.updateQueue),Dt(i),null);case 4:return Ct(),t===null&&Qu(i.stateNode.containerInfo),Dt(i),null;case 10:return Ei(i.type),Dt(i),null;case 19:if(T(Bt),a=i.memoizedState,a===null)return Dt(i),null;if(h=(i.flags&128)!==0,g=a.rendering,g===null)if(h)cs(a,!1);else{if(kt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(g=aa(t),g!==null){for(i.flags|=128,cs(a,!1),t=g.updateQueue,i.updateQueue=t,Sa(i,t),i.subtreeFlags=0,t=l,l=i.child;l!==null;)Df(l,t),l=l.sibling;return J(Bt,Bt.current&1|2),ft&&xi(i,a.treeForkCount),i.child}t=t.sibling}a.tail!==null&&tn()>Aa&&(i.flags|=128,h=!0,cs(a,!1),i.lanes=4194304)}else{if(!h)if(t=aa(g),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Sa(i,t),cs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!ft)return Dt(i),null}else 2*tn()-a.renderingStartTime>Aa&&l!==536870912&&(i.flags|=128,h=!0,cs(a,!1),i.lanes=4194304);a.isBackwards?(g.sibling=i.child,i.child=g):(t=a.last,t!==null?t.sibling=g:i.child=g,a.last=g)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=tn(),t.sibling=null,l=Bt.current,J(Bt,h?l&1|2:l&1),ft&&xi(i,a.treeForkCount),t):(Dt(i),null);case 22:case 23:return Dn(i),Zr(),a=i.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(l&536870912)!==0&&(i.flags&128)===0&&(Dt(i),i.subtreeFlags&6&&(i.flags|=8192)):Dt(i),l=i.updateQueue,l!==null&&Sa(i,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(i.flags|=2048),t!==null&&T(Fo),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ei(Xt),Dt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function D0(t,i){switch(Pr(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ei(Xt),Ct(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return oi(i),null;case 31:if(i.memoizedState!==null){if(Dn(i),i.alternate===null)throw Error(s(340));Do()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Dn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Do()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return T(Bt),null;case 4:return Ct(),null;case 10:return Ei(i.type),null;case 22:case 23:return Dn(i),Zr(),t!==null&&T(Fo),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ei(Xt),null;case 25:return null;default:return null}}function op(t,i){switch(Pr(i),i.tag){case 3:Ei(Xt),Ct();break;case 26:case 27:case 5:oi(i);break;case 4:Ct();break;case 31:i.memoizedState!==null&&Dn(i);break;case 13:Dn(i);break;case 19:T(Bt);break;case 10:Ei(i.type);break;case 22:case 23:Dn(i),Zr(),t!==null&&T(Fo);break;case 24:Ei(Xt)}}function fs(t,i){try{var l=i.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var h=a.next;l=h;do{if((l.tag&t)===t){a=void 0;var g=l.create,E=l.inst;a=g(),E.destroy=a}l=l.next}while(l!==h)}}catch(A){Tt(i,i.return,A)}}function io(t,i,l){try{var a=i.updateQueue,h=a!==null?a.lastEffect:null;if(h!==null){var g=h.next;a=g;do{if((a.tag&t)===t){var E=a.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,h=i;var D=l,X=A;try{X()}catch(oe){Tt(h,D,oe)}}}a=a.next}while(a!==g)}}catch(oe){Tt(i,i.return,oe)}}function lp(t){var i=t.updateQueue;if(i!==null){var l=t.stateNode;try{$f(i,l)}catch(a){Tt(t,t.return,a)}}}function sp(t,i,l){l.props=Ho(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(a){Tt(t,i,a)}}function ds(t,i){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof l=="function"?t.refCleanup=l(a):l.current=a}}catch(h){Tt(t,i,h)}}function ui(t,i){var l=t.ref,a=t.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(h){Tt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){Tt(t,i,h)}else l.current=null}function ap(t){var i=t.type,l=t.memoizedProps,a=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(h){Tt(t,t.return,h)}}function wu(t,i,l){try{var a=t.stateNode;j0(a,t.type,l,i),a[Jt]=i}catch(h){Tt(t,t.return,h)}}function rp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&co(t.type)||t.tag===4}function Iu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&co(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Du(t,i,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(t),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Ee));else if(a!==4&&(a===27&&co(t.type)&&(l=t.stateNode,i=null),t=t.child,t!==null))for(Du(t,i,l),t=t.sibling;t!==null;)Du(t,i,l),t=t.sibling}function Ea(t,i,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(a!==4&&(a===27&&co(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Ea(t,i,l),t=t.sibling;t!==null;)Ea(t,i,l),t=t.sibling}function up(t){var i=t.stateNode,l=t.memoizedProps;try{for(var a=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);rn(i,a,l),i[Lt]=t,i[Jt]=l}catch(g){Tt(t,t.return,g)}}var Mi=!1,Qt=!1,bu=!1,cp=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function b0(t,i){if(t=t.containerInfo,ju=Va,t=Tf(t),Ar(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var h=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,A=-1,D=-1,X=0,oe=0,ue=t,$=null;t:for(;;){for(var te;ue!==l||h!==0&&ue.nodeType!==3||(A=E+h),ue!==g||a!==0&&ue.nodeType!==3||(D=E+a),ue.nodeType===3&&(E+=ue.nodeValue.length),(te=ue.firstChild)!==null;)$=ue,ue=te;for(;;){if(ue===t)break t;if($===l&&++X===h&&(A=E),$===g&&++oe===a&&(D=E),(te=ue.nextSibling)!==null)break;ue=$,$=ue.parentNode}ue=te}l=A===-1||D===-1?null:{start:A,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(ec={focusedElem:t,selectionRange:l},Va=!1,Wt=i;Wt!==null;)if(i=Wt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Wt=t;else for(;Wt!==null;){switch(i=Wt,g=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)h=t[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=i,h=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var be=Ho(l.type,h);t=a.getSnapshotBeforeUpdate(be,g),a.__reactInternalSnapshotBeforeUpdate=t}catch(Be){Tt(l,l.return,Be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,l=t.nodeType,l===9)ic(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ic(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Wt=t;break}Wt=i.return}}function fp(t,i,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Ni(t,l),a&4&&fs(5,l);break;case 1:if(Ni(t,l),a&4)if(t=l.stateNode,i===null)try{t.componentDidMount()}catch(E){Tt(l,l.return,E)}else{var h=Ho(l.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){Tt(l,l.return,E)}}a&64&&lp(l),a&512&&ds(l,l.return);break;case 3:if(Ni(t,l),a&64&&(t=l.updateQueue,t!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{$f(t,i)}catch(E){Tt(l,l.return,E)}}break;case 27:i===null&&a&4&&up(l);case 26:case 5:Ni(t,l),i===null&&a&4&&ap(l),a&512&&ds(l,l.return);break;case 12:Ni(t,l);break;case 31:Ni(t,l),a&4&&hp(t,l);break;case 13:Ni(t,l),a&4&&yp(t,l),a&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=q0.bind(null,l),av(t,l))));break;case 22:if(a=l.memoizedState!==null||Mi,!a){i=i!==null&&i.memoizedState!==null||Qt,h=Mi;var g=Qt;Mi=a,(Qt=i)&&!g?wi(t,l,(l.subtreeFlags&8772)!==0):Ni(t,l),Mi=h,Qt=g}break;case 30:break;default:Ni(t,l)}}function dp(t){var i=t.alternate;i!==null&&(t.alternate=null,dp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ql(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var bt=null,En=!1;function Ri(t,i,l){for(l=l.child;l!==null;)pp(t,i,l),l=l.sibling}function pp(t,i,l){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(li,l)}catch{}switch(l.tag){case 26:Qt||ui(l,i),Ri(t,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Qt||ui(l,i);var a=bt,h=En;co(l.type)&&(bt=l.stateNode,En=!1),Ri(t,i,l),Es(l.stateNode),bt=a,En=h;break;case 5:Qt||ui(l,i);case 6:if(a=bt,h=En,bt=null,Ri(t,i,l),bt=a,En=h,bt!==null)if(En)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(l.stateNode)}catch(g){Tt(l,i,g)}else try{bt.removeChild(l.stateNode)}catch(g){Tt(l,i,g)}break;case 18:bt!==null&&(En?(t=bt,lh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Ml(t)):lh(bt,l.stateNode));break;case 4:a=bt,h=En,bt=l.stateNode.containerInfo,En=!0,Ri(t,i,l),bt=a,En=h;break;case 0:case 11:case 14:case 15:io(2,l,i),Qt||io(4,l,i),Ri(t,i,l);break;case 1:Qt||(ui(l,i),a=l.stateNode,typeof a.componentWillUnmount=="function"&&sp(l,i,a)),Ri(t,i,l);break;case 21:Ri(t,i,l);break;case 22:Qt=(a=Qt)||l.memoizedState!==null,Ri(t,i,l),Qt=a;break;default:Ri(t,i,l)}}function hp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ml(t)}catch(l){Tt(i,i.return,l)}}}function yp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(l){Tt(i,i.return,l)}}function U0(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new cp),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new cp),i;default:throw Error(s(435,t.tag))}}function Ta(t,i){var l=U0(t);i.forEach(function(a){if(!l.has(a)){l.add(a);var h=V0.bind(null,t,a);a.then(h,h)}})}function Tn(t,i){var l=i.deletions;if(l!==null)for(var a=0;a<l.length;a++){var h=l[a],g=t,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(co(A.type)){bt=A.stateNode,En=!1;break e}break;case 5:bt=A.stateNode,En=!1;break e;case 3:case 4:bt=A.stateNode.containerInfo,En=!0;break e}A=A.return}if(bt===null)throw Error(s(160));pp(g,E,h),bt=null,En=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)mp(i,t),i=i.sibling}var jn=null;function mp(t,i){var l=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(i,t),Cn(t),a&4&&(io(3,t,t.return),fs(3,t),io(5,t,t.return));break;case 1:Tn(i,t),Cn(t),a&512&&(Qt||l===null||ui(l,l.return)),a&64&&Mi&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var h=jn;if(Tn(i,t),Cn(t),a&512&&(Qt||l===null||ui(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=t.memoizedState,l===null)if(a===null)if(t.stateNode===null){e:{a=t.type,l=t.memoizedProps,h=h.ownerDocument||h;t:switch(a){case"title":g=h.getElementsByTagName("title")[0],(!g||g[si]||g[Lt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(a),h.head.insertBefore(g,h.querySelector("head > title"))),rn(g,a,l),g[Lt]=t,qt(g),a=g;break e;case"link":var E=mh("link","href",h).get(a+(l.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(A,1);break t}}g=h.createElement(a),rn(g,a,l),h.head.appendChild(g);break;case"meta":if(E=mh("meta","content",h).get(a+(l.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(A,1);break t}}g=h.createElement(a),rn(g,a,l),h.head.appendChild(g);break;default:throw Error(s(468,a))}g[Lt]=t,qt(g),a=g}t.stateNode=a}else gh(h,t.type,t.stateNode);else t.stateNode=yh(h,a,t.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?gh(h,t.type,t.stateNode):yh(h,a,t.memoizedProps)):a===null&&t.stateNode!==null&&wu(t,t.memoizedProps,l.memoizedProps)}break;case 27:Tn(i,t),Cn(t),a&512&&(Qt||l===null||ui(l,l.return)),l!==null&&a&4&&wu(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Tn(i,t),Cn(t),a&512&&(Qt||l===null||ui(l,l.return)),t.flags&32){h=t.stateNode;try{O(h,"")}catch(be){Tt(t,t.return,be)}}a&4&&t.stateNode!=null&&(h=t.memoizedProps,wu(t,h,l!==null?l.memoizedProps:h)),a&1024&&(bu=!0);break;case 6:if(Tn(i,t),Cn(t),a&4){if(t.stateNode===null)throw Error(s(162));a=t.memoizedProps,l=t.stateNode;try{l.nodeValue=a}catch(be){Tt(t,t.return,be)}}break;case 3:if(za=null,h=jn,jn=Pa(i.containerInfo),Tn(i,t),jn=h,Cn(t),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Ml(i.containerInfo)}catch(be){Tt(t,t.return,be)}bu&&(bu=!1,gp(t));break;case 4:a=jn,jn=Pa(t.stateNode.containerInfo),Tn(i,t),Cn(t),jn=a;break;case 12:Tn(i,t),Cn(t);break;case 31:Tn(i,t),Cn(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Ta(t,a)));break;case 13:Tn(i,t),Cn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_a=tn()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Ta(t,a)));break;case 22:h=t.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,X=Mi,oe=Qt;if(Mi=X||h,Qt=oe||D,Tn(i,t),Qt=oe,Mi=X,Cn(t),a&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(l===null||D||Mi||Qt||Go(t)),l=null,i=t;;){if(i.tag===5||i.tag===26){if(l===null){D=l=i;try{if(g=D.stateNode,h)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=D.stateNode;var ue=D.memoizedProps.style,$=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;A.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(be){Tt(D,D.return,be)}}}else if(i.tag===6){if(l===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(be){Tt(D,D.return,be)}}}else if(i.tag===18){if(l===null){D=i;try{var te=D.stateNode;h?sh(te,!0):sh(D.stateNode,!1)}catch(be){Tt(D,D.return,be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=t.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Ta(t,l))));break;case 19:Tn(i,t),Cn(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Ta(t,a)));break;case 30:break;case 21:break;default:Tn(i,t),Cn(t)}}function Cn(t){var i=t.flags;if(i&2){try{for(var l,a=t.return;a!==null;){if(rp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var h=l.stateNode,g=Iu(t);Ea(t,g,h);break;case 5:var E=l.stateNode;l.flags&32&&(O(E,""),l.flags&=-33);var A=Iu(t);Ea(t,A,E);break;case 3:case 4:var D=l.stateNode.containerInfo,X=Iu(t);Du(t,X,D);break;default:throw Error(s(161))}}catch(oe){Tt(t,t.return,oe)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function gp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;gp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Ni(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)fp(t,i.alternate,i),i=i.sibling}function Go(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:io(4,i,i.return),Go(i);break;case 1:ui(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&sp(i,i.return,l),Go(i);break;case 27:Es(i.stateNode);case 26:case 5:ui(i,i.return),Go(i);break;case 22:i.memoizedState===null&&Go(i);break;case 30:Go(i);break;default:Go(i)}t=t.sibling}}function wi(t,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,h=t,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:wi(h,g,l),fs(4,g);break;case 1:if(wi(h,g,l),a=g,h=a.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){Tt(a,a.return,X)}if(a=g,h=a.updateQueue,h!==null){var A=a.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Kf(D[h],A)}catch(X){Tt(a,a.return,X)}}l&&E&64&&lp(g),ds(g,g.return);break;case 27:up(g);case 26:case 5:wi(h,g,l),l&&a===null&&E&4&&ap(g),ds(g,g.return);break;case 12:wi(h,g,l);break;case 31:wi(h,g,l),l&&E&4&&hp(h,g);break;case 13:wi(h,g,l),l&&E&4&&yp(h,g);break;case 22:g.memoizedState===null&&wi(h,g,l),ds(g,g.return);break;case 30:break;default:wi(h,g,l)}i=i.sibling}}function Uu(t,i){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Wl(l))}function Fu(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wl(t))}function ei(t,i,l,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vp(t,i,l,a),i=i.sibling}function vp(t,i,l,a){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ei(t,i,l,a),h&2048&&fs(9,i);break;case 1:ei(t,i,l,a);break;case 3:ei(t,i,l,a),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wl(t)));break;case 12:if(h&2048){ei(t,i,l,a),t=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Tt(i,i.return,D)}}else ei(t,i,l,a);break;case 31:ei(t,i,l,a);break;case 13:ei(t,i,l,a);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?ei(t,i,l,a):ps(t,i):g._visibility&2?ei(t,i,l,a):(g._visibility|=2,yl(t,i,l,a,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Uu(E,i);break;case 24:ei(t,i,l,a),h&2048&&Fu(i.alternate,i);break;default:ei(t,i,l,a)}}function yl(t,i,l,a,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=t,E=i,A=l,D=a,X=E.flags;switch(E.tag){case 0:case 11:case 15:yl(g,E,A,D,h),fs(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?yl(g,E,A,D,h):ps(g,E):(oe._visibility|=2,yl(g,E,A,D,h)),h&&X&2048&&Uu(E.alternate,E);break;case 24:yl(g,E,A,D,h),h&&X&2048&&Fu(E.alternate,E);break;default:yl(g,E,A,D,h)}i=i.sibling}}function ps(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=t,a=i,h=a.flags;switch(a.tag){case 22:ps(l,a),h&2048&&Uu(a.alternate,a);break;case 24:ps(l,a),h&2048&&Fu(a.alternate,a);break;default:ps(l,a)}i=i.sibling}}var hs=8192;function ml(t,i,l){if(t.subtreeFlags&hs)for(t=t.child;t!==null;)xp(t,i,l),t=t.sibling}function xp(t,i,l){switch(t.tag){case 26:ml(t,i,l),t.flags&hs&&t.memoizedState!==null&&xv(l,jn,t.memoizedState,t.memoizedProps);break;case 5:ml(t,i,l);break;case 3:case 4:var a=jn;jn=Pa(t.stateNode.containerInfo),ml(t,i,l),jn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=hs,hs=16777216,ml(t,i,l),hs=a):ml(t,i,l));break;default:ml(t,i,l)}}function Sp(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ys(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Wt=a,Tp(a,t)}Sp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ep(t),t=t.sibling}function Ep(t){switch(t.tag){case 0:case 11:case 15:ys(t),t.flags&2048&&io(9,t,t.return);break;case 3:ys(t);break;case 12:ys(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ca(t)):ys(t);break;default:ys(t)}}function Ca(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var a=i[l];Wt=a,Tp(a,t)}Sp(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:io(8,i,i.return),Ca(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Ca(i));break;default:Ca(i)}t=t.sibling}}function Tp(t,i){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:io(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Wl(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,Wt=a;else e:for(l=t;Wt!==null;){a=Wt;var h=a.sibling,g=a.return;if(dp(a),a===l){Wt=null;break e}if(h!==null){h.return=g,Wt=h;break e}Wt=g}}}var F0={getCacheForType:function(t){var i=sn(Xt),l=i.data.get(t);return l===void 0&&(l=t(),i.data.set(t,l)),l},cacheSignal:function(){return sn(Xt).controller.signal}},L0=typeof WeakMap=="function"?WeakMap:Map,xt=0,Rt=null,lt=null,rt=0,Et=0,bn=null,oo=!1,gl=!1,Lu=!1,Ii=0,kt=0,lo=0,qo=0,Pu=0,Un=0,vl=0,ms=null,_n=null,ku=!1,_a=0,Cp=0,Aa=1/0,Ma=null,so=null,Zt=0,ao=null,xl=null,Di=0,zu=0,Hu=null,_p=null,gs=0,Gu=null;function Fn(){return(xt&2)!==0&&rt!==0?rt&-rt:j.T!==null?Ju():ot()}function Ap(){if(Un===0)if((rt&536870912)===0||ft){var t=W;W<<=1,(W&3932160)===0&&(W=262144),Un=t}else Un=536870912;return t=In.current,t!==null&&(t.flags|=32),Un}function An(t,i,l){(t===Rt&&(Et===2||Et===9)||t.cancelPendingCommit!==null)&&(Sl(t,0),ro(t,rt,Un,!1)),Ge(t,l),((xt&2)===0||t!==Rt)&&(t===Rt&&((xt&2)===0&&(qo|=l),kt===4&&ro(t,rt,Un,!1)),ci(t))}function Mp(t,i,l){if((xt&6)!==0)throw Error(s(327));var a=!l&&(i&127)===0&&(i&t.expiredLanes)===0||se(t,i),h=a?z0(t,i):Vu(t,i,!0),g=a;do{if(h===0){gl&&!a&&ro(t,i,0,!1);break}else{if(l=t.current.alternate,g&&!P0(l)){h=Vu(t,i,!1),g=!1;continue}if(h===2){if(g=i,t.errorRecoveryDisabledLanes&g)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=t;h=ms;var D=A.current.memoizedState.isDehydrated;if(D&&(Sl(A,E).flags|=256),E=Vu(A,E,!1),E!==2){if(Lu&&!D){A.errorRecoveryDisabledLanes|=g,qo|=g,h=4;break e}g=_n,_n=h,g!==null&&(_n===null?_n=g:_n.push.apply(_n,g))}h=E}if(g=!1,h!==2)continue}}if(h===1){Sl(t,0),ro(t,i,0,!0);break}e:{switch(a=t,g=h,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ro(a,i,Un,!oo);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=_a+300-tn(),10<h)){if(ro(a,i,Un,!oo),b(a,0,!0)!==0)break e;Di=i,a.timeoutHandle=ih(Rp.bind(null,a,l,_n,Ma,ku,i,Un,qo,vl,oo,g,"Throttled",-0,0),h);break e}Rp(a,l,_n,Ma,ku,i,Un,qo,vl,oo,g,null,-0,0)}}break}while(!0);ci(t)}function Rp(t,i,l,a,h,g,E,A,D,X,oe,ue,$,te){if(t.timeoutHandle=-1,ue=i.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ee},xp(i,g,ue);var be=(g&62914560)===g?_a-tn():(g&4194048)===g?Cp-tn():0;if(be=Sv(ue,be),be!==null){Di=g,t.cancelPendingCommit=be(Lp.bind(null,t,i,g,l,a,h,E,A,D,oe,ue,null,$,te)),ro(t,g,E,!X);return}}Lp(t,i,g,l,a,h,E,A,D)}function P0(t){for(var i=t;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var h=l[a],g=h.getSnapshot;h=h.value;try{if(!Nn(g(),h))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ro(t,i,l,a){i&=~Pu,i&=~qo,t.suspendedLanes|=i,t.pingedLanes&=~i,a&&(t.warmLanes|=i),a=t.expirationTimes;for(var h=i;0<h;){var g=31-zt(h),E=1<<g;a[g]=-1,h&=~E}l!==0&&dn(t,l,i)}function Ra(){return(xt&6)===0?(vs(0),!1):!0}function qu(){if(lt!==null){if(Et===0)var t=lt.return;else t=lt,Si=bo=null,iu(t),cl=null,es=0,t=lt;for(;t!==null;)op(t.alternate,t),t=t.return;lt=null}}function Sl(t,i){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,nv(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Di=0,qu(),Rt=t,lt=l=vi(t.current,null),rt=i,Et=0,bn=null,oo=!1,gl=se(t,i),Lu=!1,vl=Un=Pu=qo=lo=kt=0,_n=ms=null,ku=!1,(i&8)!==0&&(i|=i&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=i;0<a;){var h=31-zt(a),g=1<<h;i|=t[h],a&=~g}return Ii=i,Ks(),l}function Np(t,i){et=null,j.H=rs,i===ul||i===na?(i=Of(),Et=3):i===Yr?(i=Of(),Et=4):Et=i===xu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,bn=i,lt===null&&(kt=1,ma(t,kn(i,t.current)))}function wp(){var t=In.current;return t===null?!0:(rt&4194048)===rt?qn===null:(rt&62914560)===rt||(rt&536870912)!==0?t===qn:!1}function Ip(){var t=j.H;return j.H=rs,t===null?rs:t}function Dp(){var t=j.A;return j.A=F0,t}function Na(){kt=4,oo||(rt&4194048)!==rt&&In.current!==null||(gl=!0),(lo&134217727)===0&&(qo&134217727)===0||Rt===null||ro(Rt,rt,Un,!1)}function Vu(t,i,l){var a=xt;xt|=2;var h=Ip(),g=Dp();(Rt!==t||rt!==i)&&(Ma=null,Sl(t,i)),i=!1;var E=kt;e:do try{if(Et!==0&&lt!==null){var A=lt,D=bn;switch(Et){case 8:qu(),E=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var X=Et;if(Et=0,bn=null,El(t,A,D,X),l&&gl){E=0;break e}break;default:X=Et,Et=0,bn=null,El(t,A,D,X)}}k0(),E=kt;break}catch(oe){Np(t,oe)}while(!0);return i&&t.shellSuspendCounter++,Si=bo=null,xt=a,j.H=h,j.A=g,lt===null&&(Rt=null,rt=0,Ks()),E}function k0(){for(;lt!==null;)bp(lt)}function z0(t,i){var l=xt;xt|=2;var a=Ip(),h=Dp();Rt!==t||rt!==i?(Ma=null,Aa=tn()+500,Sl(t,i)):gl=se(t,i);e:do try{if(Et!==0&&lt!==null){i=lt;var g=bn;t:switch(Et){case 1:Et=0,bn=null,El(t,i,g,1);break;case 2:case 9:if(Vf(g)){Et=0,bn=null,Up(i);break}i=function(){Et!==2&&Et!==9||Rt!==t||(Et=7),ci(t)},g.then(i,i);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:Vf(g)?(Et=0,bn=null,Up(i)):(Et=0,bn=null,El(t,i,g,7));break;case 5:var E=null;switch(lt.tag){case 26:E=lt.memoizedState;case 5:case 27:var A=lt;if(E?vh(E):A.stateNode.complete){Et=0,bn=null;var D=A.sibling;if(D!==null)lt=D;else{var X=A.return;X!==null?(lt=X,wa(X)):lt=null}break t}}Et=0,bn=null,El(t,i,g,5);break;case 6:Et=0,bn=null,El(t,i,g,6);break;case 8:qu(),kt=6;break e;default:throw Error(s(462))}}H0();break}catch(oe){Np(t,oe)}while(!0);return Si=bo=null,j.H=a,j.A=h,xt=l,lt!==null?0:(Rt=null,rt=0,Ks(),kt)}function H0(){for(;lt!==null&&!So();)bp(lt)}function bp(t){var i=np(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,i===null?wa(t):lt=i}function Up(t){var i=t,l=i.alternate;switch(i.tag){case 15:case 0:i=Qd(l,i,i.pendingProps,i.type,void 0,rt);break;case 11:i=Qd(l,i,i.pendingProps,i.type.render,i.ref,rt);break;case 5:iu(i);default:op(l,i),i=lt=Df(i,Ii),i=np(l,i,Ii)}t.memoizedProps=t.pendingProps,i===null?wa(t):lt=i}function El(t,i,l,a){Si=bo=null,iu(i),cl=null,es=0;var h=i.return;try{if(R0(t,h,i,l,rt)){kt=1,ma(t,kn(l,t.current)),lt=null;return}}catch(g){if(h!==null)throw lt=h,g;kt=1,ma(t,kn(l,t.current)),lt=null;return}i.flags&32768?(ft||a===1?t=!0:gl||(rt&536870912)!==0?t=!1:(oo=t=!0,(a===2||a===9||a===3||a===6)&&(a=In.current,a!==null&&a.tag===13&&(a.flags|=16384))),Fp(i,t)):wa(i)}function wa(t){var i=t;do{if((i.flags&32768)!==0){Fp(i,oo);return}t=i.return;var l=I0(i.alternate,i,Ii);if(l!==null){lt=l;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=t}while(i!==null);kt===0&&(kt=5)}function Fp(t,i){do{var l=D0(t.alternate,t);if(l!==null){l.flags&=32767,lt=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(t=t.sibling,t!==null)){lt=t;return}lt=t=l}while(t!==null);kt=6,lt=null}function Lp(t,i,l,a,h,g,E,A,D){t.cancelPendingCommit=null;do Ia();while(Zt!==0);if((xt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Ir,je(t,l,g,E,A,D),t===Rt&&(lt=Rt=null,rt=0),xl=i,ao=t,Di=l,zu=g,Hu=h,_p=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,B0(Xn,function(){return Gp(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=j.T,j.T=null,h=xe.p,xe.p=2,E=xt,xt|=4;try{b0(t,i,l)}finally{xt=E,xe.p=h,j.T=a}}Zt=1,Pp(),kp(),zp()}}function Pp(){if(Zt===1){Zt=0;var t=ao,i=xl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var a=xe.p;xe.p=2;var h=xt;xt|=4;try{mp(i,t);var g=ec,E=Tf(t.containerInfo),A=g.focusedElem,D=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Ef(A.ownerDocument.documentElement,A)){if(D!==null&&Ar(A)){var X=D.start,oe=D.end;if(oe===void 0&&(oe=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(oe,A.value.length);else{var ue=A.ownerDocument||document,$=ue&&ue.defaultView||window;if($.getSelection){var te=$.getSelection(),be=A.textContent.length,Be=Math.min(D.start,be),Mt=D.end===void 0?Be:Math.min(D.end,be);!te.extend&&Be>Mt&&(E=Mt,Mt=Be,Be=E);var B=Sf(A,Be),k=Sf(A,Mt);if(B&&k&&(te.rangeCount!==1||te.anchorNode!==B.node||te.anchorOffset!==B.offset||te.focusNode!==k.node||te.focusOffset!==k.offset)){var Y=ue.createRange();Y.setStart(B.node,B.offset),te.removeAllRanges(),Be>Mt?(te.addRange(Y),te.extend(k.node,k.offset)):(Y.setEnd(k.node,k.offset),te.addRange(Y))}}}}for(ue=[],te=A;te=te.parentNode;)te.nodeType===1&&ue.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ue.length;A++){var re=ue[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Va=!!ju,ec=ju=null}finally{xt=h,xe.p=a,j.T=l}}t.current=i,Zt=2}}function kp(){if(Zt===2){Zt=0;var t=ao,i=xl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var a=xe.p;xe.p=2;var h=xt;xt|=4;try{fp(t,i.alternate,i)}finally{xt=h,xe.p=a,j.T=l}}Zt=3}}function zp(){if(Zt===4||Zt===3){Zt=0,zl();var t=ao,i=xl,l=Di,a=_p;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Zt=5:(Zt=0,xl=ao=null,Hp(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(so=null),Gt(l),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(li,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=j.T,h=xe.p,xe.p=2,j.T=null;try{for(var g=t.onRecoverableError,E=0;E<a.length;E++){var A=a[E];g(A.value,{componentStack:A.stack})}}finally{j.T=i,xe.p=h}}(Di&3)!==0&&Ia(),ci(t),h=t.pendingLanes,(l&261930)!==0&&(h&42)!==0?t===Gu?gs++:(gs=0,Gu=t):gs=0,vs(0)}}function Hp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Wl(i)))}function Ia(){return Pp(),kp(),zp(),Gp()}function Gp(){if(Zt!==5)return!1;var t=ao,i=zu;zu=0;var l=Gt(Di),a=j.T,h=xe.p;try{xe.p=32>l?32:l,j.T=null,l=Hu,Hu=null;var g=ao,E=Di;if(Zt=0,xl=ao=null,Di=0,(xt&6)!==0)throw Error(s(331));var A=xt;if(xt|=4,Ep(g.current),vp(g,g.current,E,l),xt=A,vs(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(li,g)}catch{}return!0}finally{xe.p=h,j.T=a,Hp(t,i)}}function qp(t,i,l){i=kn(l,i),i=vu(t.stateNode,i,2),t=eo(t,i,2),t!==null&&(Ge(t,2),ci(t))}function Tt(t,i,l){if(t.tag===3)qp(t,t,l);else for(;i!==null;){if(i.tag===3){qp(i,t,l);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(so===null||!so.has(a))){t=kn(l,t),l=Vd(2),a=eo(i,l,2),a!==null&&(Bd(l,a,i,t),Ge(a,2),ci(a));break}}i=i.return}}function Bu(t,i,l){var a=t.pingCache;if(a===null){a=t.pingCache=new L0;var h=new Set;a.set(i,h)}else h=a.get(i),h===void 0&&(h=new Set,a.set(i,h));h.has(l)||(Lu=!0,h.add(l),t=G0.bind(null,t,i,l),i.then(t,t))}function G0(t,i,l){var a=t.pingCache;a!==null&&a.delete(i),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Rt===t&&(rt&l)===l&&(kt===4||kt===3&&(rt&62914560)===rt&&300>tn()-_a?(xt&2)===0&&Sl(t,0):Pu|=l,vl===rt&&(vl=0)),ci(t)}function Vp(t,i){i===0&&(i=Se()),t=wo(t,i),t!==null&&(Ge(t,i),ci(t))}function q0(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),Vp(t,l)}function V0(t,i){var l=0;switch(t.tag){case 31:case 13:var a=t.stateNode,h=t.memoizedState;h!==null&&(l=h.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(i),Vp(t,l)}function B0(t,i){return yi(t,i)}var Da=null,Tl=null,Ou=!1,ba=!1,Yu=!1,uo=0;function ci(t){t!==Tl&&t.next===null&&(Tl===null?Da=Tl=t:Tl=Tl.next=t),ba=!0,Ou||(Ou=!0,Y0())}function vs(t,i){if(!Yu&&ba){Yu=!0;do for(var l=!1,a=Da;a!==null;){if(t!==0){var h=a.pendingLanes;if(h===0)var g=0;else{var E=a.suspendedLanes,A=a.pingedLanes;g=(1<<31-zt(42|t)+1)-1,g&=h&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Jp(a,g))}else g=rt,g=b(a,a===Rt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||se(a,g)||(l=!0,Jp(a,g));a=a.next}while(l);Yu=!1}}function O0(){Bp()}function Bp(){ba=Ou=!1;var t=0;uo!==0&&tv()&&(t=uo);for(var i=tn(),l=null,a=Da;a!==null;){var h=a.next,g=Op(a,i);g===0?(a.next=null,l===null?Da=h:l.next=h,h===null&&(Tl=l)):(l=a,(t!==0||(g&3)!==0)&&(ba=!0)),a=h}Zt!==0&&Zt!==5||vs(t),uo!==0&&(uo=0)}function Op(t,i){for(var l=t.suspendedLanes,a=t.pingedLanes,h=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var E=31-zt(g),A=1<<E,D=h[E];D===-1?((A&l)===0||(A&a)!==0)&&(h[E]=Pe(A,i)):D<=i&&(t.expiredLanes|=A),g&=~A}if(i=Rt,l=rt,l=b(t,t===i?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,l===0||t===i&&(Et===2||Et===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&qi(a),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||se(t,l)){if(i=l&-l,i===t.callbackPriority)return i;switch(a!==null&&qi(a),Gt(l)){case 2:case 8:l=Eo;break;case 32:l=Xn;break;case 268435456:l=Xo;break;default:l=Xn}return a=Yp.bind(null,t),l=yi(l,a),t.callbackPriority=i,t.callbackNode=l,i}return a!==null&&a!==null&&qi(a),t.callbackPriority=2,t.callbackNode=null,2}function Yp(t,i){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Ia()&&t.callbackNode!==l)return null;var a=rt;return a=b(t,t===Rt?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(Mp(t,a,i),Op(t,tn()),t.callbackNode!=null&&t.callbackNode===l?Yp.bind(null,t):null)}function Jp(t,i){if(Ia())return null;Mp(t,i,!0)}function Y0(){iv(function(){(xt&6)!==0?yi(Mn,O0):Bp()})}function Ju(){if(uo===0){var t=al;t===0&&(t=V,V<<=1,(V&261888)===0&&(V=256)),uo=t}return uo}function Xp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:we(""+t)}function Kp(t,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,t.id&&l.setAttribute("form",t.id),i.parentNode.insertBefore(l,i),t=new FormData(t),l.parentNode.removeChild(l),t}function J0(t,i,l,a,h){if(i==="submit"&&l&&l.stateNode===h){var g=Xp((h[Jt]||null).action),E=a.submitter;E&&(i=(i=E[Jt]||null)?Xp(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new Os("action","action",null,a,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(uo!==0){var D=E?Kp(h,E):new FormData(h);du(l,{pending:!0,data:D,method:h.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=E?Kp(h,E):new FormData(h),du(l,{pending:!0,data:D,method:h.method,action:g},g,D))},currentTarget:h}]})}}for(var Xu=0;Xu<wr.length;Xu++){var Ku=wr[Xu],X0=Ku.toLowerCase(),K0=Ku[0].toUpperCase()+Ku.slice(1);Wn(X0,"on"+K0)}Wn(Af,"onAnimationEnd"),Wn(Mf,"onAnimationIteration"),Wn(Rf,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(c0,"onTransitionRun"),Wn(f0,"onTransitionStart"),Wn(d0,"onTransitionCancel"),Wn(Nf,"onTransitionEnd"),Qn("onMouseEnter",["mouseout","mouseover"]),Qn("onMouseLeave",["mouseout","mouseover"]),Qn("onPointerEnter",["pointerout","pointerover"]),Qn("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xs));function $p(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var a=t[l],h=a.event;a=a.listeners;e:{var g=void 0;if(i)for(var E=a.length-1;0<=E;E--){var A=a[E],D=A.instance,X=A.currentTarget;if(A=A.listener,D!==g&&h.isPropagationStopped())break e;g=A,h.currentTarget=X;try{g(h)}catch(oe){Xs(oe)}h.currentTarget=null,g=D}else for(E=0;E<a.length;E++){if(A=a[E],D=A.instance,X=A.currentTarget,A=A.listener,D!==g&&h.isPropagationStopped())break e;g=A,h.currentTarget=X;try{g(h)}catch(oe){Xs(oe)}h.currentTarget=null,g=D}}}}function st(t,i){var l=i[Hl];l===void 0&&(l=i[Hl]=new Set);var a=t+"__bubble";l.has(a)||(Qp(i,t,2,!1),l.add(a))}function $u(t,i,l){var a=0;i&&(a|=4),Qp(l,t,a,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Qu(t){if(!t[Ua]){t[Ua]=!0,Ps.forEach(function(l){l!=="selectionchange"&&($0.has(l)||$u(l,!1,t),$u(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,$u("selectionchange",!1,i))}}function Qp(t,i,l,a){switch(Ah(i)){case 2:var h=Cv;break;case 8:h=_v;break;default:h=fc}l=h.bind(null,i,l,t),h=void 0,!_o||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),a?h!==void 0?t.addEventListener(i,l,{capture:!0,passive:h}):t.addEventListener(i,l,!0):h!==void 0?t.addEventListener(i,l,{passive:h}):t.addEventListener(i,l,!1)}function Zu(t,i,l,a,h){var g=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var E=a.tag;if(E===3||E===4){var A=a.stateNode.containerInfo;if(A===h)break;if(E===4)for(E=a.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;A!==null;){if(E=Bi(A),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){a=g=E;continue e}A=A.parentNode}}a=a.return}Le(function(){var X=g,oe=ae(l),ue=[];e:{var $=wf.get(t);if($!==void 0){var te=Os,be=t;switch(t){case"keypress":if(Vs(l)===0)break e;case"keydown":case"keyup":te=Vg;break;case"focusin":be="focus",te=Sr;break;case"focusout":be="blur",te=Sr;break;case"beforeblur":case"afterblur":te=Sr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Yg;break;case Af:case Mf:case Rf:te=Ug;break;case Nf:te=Xg;break;case"scroll":case"scrollend":te=Ng;break;case"wheel":te=$g;break;case"copy":case"cut":case"paste":te=Lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=sf;break;case"toggle":case"beforetoggle":te=Zg}var Be=(i&4)!==0,Mt=!Be&&(t==="scroll"||t==="scrollend"),B=Be?$!==null?$+"Capture":null:$;Be=[];for(var k=X,Y;k!==null;){var re=k;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||B===null||(re=Vt(k,B),re!=null&&Be.push(Ss(k,re,Y))),Mt)break;k=k.return}0<Be.length&&($=new te($,be,null,l,oe),ue.push({event:$,listeners:Be}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",$&&l!==Ue&&(be=l.relatedTarget||l.fromElement)&&(Bi(be)||be[on]))break e;if((te||$)&&($=oe.window===oe?oe:($=oe.ownerDocument)?$.defaultView||$.parentWindow:window,te?(be=l.relatedTarget||l.toElement,te=X,be=be?Bi(be):null,be!==null&&(Mt=c(be),Be=be.tag,be!==Mt||Be!==5&&Be!==27&&Be!==6)&&(be=null)):(te=null,be=X),te!==be)){if(Be=of,re="onMouseLeave",B="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Be=sf,re="onPointerLeave",B="onPointerEnter",k="pointer"),Mt=te==null?$:Co(te),Y=be==null?$:Co(be),$=new Be(re,k+"leave",te,l,oe),$.target=Mt,$.relatedTarget=Y,re=null,Bi(oe)===X&&(Be=new Be(B,k+"enter",be,l,oe),Be.target=Y,Be.relatedTarget=Mt,re=Be),Mt=re,te&&be)t:{for(Be=Q0,B=te,k=be,Y=0,re=B;re;re=Be(re))Y++;re=0;for(var qe=k;qe;qe=Be(qe))re++;for(;0<Y-re;)B=Be(B),Y--;for(;0<re-Y;)k=Be(k),re--;for(;Y--;){if(B===k||k!==null&&B===k.alternate){Be=B;break t}B=Be(B),k=Be(k)}Be=null}else Be=null;te!==null&&Zp(ue,$,te,Be,!1),be!==null&&Mt!==null&&Zp(ue,Mt,be,Be,!0)}}e:{if($=X?Co(X):window,te=$.nodeName&&$.nodeName.toLowerCase(),te==="select"||te==="input"&&$.type==="file")var mt=hf;else if(df($))if(yf)mt=a0;else{mt=l0;var ke=o0}else te=$.nodeName,!te||te.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?X&&H(X.elementType)&&(mt=hf):mt=s0;if(mt&&(mt=mt(t,X))){pf(ue,mt,l,oe);break e}ke&&ke(t,$,X),t==="focusout"&&X&&$.type==="number"&&X.memoizedProps.value!=null&&G($,"number",$.value)}switch(ke=X?Co(X):window,t){case"focusin":(df(ke)||ke.contentEditable==="true")&&(jo=ke,Mr=X,$l=null);break;case"focusout":$l=Mr=jo=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Cf(ue,l,oe);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":Cf(ue,l,oe)}var tt;if(Tr)e:{switch(t){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Wo?cf(t,l)&&(ut="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(ut="onCompositionStart");ut&&(af&&l.locale!=="ko"&&(Wo||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Wo&&(tt=tf()):(Zn=oe,gr="value"in Zn?Zn.value:Zn.textContent,Wo=!0)),ke=Fa(X,ut),0<ke.length&&(ut=new lf(ut,t,null,l,oe),ue.push({event:ut,listeners:ke}),tt?ut.data=tt:(tt=ff(l),tt!==null&&(ut.data=tt)))),(tt=jg?e0(t,l):t0(t,l))&&(ut=Fa(X,"onBeforeInput"),0<ut.length&&(ke=new lf("onBeforeInput","beforeinput",null,l,oe),ue.push({event:ke,listeners:ut}),ke.data=tt)),J0(ue,t,X,l,oe)}$p(ue,i)})}function Ss(t,i,l){return{instance:t,listener:i,currentTarget:l}}function Fa(t,i){for(var l=i+"Capture",a=[];t!==null;){var h=t,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Vt(t,l),h!=null&&a.unshift(Ss(t,h,g)),h=Vt(t,i),h!=null&&a.push(Ss(t,h,g))),t.tag===3)return a;t=t.return}return[]}function Q0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zp(t,i,l,a,h){for(var g=i._reactName,E=[];l!==null&&l!==a;){var A=l,D=A.alternate,X=A.stateNode;if(A=A.tag,D!==null&&D===a)break;A!==5&&A!==26&&A!==27||X===null||(D=X,h?(X=Vt(l,g),X!=null&&E.unshift(Ss(l,X,D))):h||(X=Vt(l,g),X!=null&&E.push(Ss(l,X,D)))),l=l.return}E.length!==0&&t.push({event:i,listeners:E})}var Z0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(Z0,`
`).replace(W0,"")}function jp(t,i){return i=Wp(i),Wp(t)===i}function At(t,i,l,a,h,g){switch(l){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||O(t,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&O(t,""+a);break;case"className":Ji(t,"class",a);break;case"tabIndex":Ji(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(t,l,a);break;case"style":N(t,a,g);break;case"data":if(i!=="object"){Ji(t,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||l!=="href")){t.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=we(""+a),t.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&At(t,i,"name",h.name,h,null),At(t,i,"formEncType",h.formEncType,h,null),At(t,i,"formMethod",h.formMethod,h,null),At(t,i,"formTarget",h.formTarget,h,null)):(At(t,i,"encType",h.encType,h,null),At(t,i,"method",h.method,h,null),At(t,i,"target",h.target,h,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=we(""+a),t.setAttribute(l,a);break;case"onClick":a!=null&&(t.onclick=Ee);break;case"onScroll":a!=null&&st("scroll",t);break;case"onScrollEnd":a!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}l=we(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""+a):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":a===!0?t.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,a):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(l,a):t.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(l):t.setAttribute(l,a);break;case"popover":st("beforetoggle",t),st("toggle",t),Yi(t,"popover",a);break;case"xlinkActuate":Rn(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Rn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Rn(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Rn(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Rn(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Rn(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Rn(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Yi(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ne.get(l)||l,Yi(t,l,a))}}function Wu(t,i,l,a,h,g){switch(l){case"style":N(t,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof a=="string"?O(t,a):(typeof a=="number"||typeof a=="bigint")&&O(t,""+a);break;case"onScroll":a!=null&&st("scroll",t);break;case"onScrollEnd":a!=null&&st("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Ee);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),i=l.slice(2,h?l.length-7:void 0),g=t[Jt]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(i,g,h),typeof a=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(i,a,h);break e}l in t?t[l]=a:a===!0?t.setAttribute(l,""):Yi(t,l,a)}}}function rn(t,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var a=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":a=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:At(t,i,g,E,l,null)}}h&&At(t,i,"srcSet",l.srcSet,l,null),a&&At(t,i,"src",l.src,l,null);return;case"input":st("invalid",t);var A=g=E=h=null,D=null,X=null;for(a in l)if(l.hasOwnProperty(a)){var oe=l[a];if(oe!=null)switch(a){case"name":h=oe;break;case"type":E=oe;break;case"checked":D=oe;break;case"defaultChecked":X=oe;break;case"value":g=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,i));break;default:At(t,i,a,oe,l,null)}}ie(t,g,A,D,X,E,h,!1);return;case"select":st("invalid",t),a=E=g=null;for(h in l)if(l.hasOwnProperty(h)&&(A=l[h],A!=null))switch(h){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":a=A;default:At(t,i,h,A,l,null)}i=g,l=E,t.multiple=!!a,i!=null?q(t,!!a,i,!1):l!=null&&q(t,!!a,l,!0);return;case"textarea":st("invalid",t),g=h=a=null;for(E in l)if(l.hasOwnProperty(E)&&(A=l[E],A!=null))switch(E){case"value":a=A;break;case"defaultValue":h=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:At(t,i,E,A,l,null)}me(t,a,h,g);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(a=l[D],a!=null))switch(D){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:At(t,i,D,a,l,null)}return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(a=0;a<xs.length;a++)st(xs[a],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(a=l[X],a!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:At(t,i,X,a,l,null)}return;default:if(H(i)){for(oe in l)l.hasOwnProperty(oe)&&(a=l[oe],a!==void 0&&Wu(t,i,oe,a,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(a=l[A],a!=null&&At(t,i,A,a,l,null))}function j0(t,i,l,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,E=null,A=null,D=null,X=null,oe=null;for(te in l){var ue=l[te];if(l.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":D=ue;default:a.hasOwnProperty(te)||At(t,i,te,null,a,ue)}}for(var $ in a){var te=a[$];if(ue=l[$],a.hasOwnProperty($)&&(te!=null||ue!=null))switch($){case"type":g=te;break;case"name":h=te;break;case"checked":X=te;break;case"defaultChecked":oe=te;break;case"value":E=te;break;case"defaultValue":A=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,i));break;default:te!==ue&&At(t,i,$,te,a,ue)}}Q(t,E,A,D,X,oe,g,h);return;case"select":te=E=A=$=null;for(g in l)if(D=l[g],l.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":te=D;default:a.hasOwnProperty(g)||At(t,i,g,null,a,D)}for(h in a)if(g=a[h],D=l[h],a.hasOwnProperty(h)&&(g!=null||D!=null))switch(h){case"value":$=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==D&&At(t,i,h,g,a,D)}i=A,l=E,a=te,$!=null?q(t,!!l,$,!1):!!a!=!!l&&(i!=null?q(t,!!l,i,!0):q(t,!!l,l?[]:"",!1));return;case"textarea":te=$=null;for(A in l)if(h=l[A],l.hasOwnProperty(A)&&h!=null&&!a.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:At(t,i,A,null,a,h)}for(E in a)if(h=a[E],g=l[E],a.hasOwnProperty(E)&&(h!=null||g!=null))switch(E){case"value":$=h;break;case"defaultValue":te=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==g&&At(t,i,E,h,a,g)}fe(t,$,te);return;case"option":for(var be in l)if($=l[be],l.hasOwnProperty(be)&&$!=null&&!a.hasOwnProperty(be))switch(be){case"selected":t.selected=!1;break;default:At(t,i,be,null,a,$)}for(D in a)if($=a[D],te=l[D],a.hasOwnProperty(D)&&$!==te&&($!=null||te!=null))switch(D){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:At(t,i,D,$,a,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in l)$=l[Be],l.hasOwnProperty(Be)&&$!=null&&!a.hasOwnProperty(Be)&&At(t,i,Be,null,a,$);for(X in a)if($=a[X],te=l[X],a.hasOwnProperty(X)&&$!==te&&($!=null||te!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:At(t,i,X,$,a,te)}return;default:if(H(i)){for(var Mt in l)$=l[Mt],l.hasOwnProperty(Mt)&&$!==void 0&&!a.hasOwnProperty(Mt)&&Wu(t,i,Mt,void 0,a,$);for(oe in a)$=a[oe],te=l[oe],!a.hasOwnProperty(oe)||$===te||$===void 0&&te===void 0||Wu(t,i,oe,$,a,te);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!a.hasOwnProperty(B)&&At(t,i,B,null,a,$);for(ue in a)$=a[ue],te=l[ue],!a.hasOwnProperty(ue)||$===te||$==null&&te==null||At(t,i,ue,$,a,te)}function eh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ev(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var h=l[a],g=h.transferSize,E=h.initiatorType,A=h.duration;if(g&&A&&eh(E)){for(E=0,A=h.responseEnd,a+=1;a<l.length;a++){var D=l[a],X=D.startTime;if(X>A)break;var oe=D.transferSize,ue=D.initiatorType;oe&&eh(ue)&&(D=D.responseEnd,E+=oe*(D<A?1:(A-X)/(D-X)))}if(--a,i+=8*(g+E)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ju=null,ec=null;function La(t){return t.nodeType===9?t:t.ownerDocument}function th(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nh(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function tc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nc=null;function tv(){var t=window.event;return t&&t.type==="popstate"?t===nc?!1:(nc=t,!0):(nc=null,!1)}var ih=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,oh=typeof Promise=="function"?Promise:void 0,iv=typeof queueMicrotask=="function"?queueMicrotask:typeof oh<"u"?function(t){return oh.resolve(null).then(t).catch(ov)}:ih;function ov(t){setTimeout(function(){throw t})}function co(t){return t==="head"}function lh(t,i){var l=i,a=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(a===0){t.removeChild(h),Ml(i);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Es(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Es(l);for(var g=l.firstChild;g;){var E=g.nextSibling,A=g.nodeName;g[si]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=E}}else l==="body"&&Es(t.ownerDocument.body);l=h}while(l);Ml(i)}function sh(t,i){var l=t;t=0;do{var a=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=a}while(l)}function ic(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ic(l),ql(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function lv(t,i,l,a){for(;t.nodeType===1;){var h=l;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[si])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Vn(t.nextSibling),t===null)break}return null}function sv(t,i,l){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Vn(t.nextSibling),t===null))return null;return t}function ah(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Vn(t.nextSibling),t===null))return null;return t}function oc(t){return t.data==="$?"||t.data==="$~"}function lc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function av(t,i){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||l.readyState!=="loading")i();else{var a=function(){i(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function Vn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var sc=null;function rh(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(i===0)return Vn(t.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}t=t.nextSibling}return null}function uh(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return t;i--}else l!=="/$"&&l!=="/&"||i++}t=t.previousSibling}return null}function ch(t,i,l){switch(i=La(l),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Es(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ql(t)}var Bn=new Map,fh=new Set;function Pa(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bi=xe.d;xe.d={f:rv,r:uv,D:cv,C:fv,L:dv,m:pv,X:yv,S:hv,M:mv};function rv(){var t=bi.f(),i=Ra();return t||i}function uv(t){var i=$n(t);i!==null&&i.tag===5&&i.type==="form"?Nd(i):bi.r(t)}var Cl=typeof document>"u"?null:document;function dh(t,i,l){var a=Cl;if(a&&typeof i=="string"&&i){var h=R(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),fh.has(h)||(fh.add(h),t={rel:t,crossOrigin:l,href:i},a.querySelector(h)===null&&(i=a.createElement("link"),rn(i,"link",t),qt(i),a.head.appendChild(i)))}}function cv(t){bi.D(t),dh("dns-prefetch",t,null)}function fv(t,i){bi.C(t,i),dh("preconnect",t,i)}function dv(t,i,l){bi.L(t,i,l);var a=Cl;if(a&&t&&i){var h='link[rel="preload"][as="'+R(i)+'"]';i==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+R(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+R(l.imageSizes)+'"]')):h+='[href="'+R(t)+'"]';var g=h;switch(i){case"style":g=_l(t);break;case"script":g=Al(t)}Bn.has(g)||(t=x({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:t,as:i},l),Bn.set(g,t),a.querySelector(h)!==null||i==="style"&&a.querySelector(Ts(g))||i==="script"&&a.querySelector(Cs(g))||(i=a.createElement("link"),rn(i,"link",t),qt(i),a.head.appendChild(i)))}}function pv(t,i){bi.m(t,i);var l=Cl;if(l&&t){var a=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+R(a)+'"][href="'+R(t)+'"]',g=h;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Al(t)}if(!Bn.has(g)&&(t=x({rel:"modulepreload",href:t},i),Bn.set(g,t),l.querySelector(h)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cs(g)))return}a=l.createElement("link"),rn(a,"link",t),qt(a),l.head.appendChild(a)}}}function hv(t,i,l){bi.S(t,i,l);var a=Cl;if(a&&t){var h=Oi(a).hoistableStyles,g=_l(t);i=i||"default";var E=h.get(g);if(!E){var A={loading:0,preload:null};if(E=a.querySelector(Ts(g)))A.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":i},l),(l=Bn.get(g))&&ac(t,l);var D=E=a.createElement("link");qt(D),rn(D,"link",t),D._p=new Promise(function(X,oe){D.onload=X,D.onerror=oe}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ka(E,i,a)}E={type:"stylesheet",instance:E,count:1,state:A},h.set(g,E)}}}function yv(t,i){bi.X(t,i);var l=Cl;if(l&&t){var a=Oi(l).hoistableScripts,h=Al(t),g=a.get(h);g||(g=l.querySelector(Cs(h)),g||(t=x({src:t,async:!0},i),(i=Bn.get(h))&&rc(t,i),g=l.createElement("script"),qt(g),rn(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(h,g))}}function mv(t,i){bi.M(t,i);var l=Cl;if(l&&t){var a=Oi(l).hoistableScripts,h=Al(t),g=a.get(h);g||(g=l.querySelector(Cs(h)),g||(t=x({src:t,async:!0,type:"module"},i),(i=Bn.get(h))&&rc(t,i),g=l.createElement("script"),qt(g),rn(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(h,g))}}function ph(t,i,l,a){var h=(h=Xe.current)?Pa(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=_l(l.href),l=Oi(h).hoistableStyles,a=l.get(i),a||(a={type:"style",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=_l(l.href);var g=Oi(h).hoistableStyles,E=g.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,E),(g=h.querySelector(Ts(t)))&&!g._p&&(E.instance=g,E.state.loading=5),Bn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bn.set(t,l),g||gv(h,t,l,E.state))),i&&a===null)throw Error(s(528,""));return E}if(i&&a!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Al(l),l=Oi(h).hoistableScripts,a=l.get(i),a||(a={type:"script",instance:null,count:0,state:null},l.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function _l(t){return'href="'+R(t)+'"'}function Ts(t){return'link[rel="stylesheet"]['+t+"]"}function hh(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function gv(t,i,l,a){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=t.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),rn(i,"link",l),qt(i),t.head.appendChild(i))}function Al(t){return'[src="'+R(t)+'"]'}function Cs(t){return"script[async]"+t}function yh(t,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var a=t.querySelector('style[data-href~="'+R(l.href)+'"]');if(a)return i.instance=a,qt(a),a;var h=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),qt(a),rn(a,"style",h),ka(a,l.precedence,t),i.instance=a;case"stylesheet":h=_l(l.href);var g=t.querySelector(Ts(h));if(g)return i.state.loading|=4,i.instance=g,qt(g),g;a=hh(l),(h=Bn.get(h))&&ac(a,h),g=(t.ownerDocument||t).createElement("link"),qt(g);var E=g;return E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),rn(g,"link",a),i.state.loading|=4,ka(g,l.precedence,t),i.instance=g;case"script":return g=Al(l.src),(h=t.querySelector(Cs(g)))?(i.instance=h,qt(h),h):(a=l,(h=Bn.get(g))&&(a=x({},l),rc(a,h)),t=t.ownerDocument||t,h=t.createElement("script"),qt(h),rn(h,"link",a),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,ka(a,l.precedence,t));return i.instance}function ka(t,i,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=a.length?a[a.length-1]:null,g=h,E=0;E<a.length;E++){var A=a[E];if(A.dataset.precedence===i)g=A;else if(g!==h)break}g?g.parentNode.insertBefore(t,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(t,i.firstChild))}function ac(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function rc(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var za=null;function mh(t,i,l){if(za===null){var a=new Map,h=za=new Map;h.set(l,a)}else h=za,a=h.get(l),a||(a=new Map,h.set(l,a));if(a.has(t))return a;for(a.set(t,null),l=l.getElementsByTagName(t),h=0;h<l.length;h++){var g=l[h];if(!(g[si]||g[Lt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=t+E;var A=a.get(E);A?A.push(g):a.set(E,[g])}}return a}function gh(t,i,l){t=t.ownerDocument||t,t.head.insertBefore(l,i==="title"?t.querySelector("head > title"):null)}function vv(t,i,l){if(l===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function vh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xv(t,i,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=_l(a.href),g=i.querySelector(Ts(h));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ha.bind(t),i.then(t,t)),l.state.loading|=4,l.instance=g,qt(g);return}g=i.ownerDocument||i,a=hh(a),(h=Bn.get(h))&&ac(a,h),g=g.createElement("link"),qt(g);var E=g;E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),rn(g,"link",a),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Ha.bind(t),i.addEventListener("load",l),i.addEventListener("error",l))}}var uc=0;function Sv(t,i){return t.stylesheets&&t.count===0&&qa(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var a=setTimeout(function(){if(t.stylesheets&&qa(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+i);0<t.imgBytes&&uc===0&&(uc=62500*ev());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qa(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>uc?50:800)+i);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(h)}}:null}function Ha(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qa(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ga=null;function qa(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ga=new Map,i.forEach(Ev,t),Ga=null,Ha.call(t))}function Ev(t,i){if(!(i.state.loading&4)){var l=Ga.get(t);if(l)var a=l.get(null);else{l=new Map,Ga.set(t,l);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var E=h[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),a=E)}a&&l.set(null,a)}h=i.instance,E=h.getAttribute("data-precedence"),g=l.get(E)||a,g===a&&l.set(null,h),l.set(E,h),this.count++,a=Ha.bind(this),h.addEventListener("load",a),h.addEventListener("error",a),g?g.parentNode.insertBefore(h,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var _s={$$typeof:le,Provider:null,Consumer:null,_currentValue:ze,_currentValue2:ze,_threadCount:0};function Tv(t,i,l,a,h,g,E,A,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=a,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function xh(t,i,l,a,h,g,E,A,D,X,oe,ue){return t=new Tv(t,i,l,E,D,X,oe,ue,A),i=1,g===!0&&(i|=24),g=wn(3,null,null,i),t.current=g,g.stateNode=t,i=Vr(),i.refCount++,t.pooledCache=i,i.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:i},Jr(g),t}function Sh(t){return t?(t=nl,t):nl}function Eh(t,i,l,a,h,g){h=Sh(h),a.context===null?a.context=h:a.pendingContext=h,a=ji(i),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=eo(t,a,i),l!==null&&(An(l,t,i),ns(l,t,i))}function Th(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function cc(t,i){Th(t,i),(t=t.alternate)&&Th(t,i)}function Ch(t){if(t.tag===13||t.tag===31){var i=wo(t,67108864);i!==null&&An(i,t,67108864),cc(t,67108864)}}function _h(t){if(t.tag===13||t.tag===31){var i=Fn();i=Ht(i);var l=wo(t,i);l!==null&&An(l,t,i),cc(t,i)}}var Va=!0;function Cv(t,i,l,a){var h=j.T;j.T=null;var g=xe.p;try{xe.p=2,fc(t,i,l,a)}finally{xe.p=g,j.T=h}}function _v(t,i,l,a){var h=j.T;j.T=null;var g=xe.p;try{xe.p=8,fc(t,i,l,a)}finally{xe.p=g,j.T=h}}function fc(t,i,l,a){if(Va){var h=dc(a);if(h===null)Zu(t,i,a,Ba,l),Mh(t,a);else if(Mv(h,t,i,l,a))a.stopPropagation();else if(Mh(t,a),i&4&&-1<Av.indexOf(t)){for(;h!==null;){var g=$n(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=K(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var D=1<<31-zt(E);A.entanglements[1]|=D,E&=~D}ci(g),(xt&6)===0&&(Aa=tn()+500,vs(0))}}break;case 31:case 13:A=wo(g,2),A!==null&&An(A,g,2),Ra(),cc(g,2)}if(g=dc(a),g===null&&Zu(t,i,a,Ba,l),g===h)break;h=g}h!==null&&a.stopPropagation()}else Zu(t,i,a,null,l)}}function dc(t){return t=ae(t),pc(t)}var Ba=null;function pc(t){if(Ba=null,t=Bi(t),t!==null){var i=c(t);if(i===null)t=null;else{var l=i.tag;if(l===13){if(t=f(i),t!==null)return t;t=null}else if(l===31){if(t=y(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ba=t,null}function Ah(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mi()){case Mn:return 2;case Eo:return 8;case Xn:case To:return 32;case Xo:return 268435456;default:return 32}default:return 32}}var hc=!1,fo=null,po=null,ho=null,As=new Map,Ms=new Map,yo=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(t,i){switch(t){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":As.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(i.pointerId)}}function Rs(t,i,l,a,h,g){return t===null||t.nativeEvent!==g?(t={blockedOn:i,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[h]},i!==null&&(i=$n(i),i!==null&&Ch(i)),t):(t.eventSystemFlags|=a,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Mv(t,i,l,a,h){switch(i){case"focusin":return fo=Rs(fo,t,i,l,a,h),!0;case"dragenter":return po=Rs(po,t,i,l,a,h),!0;case"mouseover":return ho=Rs(ho,t,i,l,a,h),!0;case"pointerover":var g=h.pointerId;return As.set(g,Rs(As.get(g)||null,t,i,l,a,h)),!0;case"gotpointercapture":return g=h.pointerId,Ms.set(g,Rs(Ms.get(g)||null,t,i,l,a,h)),!0}return!1}function Rh(t){var i=Bi(t.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=f(l),i!==null){t.blockedOn=i,ct(t.priority,function(){_h(l)});return}}else if(i===31){if(i=y(l),i!==null){t.blockedOn=i,ct(t.priority,function(){_h(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oa(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=dc(t.nativeEvent);if(l===null){l=t.nativeEvent;var a=new l.constructor(l.type,l);Ue=a,l.target.dispatchEvent(a),Ue=null}else return i=$n(l),i!==null&&Ch(i),t.blockedOn=l,!1;i.shift()}return!0}function Nh(t,i,l){Oa(t)&&l.delete(i)}function Rv(){hc=!1,fo!==null&&Oa(fo)&&(fo=null),po!==null&&Oa(po)&&(po=null),ho!==null&&Oa(ho)&&(ho=null),As.forEach(Nh),Ms.forEach(Nh)}function Ya(t,i){t.blockedOn===i&&(t.blockedOn=null,hc||(hc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rv)))}var Ja=null;function wh(t){Ja!==t&&(Ja=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ja===t&&(Ja=null);for(var i=0;i<t.length;i+=3){var l=t[i],a=t[i+1],h=t[i+2];if(typeof a!="function"){if(pc(a||l)===null)continue;break}var g=$n(l);g!==null&&(t.splice(i,3),i-=3,du(g,{pending:!0,data:h,method:l.method,action:a},a,h))}}))}function Ml(t){function i(D){return Ya(D,t)}fo!==null&&Ya(fo,t),po!==null&&Ya(po,t),ho!==null&&Ya(ho,t),As.forEach(i),Ms.forEach(i);for(var l=0;l<yo.length;l++){var a=yo[l];a.blockedOn===t&&(a.blockedOn=null)}for(;0<yo.length&&(l=yo[0],l.blockedOn===null);)Rh(l),l.blockedOn===null&&yo.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var h=l[a],g=l[a+1],E=h[Jt]||null;if(typeof g=="function")E||wh(l);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(h=g,E=g[Jt]||null)A=E.formAction;else if(pc(h)!==null)continue}else A=E.action;typeof A=="function"?l[a+1]=A:(l.splice(a,3),a-=3),wh(l)}}}function Ih(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return h=E})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function yc(t){this._internalRoot=t}Xa.prototype.render=yc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,a=Fn();Eh(l,a,t,i,null,null)},Xa.prototype.unmount=yc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Eh(t.current,2,null,t,null,null),Ra(),i[on]=null}};function Xa(t){this._internalRoot=t}Xa.prototype.unstable_scheduleHydration=function(t){if(t){var i=ot();t={blockedOn:null,target:t,priority:i};for(var l=0;l<yo.length&&i!==0&&i<yo[l].priority;l++);yo.splice(l,0,t),l===0&&Rh(t)}};var Dh=e.version;if(Dh!=="19.2.3")throw Error(s(527,Dh,"19.2.3"));xe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Nv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{li=Ka.inject(Nv),Yt=Ka}catch{}}return ws.createRoot=function(t,i){if(!r(t))throw Error(s(299));var l=!1,a="",h=zd,g=Hd,E=Gd;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=xh(t,1,!1,null,null,l,a,null,h,g,E,Ih),t[on]=i.current,Qu(t),new yc(i)},ws.hydrateRoot=function(t,i,l){if(!r(t))throw Error(s(299));var a=!1,h="",g=zd,E=Hd,A=Gd,D=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.formState!==void 0&&(D=l.formState)),i=xh(t,1,!0,i,l??null,a,h,D,g,E,A,Ih),i.context=Sh(null),l=i.current,a=Fn(),a=Ht(a),h=ji(a),h.callback=null,eo(l,h,a),l=a,i.current.lanes=l,Ge(i,l),ci(i),t[on]=i.current,Qu(t),new Xa(i)},ws.version="19.2.3",ws}var qh;function zv(){if(qh)return vc.exports;qh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vc.exports=kv(),vc.exports}var Hv=zv();const Gv=bm(Hv);var qv={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vv,Bv;function Ov(){return{geminiUrl:Vv,vertexUrl:Bv}}function Yv(n,e,o,s){var r,c;if(!(n!=null&&n.baseUrl)){const f=Ov();return e?(r=f.vertexUrl)!==null&&r!==void 0?r:o:(c=f.geminiUrl)!==null&&c!==void 0?c:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zi{}function Me(n,e){const o=/\{([^}]+)\}/g;return n.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const c=e[r];return c!=null?String(c):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,e,o){for(let c=0;c<e.length-1;c++){const f=e[c];if(f.endsWith("[]")){const y=f.slice(0,-2);if(!(y in n))if(Array.isArray(o))n[y]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(n[y])){const m=n[y];if(Array.isArray(o))for(let p=0;p<m.length;p++){const v=m[p];d(v,e.slice(c+1),o[p])}else for(const p of m)d(p,e.slice(c+1),o)}return}else if(f.endsWith("[0]")){const y=f.slice(0,-3);y in n||(n[y]=[{}]);const m=n[y];d(m[0],e.slice(c+1),o);return}(!n[f]||typeof n[f]!="object")&&(n[f]={}),n=n[f]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[s]=o}function u(n,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return o;const r=e[s];if(r.endsWith("[]")){const c=r.slice(0,-2);if(c in n){const f=n[c];return Array.isArray(f)?f.map(y=>u(y,e.slice(s+1),o)):o}else return o}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return o;throw s}}function Jv(n,e){for(const[o,s]of Object.entries(e)){const r=o.split("."),c=s.split("."),f=new Set;let y=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){y=m;break}if(y!==-1&&c.length>y)for(let m=y;m<c.length;m++){const p=c[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&f.add(p)}Mc(n,r,c,0,f)}}function Mc(n,e,o,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const c=e[s];if(c.endsWith("[]")){const f=c.slice(0,-2),y=n;if(f in y&&Array.isArray(y[f]))for(const m of y[f])Mc(m,e,o,s+1,r)}else if(c==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const f=n,y=Object.keys(f).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of y)m[p]=f[p];for(const[p,v]of Object.entries(m)){const x=[];for(const S of o.slice(s))S==="*"?x.push(p):x.push(S);d(f,x,v)}for(const p of y)delete f[p]}}else{const f=n;c in f&&Mc(f[c],e,o,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oc(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xv(n){const e={},o=u(n,["operationName"]);o!=null&&d(e,["operationName"],o);const s=u(n,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function Kv(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response","generateVideoResponse"]);return f!=null&&d(e,["response"],Qv(f)),e}function $v(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response"]);return f!=null&&d(e,["response"],Zv(f)),e}function Qv(n){const e={},o=u(n,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Wv(f))),d(e,["generatedVideos"],c)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Zv(n){const e={},o=u(n,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>jv(f))),d(e,["generatedVideos"],c)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Wv(n){const e={},o=u(n,["video"]);return o!=null&&d(e,["video"],lx(o)),e}function jv(n){const e={},o=u(n,["_self"]);return o!=null&&d(e,["video"],sx(o)),e}function ex(n){const e={},o=u(n,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function tx(n){const e={},o=u(n,["operationName"]);return o!=null&&d(e,["_url","operationName"],o),e}function nx(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response"]);return f!=null&&d(e,["response"],ix(f)),e}function ix(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&d(e,["parent"],s);const r=u(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function Fm(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response"]);return f!=null&&d(e,["response"],ox(f)),e}function ox(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&d(e,["parent"],s);const r=u(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function lx(n){const e={},o=u(n,["uri"]);o!=null&&d(e,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],Oc(s));const r=u(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function sx(n){const e={},o=u(n,["gcsUri"]);o!=null&&d(e,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],Oc(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vh;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vh||(Vh={}));var Bh;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Bh||(Bh={}));var Oh;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Oh||(Oh={}));var dt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(dt||(dt={}));var Yh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Yh||(Yh={}));var Jh;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jh||(Jh={}));var Xh;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Xh||(Xh={}));var Kh;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Kh||(Kh={}));var $h;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($h||($h={}));var Qh;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Qh||(Qh={}));var Zh;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Zh||(Zh={}));var Wh;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Wh||(Wh={}));var jh;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(jh||(jh={}));var ey;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(ey||(ey={}));var ty;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ty||(ty={}));var ny;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ny||(ny={}));var iy;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(iy||(iy={}));var oy;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(oy||(oy={}));var ly;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ly||(ly={}));var ir;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ir||(ir={}));var sy;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sy||(sy={}));var ay;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ay||(ay={}));var ry;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ry||(ry={}));var Rc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rc||(Rc={}));var uy;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(uy||(uy={}));var cy;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(cy||(cy={}));var fy;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(fy||(fy={}));var dy;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(dy||(dy={}));var py;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(py||(py={}));var hy;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hy||(hy={}));var yy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(yy||(yy={}));var my;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(my||(my={}));var gy;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(gy||(gy={}));var vy;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(vy||(vy={}));var xy;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xy||(xy={}));var Sy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Sy||(Sy={}));var Ey;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ey||(Ey={}));var Ty;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ty||(Ty={}));var Cy;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Cy||(Cy={}));var _y;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(_y||(_y={}));var Ay;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Ay||(Ay={}));var My;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(My||(My={}));var Ry;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ry||(Ry={}));var Ny;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Ny||(Ny={}));var wy;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wy||(wy={}));var Iy;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Iy||(Iy={}));var Dy;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dy||(Dy={}));var by;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(by||(by={}));var Uy;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Uy||(Uy={}));var Fy;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fy||(Fy={}));var Ly;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ly||(Ly={}));var Py;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Py||(Py={}));var ky;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ky||(ky={}));var zy;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zy||(zy={}));var Hy;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Hy||(Hy={}));var Il;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Il||(Il={}));class Nc{constructor(e){const o={};for(const s of e.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Is{get text(){var e,o,s,r,c,f,y,m;if(((r=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const x=[];for(const S of(m=(y=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||y===void 0?void 0:y.parts)!==null&&m!==void 0?m:[]){for(const[_,U]of Object.entries(S))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(U!==null||U!==void 0)&&x.push(_);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,o,s,r,c,f,y,m;if(((r=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const x of(m=(y=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||y===void 0?void 0:y.parts)!==null&&m!==void 0?m:[]){for(const[S,_]of Object.entries(x))S!=="inlineData"&&(_!==null||_!==void 0)&&v.push(S);x.inlineData&&typeof x.inlineData.data=="string"&&(p+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,o,s,r,c,f,y,m;if(((r=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(y=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||y===void 0?void 0:y.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,o,s,r,c,f,y,m,p;if(((r=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(y=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||y===void 0?void 0:y.parts)===null||m===void 0?void 0:m.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,o,s,r,c,f,y,m,p;if(((r=(s=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(y=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||y===void 0?void 0:y.parts)===null||m===void 0?void 0:m.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Gy{}class qy{}class ax{}class rx{}class ux{}class cx{}class Vy{}class By{}class Oy{}class fx{}class or{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new or;let r;const c=e;return o?r=$v(c):r=Kv(c),Object.assign(s,r),s}}class Yy{}class Jy{}class Xy{}class Ky{}class dx{}class px{}class hx{}class Yc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Yc,c=nx(e);return Object.assign(s,c),s}}class yx{}class mx{}class gx{}class $y{}class vx{get text(){var e,o,s;let r="",c=!1;const f=[];for(const y of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(y))m!=="text"&&m!=="thought"&&p!==null&&f.push(m);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;c=!0,r+=y.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?r:void 0}get data(){var e,o,s;let r="";const c=[];for(const f of(s=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[y,m]of Object.entries(f))y!=="inlineData"&&m!==null&&c.push(y);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class xx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Jc{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const s=new Jc,c=Fm(e);return Object.assign(s,c),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Lm(n,e){const o=vt(n,e);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function Pm(n){return Array.isArray(n)?n.map(e=>lr(e)):[lr(n)]}function lr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function km(n){const e=lr(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zm(n){const e=lr(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qy(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Hm(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Qy(e)):[Qy(n)]}function wc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Zy(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Wy(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function fn(n){if(n==null)throw new Error("ContentUnion is required");return wc(n)?n:{role:"user",parts:Hm(n)}}function Xc(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const s=fn(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const o=fn(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>fn(o)):[fn(e)]}function On(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Zy(n)||Wy(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(n)]}const e=[],o=[],s=wc(n[0]);for(const r of n){const c=wc(r);if(c!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(r);else{if(Zy(r)||Wy(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||e.push({role:"user",parts:Hm(o)}),e}function Sx(n,e){n.includes("null")&&(e.nullable=!0);const o=n.filter(s=>s!=="null");if(o.length===1)e.type=Object.values(dt).includes(o[0].toUpperCase())?o[0].toUpperCase():dt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of o)e.anyOf.push({type:Object.values(dt).includes(s.toUpperCase())?s.toUpperCase():dt.TYPE_UNSPECIFIED})}}function bl(n){const e={},o=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=n.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,n=c[1]):c[1].type==="null"&&(e.nullable=!0,n=c[0])),n.type instanceof Array&&Sx(n.type,e);for(const[f,y]of Object.entries(n))if(y!=null)if(f=="type"){if(y==="null")throw new Error("type: null can not be the only possible type for the field.");if(y instanceof Array)continue;e.type=Object.values(dt).includes(y.toUpperCase())?y.toUpperCase():dt.TYPE_UNSPECIFIED}else if(o.includes(f))e[f]=bl(y);else if(s.includes(f)){const m=[];for(const p of y){if(p.type=="null"){e.nullable=!0;continue}m.push(bl(p))}e[f]=m}else if(r.includes(f)){const m={};for(const[p,v]of Object.entries(y))m[p]=bl(v);e[f]=m}else{if(f==="additionalProperties")continue;e[f]=y}return e}function Kc(n){return bl(n)}function $c(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Qc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Fl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=bl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=bl(e.response));return n}function Ll(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of n)e.push(o);return e}function Ex(n,e,o,s=1){const r=!e.startsWith(`${o}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${e}`:e:r?`${o}/${e}`:e}function Hi(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ex(n,e,"cachedContents")}function Gm(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function go(n){return Oc(n)}function Tx(n){return n!=null&&typeof n=="object"&&"name"in n}function Cx(n){return n!=null&&typeof n=="object"&&"video"in n}function _x(n){return n!=null&&typeof n=="object"&&"uri"in n}function qm(n){var e;let o;if(Tx(n)&&(o=n.name),!(_x(n)&&(o=n.uri,o===void 0))&&!(Cx(n)&&(o=(e=n.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Vm(n,e){let o;return n.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function Bm(n){for(const e of["models","tunedModels","publisherModels"])if(Ax(n,e))return n[e];return[]}function Ax(n,e){return n!==null&&typeof n=="object"&&e in n}function Mx(n,e={}){const o=n,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Rx(n,e={}){const o=[],s=new Set;for(const r of n){const c=r.name;if(s.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);s.add(c);const f=Mx(r,e);f.functionDeclarations&&o.push(...f.functionDeclarations)}return{functionDeclarations:o}}function Om(n,e){let o;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function Nx(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ym(n){if(typeof n!="object"||n===null)return{};const e=n,o=e.inlinedResponses;if(typeof o!="object"||o===null)return n;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let c=!1;for(const f of r){if(typeof f!="object"||f===null)continue;const m=f.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Pl(n,e){const o=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Jm(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wx(n){const e={},o=u(n,["responsesFile"]);o!=null&&d(e,["fileName"],o);const s=u(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>uS(f))),d(e,["inlinedResponses"],c)}const r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["inlinedEmbedContentResponses"],c)}return e}function Ix(n){const e={},o=u(n,["predictionsFormat"]);o!=null&&d(e,["format"],o);const s=u(n,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function Dx(n){const e={},o=u(n,["format"]);o!=null&&d(e,["predictionsFormat"],o);const s=u(n,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function tr(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const r=u(n,["metadata","state"]);r!=null&&d(e,["state"],Jm(r));const c=u(n,["metadata","createTime"]);c!=null&&d(e,["createTime"],c);const f=u(n,["metadata","endTime"]);f!=null&&d(e,["endTime"],f);const y=u(n,["metadata","updateTime"]);y!=null&&d(e,["updateTime"],y);const m=u(n,["metadata","model"]);m!=null&&d(e,["model"],m);const p=u(n,["metadata","output"]);return p!=null&&d(e,["dest"],wx(Ym(p))),e}function Ic(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=u(n,["state"]);r!=null&&d(e,["state"],Jm(r));const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["createTime"]);f!=null&&d(e,["createTime"],f);const y=u(n,["startTime"]);y!=null&&d(e,["startTime"],y);const m=u(n,["endTime"]);m!=null&&d(e,["endTime"],m);const p=u(n,["updateTime"]);p!=null&&d(e,["updateTime"],p);const v=u(n,["model"]);v!=null&&d(e,["model"],v);const x=u(n,["inputConfig"]);x!=null&&d(e,["src"],bx(x));const S=u(n,["outputConfig"]);S!=null&&d(e,["dest"],Ix(Ym(S)));const _=u(n,["completionStats"]);return _!=null&&d(e,["completionStats"],_),e}function bx(n){const e={},o=u(n,["instancesFormat"]);o!=null&&d(e,["format"],o);const s=u(n,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const r=u(n,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function Ux(n,e){const o={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&d(o,["fileName"],s);const r=u(e,["inlinedRequests"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>rS(n,f))),d(o,["requests","requests"],c)}return o}function Fx(n){const e={},o=u(n,["format"]);o!=null&&d(e,["instancesFormat"],o);const s=u(n,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const r=u(n,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Lx(n){const e={},o=u(n,["data"]);if(o!=null&&d(e,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Px(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function kx(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function zx(n){const e={},o=u(n,["content"]);o!=null&&d(e,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],Hx(s));const r=u(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const c=u(n,["finishReason"]);c!=null&&d(e,["finishReason"],c);const f=u(n,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const y=u(n,["groundingMetadata"]);y!=null&&d(e,["groundingMetadata"],y);const m=u(n,["index"]);m!=null&&d(e,["index"],m);const p=u(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const v=u(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(_=>_)),d(e,["safetyRatings"],S)}const x=u(n,["urlContextMetadata"]);return x!=null&&d(e,["urlContextMetadata"],x),e}function Hx(n){const e={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function Xm(n){const e={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>mS(c))),d(e,["parts"],r)}const s=u(n,["role"]);return s!=null&&d(e,["role"],s),e}function Gx(n,e){const o={},s=u(n,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function qx(n,e){const o={},s=u(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=u(n,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],Dx(Nx(r))),o}function jy(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["src"]);r!=null&&d(o,["batch","inputConfig"],Ux(n,Om(n,r)));const c=u(e,["config"]);return c!=null&&Gx(c,o),o}function Vx(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["model"],vt(n,s));const r=u(e,["src"]);r!=null&&d(o,["inputConfig"],Fx(Om(n,r)));const c=u(e,["config"]);return c!=null&&qx(c,o),o}function Bx(n,e){const o={},s=u(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),o}function Ox(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["src"]);r!=null&&d(o,["batch","inputConfig"],Zx(n,r));const c=u(e,["config"]);return c!=null&&Bx(c,o),o}function Yx(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function Jx(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function Xx(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&d(e,["name"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);return c!=null&&d(e,["error"],c),e}function Kx(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["name"]);s!=null&&d(e,["name"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);return c!=null&&d(e,["error"],c),e}function $x(n,e){const o={},s=u(e,["contents"]);if(s!=null){let c=Xc(n,s);Array.isArray(c)&&(c=c.map(f=>f)),d(o,["requests[]","request","content"],c)}const r=u(e,["config"]);return r!=null&&(d(o,["_self"],Qx(r,o)),Jv(o,{"requests[].*":"requests[].request.*"})),o}function Qx(n,e){const o={},s=u(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=u(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const c=u(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Zx(n,e){const o={},s=u(e,["fileName"]);s!=null&&d(o,["file_name"],s);const r=u(e,["inlinedRequests"]);return r!=null&&d(o,["requests"],$x(n,r)),o}function Wx(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function jx(n){const e={},o=u(n,["id"]);o!=null&&d(e,["id"],o);const s=u(n,["args"]);s!=null&&d(e,["args"],s);const r=u(n,["name"]);if(r!=null&&d(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eS(n){const e={},o=u(n,["mode"]);o!=null&&d(e,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tS(n,e,o){const s={},r=u(e,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],Xm(fn(r)));const c=u(e,["temperature"]);c!=null&&d(s,["temperature"],c);const f=u(e,["topP"]);f!=null&&d(s,["topP"],f);const y=u(e,["topK"]);y!=null&&d(s,["topK"],y);const m=u(e,["candidateCount"]);m!=null&&d(s,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const x=u(e,["responseLogprobs"]);x!=null&&d(s,["responseLogprobs"],x);const S=u(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const _=u(e,["presencePenalty"]);_!=null&&d(s,["presencePenalty"],_);const U=u(e,["frequencyPenalty"]);U!=null&&d(s,["frequencyPenalty"],U);const P=u(e,["seed"]);P!=null&&d(s,["seed"],P);const w=u(e,["responseMimeType"]);w!=null&&d(s,["responseMimeType"],w);const I=u(e,["responseSchema"]);I!=null&&d(s,["responseSchema"],Kc(I));const pe=u(e,["responseJsonSchema"]);if(pe!=null&&d(s,["responseJsonSchema"],pe),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const le=u(e,["safetySettings"]);if(o!==void 0&&le!=null){let nt=le;Array.isArray(nt)&&(nt=nt.map(ht=>gS(ht))),d(o,["safetySettings"],nt)}const he=u(e,["tools"]);if(o!==void 0&&he!=null){let nt=Ll(he);Array.isArray(nt)&&(nt=nt.map(ht=>xS(Fl(ht)))),d(o,["tools"],nt)}const Ce=u(e,["toolConfig"]);if(o!==void 0&&Ce!=null&&d(o,["toolConfig"],vS(Ce)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _e=u(e,["cachedContent"]);o!==void 0&&_e!=null&&d(o,["cachedContent"],Hi(n,_e));const ve=u(e,["responseModalities"]);ve!=null&&d(s,["responseModalities"],ve);const Je=u(e,["mediaResolution"]);Je!=null&&d(s,["mediaResolution"],Je);const Ae=u(e,["speechConfig"]);if(Ae!=null&&d(s,["speechConfig"],$c(Ae)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ve=u(e,["thinkingConfig"]);Ve!=null&&d(s,["thinkingConfig"],Ve);const Ze=u(e,["imageConfig"]);Ze!=null&&d(s,["imageConfig"],aS(Ze));const it=u(e,["enableEnhancedCivicAnswers"]);return it!=null&&d(s,["enableEnhancedCivicAnswers"],it),s}function nS(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>zx(p))),d(e,["candidates"],m)}const r=u(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const c=u(n,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const f=u(n,["responseId"]);f!=null&&d(e,["responseId"],f);const y=u(n,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function iS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function oS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Pl(n,s)),o}function lS(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function sS(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function aS(n){const e={},o=u(n,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rS(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["request","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let y=On(r);Array.isArray(y)&&(y=y.map(m=>Xm(m))),d(o,["request","contents"],y)}const c=u(e,["metadata"]);c!=null&&d(o,["metadata"],c);const f=u(e,["config"]);return f!=null&&d(o,["request","generationConfig"],tS(n,f,u(o,["request"],{}))),o}function uS(n){const e={},o=u(n,["response"]);o!=null&&d(e,["response"],nS(o));const s=u(n,["error"]);return s!=null&&d(e,["error"],s),e}function cS(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function fS(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const c=u(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function dS(n){const e={},o=u(n,["config"]);return o!=null&&cS(o,e),e}function pS(n){const e={},o=u(n,["config"]);return o!=null&&fS(o,e),e}function hS(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["operations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>tr(f))),d(e,["batchJobs"],c)}return e}function yS(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["batchPredictionJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>Ic(f))),d(e,["batchJobs"],c)}return e}function mS(n){const e={},o=u(n,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const c=u(n,["fileData"]);c!=null&&d(e,["fileData"],Wx(c));const f=u(n,["functionCall"]);f!=null&&d(e,["functionCall"],jx(f));const y=u(n,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const m=u(n,["inlineData"]);m!=null&&d(e,["inlineData"],Lx(m));const p=u(n,["text"]);p!=null&&d(e,["text"],p);const v=u(n,["thought"]);v!=null&&d(e,["thought"],v);const x=u(n,["thoughtSignature"]);x!=null&&d(e,["thoughtSignature"],x);const S=u(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function gS(n){const e={},o=u(n,["category"]);if(o!=null&&d(e,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function vS(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],eS(o));const s=u(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function xS(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["functionDeclarations"],v)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const c=u(n,["fileSearch"]);c!=null&&d(e,["fileSearch"],c);const f=u(n,["codeExecution"]);if(f!=null&&d(e,["codeExecution"],f),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],lS(y));const m=u(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],sS(m));const p=u(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ki;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ki||(ki={}));class Oo{constructor(e,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,s,r)}init(e,o,s){var r,c;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!s||Object.keys(s).length===0?f={config:{}}:typeof s=="object"?f=Object.assign({},s):f=s,f.config&&(f.config.pageToken=o.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(c=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SS extends zi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Oo(ki.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=jy(this.apiClient,e),s=o._url,r=Me("{model}:batchGenerateContent",s),y=o.batch.inputConfig.requests,m=y.requests,p=[];for(const v of m){const x=Object.assign({},v);if(x.systemInstruction){const S=x.systemInstruction;delete x.systemInstruction;const _=x.request;_.systemInstruction=S,x.request=_}p.push(x)}return y.requests=p,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const c=this.getGcsUri(e),f=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?s.dest=`${c.slice(0,-6)}/dest`:s.dest=`${c}_dest_${r}`;else if(f)s.dest=`${f}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=Vx(this.apiClient,e);return y=Me("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>Ic(v))}else{const p=jy(this.apiClient,e);return y=Me("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>tr(v))}}async createEmbeddingsInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=Ox(this.apiClient,e);return c=Me("{model}:asyncBatchEmbedContent",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>tr(m))}}async get(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=oS(this.apiClient,e);return y=Me("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>Ic(v))}else{const p=iS(this.apiClient,e);return y=Me("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>tr(v))}}async cancel(e){var o,s,r,c;let f="",y={};if(this.apiClient.isVertexAI()){const m=kx(this.apiClient,e);f=Me("batchPredictionJobs/{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,await this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=Px(this.apiClient,e);f=Me("batches/{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,await this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=pS(e);return y=Me("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=yS(v),S=new $y;return Object.assign(S,x),S})}else{const p=dS(e);return y=Me("batches",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=hS(v),S=new $y;return Object.assign(S,x),S})}}async delete(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=Jx(this.apiClient,e);return y=Me("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>Kx(v))}else{const p=Yx(this.apiClient,e);return y=Me("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>Xx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(n){const e={},o=u(n,["data"]);if(o!=null&&d(e,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function em(n){const e={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>OS(c))),d(e,["parts"],r)}const s=u(n,["role"]);return s!=null&&d(e,["role"],s),e}function TS(n,e){const o={},s=u(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=u(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const c=u(n,["displayName"]);e!==void 0&&c!=null&&d(e,["displayName"],c);const f=u(n,["contents"]);if(e!==void 0&&f!=null){let v=On(f);Array.isArray(v)&&(v=v.map(x=>em(x))),d(e,["contents"],v)}const y=u(n,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["systemInstruction"],em(fn(y)));const m=u(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(x=>JS(x))),d(e,["tools"],v)}const p=u(n,["toolConfig"]);if(e!==void 0&&p!=null&&d(e,["toolConfig"],YS(p)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function CS(n,e){const o={},s=u(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=u(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const c=u(n,["displayName"]);e!==void 0&&c!=null&&d(e,["displayName"],c);const f=u(n,["contents"]);if(e!==void 0&&f!=null){let x=On(f);Array.isArray(x)&&(x=x.map(S=>S)),d(e,["contents"],x)}const y=u(n,["systemInstruction"]);e!==void 0&&y!=null&&d(e,["systemInstruction"],fn(y));const m=u(n,["tools"]);if(e!==void 0&&m!=null){let x=m;Array.isArray(x)&&(x=x.map(S=>XS(S))),d(e,["tools"],x)}const p=u(n,["toolConfig"]);e!==void 0&&p!=null&&d(e,["toolConfig"],p);const v=u(n,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),o}function _S(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["model"],Lm(n,s));const r=u(e,["config"]);return r!=null&&TS(r,o),o}function AS(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["model"],Lm(n,s));const r=u(e,["config"]);return r!=null&&CS(r,o),o}function MS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Hi(n,s)),o}function RS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Hi(n,s)),o}function NS(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function wS(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function IS(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function DS(n){const e={},o=u(n,["id"]);o!=null&&d(e,["id"],o);const s=u(n,["args"]);s!=null&&d(e,["args"],s);const r=u(n,["name"]);if(r!=null&&d(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bS(n){const e={},o=u(n,["mode"]);o!=null&&d(e,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function US(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&d(e,["description"],o);const s=u(n,["name"]);s!=null&&d(e,["name"],s);const r=u(n,["parameters"]);r!=null&&d(e,["parameters"],r);const c=u(n,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const f=u(n,["response"]);f!=null&&d(e,["response"],f);const y=u(n,["responseJsonSchema"]);return y!=null&&d(e,["responseJsonSchema"],y),e}function FS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Hi(n,s)),o}function LS(n,e){const o={},s=u(e,["name"]);return s!=null&&d(o,["_url","name"],Hi(n,s)),o}function PS(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function kS(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function zS(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),o}function HS(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),o}function GS(n){const e={},o=u(n,["config"]);return o!=null&&zS(o,e),e}function qS(n){const e={},o=u(n,["config"]);return o!=null&&HS(o,e),e}function VS(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["cachedContents"],c)}return e}function BS(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["cachedContents"],c)}return e}function OS(n){const e={},o=u(n,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const c=u(n,["fileData"]);c!=null&&d(e,["fileData"],IS(c));const f=u(n,["functionCall"]);f!=null&&d(e,["functionCall"],DS(f));const y=u(n,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const m=u(n,["inlineData"]);m!=null&&d(e,["inlineData"],ES(m));const p=u(n,["text"]);p!=null&&d(e,["text"],p);const v=u(n,["thought"]);v!=null&&d(e,["thought"],v);const x=u(n,["thoughtSignature"]);x!=null&&d(e,["thoughtSignature"],x);const S=u(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function YS(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],bS(o));const s=u(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function JS(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["functionDeclarations"],v)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const c=u(n,["fileSearch"]);c!=null&&d(e,["fileSearch"],c);const f=u(n,["codeExecution"]);if(f!=null&&d(e,["codeExecution"],f),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],PS(y));const m=u(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],kS(m));const p=u(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function XS(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>US(S))),d(e,["functionDeclarations"],x)}const s=u(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const c=u(n,["computerUse"]);if(c!=null&&d(e,["computerUse"],c),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=u(n,["codeExecution"]);f!=null&&d(e,["codeExecution"],f);const y=u(n,["enterpriseWebSearch"]);y!=null&&d(e,["enterpriseWebSearch"],y);const m=u(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],m);const p=u(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const v=u(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function KS(n,e){const o={},s=u(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=u(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),o}function $S(n,e){const o={},s=u(n,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const r=u(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),o}function QS(n,e){const o={},s=u(e,["name"]);s!=null&&d(o,["_url","name"],Hi(n,s));const r=u(e,["config"]);return r!=null&&KS(r,o),o}function ZS(n,e){const o={},s=u(e,["name"]);s!=null&&d(o,["_url","name"],Hi(n,s));const r=u(e,["config"]);return r!=null&&$S(r,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WS extends zi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Oo(ki.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=AS(this.apiClient,e);return y=Me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const p=_S(this.apiClient,e);return y=Me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=LS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const p=FS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=RS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=wS(v),S=new Xy;return Object.assign(S,x),S})}else{const p=MS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=NS(v),S=new Xy;return Object.assign(S,x),S})}}async update(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=ZS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const p=QS(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=qS(e);return y=Me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=BS(v),S=new Ky;return Object.assign(S,x),S})}else{const p=GS(e);return y=Me("cachedContents",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=VS(v),S=new Ky;return Object.assign(S,x),S})}}}function sr(n,e){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(o[s[r]]=n[s[r]]);return o}function tm(n){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&n[e],s=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(n){return this instanceof Ke?(this.v=n,this):new Ke(n)}function ti(n,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(n,e||[]),r,c=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(_){return function(U){return Promise.resolve(U).then(_,x)}}function y(_,U){s[_]&&(r[_]=function(P){return new Promise(function(w,I){c.push([_,P,w,I])>1||m(_,P)})},U&&(r[_]=U(r[_])))}function m(_,U){try{p(s[_](U))}catch(P){S(c[0][3],P)}}function p(_){_.value instanceof Ke?Promise.resolve(_.value.v).then(v,x):S(c[0][2],_)}function v(_){m("next",_)}function x(_){m("throw",_)}function S(_,U){_(U),c.shift(),c.length&&m(c[0][0],c[0][1])}}function ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],o;return e?e.call(n):(n=typeof tm=="function"?tm(n):n[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(c){o[c]=n[c]&&function(f){return new Promise(function(y,m){f=n[c](f),r(y,m,f.done,f.value)})}}function r(c,f,y,m){Promise.resolve(m).then(function(p){c({value:p,done:y})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jS(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const o=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Km(o)}function Km(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eE(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nm(n){if(n===void 0||n.length===0)return[];const e=[],o=n.length;let s=0;for(;s<o;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let c=!0;for(;s<o&&n[s].role==="model";)r.push(n[s]),c&&!Km(n[s])&&(c=!1),s++;c?e.push(...r):e.pop()}return e}class tE{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new nE(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nE{constructor(e,o,s,r={},c=[]){this.apiClient=e,this.modelsModule=o,this.model=s,this.config=r,this.history=c,this.sendPromise=Promise.resolve(),eE(c)}async sendMessage(e){var o;await this.sendPromise;const s=fn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var c,f,y;const m=await r,p=(f=(c=m.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content,v=m.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let S=[];v!=null&&(S=(y=v.slice(x))!==null&&y!==void 0?y:[]);const _=p?[p]:[];this.recordHistory(s,_,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var o;await this.sendPromise;const s=fn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const c=await r;return this.processStreamResponse(c,s)}getHistory(e=!1){const o=e?nm(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return ti(this,arguments,function*(){var r,c,f,y,m,p;const v=[];try{for(var x=!0,S=ni(e),_;_=yield Ke(S.next()),r=_.done,!r;x=!0){y=_.value,x=!1;const U=y;if(jS(U)){const P=(p=(m=U.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;P!==void 0&&v.push(P)}yield yield Ke(U)}}catch(U){c={error:U}}finally{try{!x&&!r&&(f=S.return)&&(yield Ke(f.call(S)))}finally{if(c)throw c.error}}this.recordHistory(o,v)})}recordHistory(e,o,s){let r=[];o.length>0&&o.every(c=>c.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...nm(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ur extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ur.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iE(n){const e={},o=u(n,["file"]);return o!=null&&d(e,["file"],o),e}function oE(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function lE(n){const e={},o=u(n,["name"]);return o!=null&&d(e,["_url","file"],qm(o)),e}function sE(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function aE(n){const e={},o=u(n,["name"]);return o!=null&&d(e,["_url","file"],qm(o)),e}function rE(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),o}function uE(n){const e={},o=u(n,["config"]);return o!=null&&rE(o,e),e}function cE(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["files"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fE extends zi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Oo(ki.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=uE(e);return c=Me("files",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=cE(m),v=new yx;return Object.assign(v,p),v})}}async createInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=iE(e);return c=Me("upload/v1beta/files",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=oE(m),v=new mx;return Object.assign(v,p),v})}}async get(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=aE(e);return c=Me("files/{file}",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=lE(e);return c=Me("files/{file}",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=sE(m),v=new gx;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nr(n){const e={},o=u(n,["data"]);if(o!=null&&d(e,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function dE(n){const e={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>NE(c))),d(e,["parts"],r)}const s=u(n,["role"]);return s!=null&&d(e,["role"],s),e}function pE(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function hE(n){const e={},o=u(n,["id"]);o!=null&&d(e,["id"],o);const s=u(n,["args"]);s!=null&&d(e,["args"],s);const r=u(n,["name"]);if(r!=null&&d(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yE(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&d(e,["description"],o);const s=u(n,["name"]);s!=null&&d(e,["name"],s);const r=u(n,["parameters"]);r!=null&&d(e,["parameters"],r);const c=u(n,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const f=u(n,["response"]);f!=null&&d(e,["response"],f);const y=u(n,["responseJsonSchema"]);return y!=null&&d(e,["responseJsonSchema"],y),e}function mE(n){const e={},o=u(n,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const c=u(n,["candidateCount"]);c!=null&&d(e,["candidateCount"],c);const f=u(n,["enableAffectiveDialog"]);f!=null&&d(e,["enableAffectiveDialog"],f);const y=u(n,["frequencyPenalty"]);y!=null&&d(e,["frequencyPenalty"],y);const m=u(n,["logprobs"]);m!=null&&d(e,["logprobs"],m);const p=u(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const v=u(n,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const x=u(n,["presencePenalty"]);x!=null&&d(e,["presencePenalty"],x);const S=u(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const _=u(n,["responseMimeType"]);_!=null&&d(e,["responseMimeType"],_);const U=u(n,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const P=u(n,["responseSchema"]);P!=null&&d(e,["responseSchema"],P);const w=u(n,["routingConfig"]);w!=null&&d(e,["routingConfig"],w);const I=u(n,["seed"]);I!=null&&d(e,["seed"],I);const pe=u(n,["speechConfig"]);pe!=null&&d(e,["speechConfig"],pe);const le=u(n,["stopSequences"]);le!=null&&d(e,["stopSequences"],le);const he=u(n,["temperature"]);he!=null&&d(e,["temperature"],he);const Ce=u(n,["thinkingConfig"]);Ce!=null&&d(e,["thinkingConfig"],Ce);const _e=u(n,["topK"]);_e!=null&&d(e,["topK"],_e);const ve=u(n,["topP"]);if(ve!=null&&d(e,["topP"],ve),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gE(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function vE(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function xE(n,e){const o={},s=u(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const c=u(n,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const f=u(n,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const y=u(n,["topK"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","topK"],y);const m=u(n,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const x=u(n,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],Qc(x));const S=u(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const U=u(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],dE(fn(U)));const P=u(n,["tools"]);if(e!==void 0&&P!=null){let _e=Ll(P);Array.isArray(_e)&&(_e=_e.map(ve=>IE(Fl(ve)))),d(e,["setup","tools"],_e)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],wE(w));const I=u(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","inputAudioTranscription"],I);const pe=u(n,["outputAudioTranscription"]);e!==void 0&&pe!=null&&d(e,["setup","outputAudioTranscription"],pe);const le=u(n,["realtimeInputConfig"]);e!==void 0&&le!=null&&d(e,["setup","realtimeInputConfig"],le);const he=u(n,["contextWindowCompression"]);e!==void 0&&he!=null&&d(e,["setup","contextWindowCompression"],he);const Ce=u(n,["proactivity"]);if(e!==void 0&&Ce!=null&&d(e,["setup","proactivity"],Ce),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function SE(n,e){const o={},s=u(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],mE(s));const r=u(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const c=u(n,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const f=u(n,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const y=u(n,["topK"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","topK"],y);const m=u(n,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const x=u(n,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],Qc(x));const S=u(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const U=u(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],fn(U));const P=u(n,["tools"]);if(e!==void 0&&P!=null){let ve=Ll(P);Array.isArray(ve)&&(ve=ve.map(Je=>DE(Fl(Je)))),d(e,["setup","tools"],ve)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],w);const I=u(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","inputAudioTranscription"],I);const pe=u(n,["outputAudioTranscription"]);e!==void 0&&pe!=null&&d(e,["setup","outputAudioTranscription"],pe);const le=u(n,["realtimeInputConfig"]);e!==void 0&&le!=null&&d(e,["setup","realtimeInputConfig"],le);const he=u(n,["contextWindowCompression"]);e!==void 0&&he!=null&&d(e,["setup","contextWindowCompression"],he);const Ce=u(n,["proactivity"]);e!==void 0&&Ce!=null&&d(e,["setup","proactivity"],Ce);const _e=u(n,["explicitVadSignal"]);return e!==void 0&&_e!=null&&d(e,["setup","explicitVadSignal"],_e),o}function EE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["setup","model"],vt(n,s));const r=u(e,["config"]);return r!=null&&d(o,["config"],xE(r,o)),o}function TE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["setup","model"],vt(n,s));const r=u(e,["config"]);return r!=null&&d(o,["config"],SE(r,o)),o}function CE(n){const e={},o=u(n,["musicGenerationConfig"]);return o!=null&&d(e,["musicGenerationConfig"],o),e}function _E(n){const e={},o=u(n,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["weightedPrompts"],s)}return e}function AE(n){const e={},o=u(n,["media"]);if(o!=null){let p=Pm(o);Array.isArray(p)&&(p=p.map(v=>nr(v))),d(e,["mediaChunks"],p)}const s=u(n,["audio"]);s!=null&&d(e,["audio"],nr(zm(s)));const r=u(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const c=u(n,["video"]);c!=null&&d(e,["video"],nr(km(c)));const f=u(n,["text"]);f!=null&&d(e,["text"],f);const y=u(n,["activityStart"]);y!=null&&d(e,["activityStart"],y);const m=u(n,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function ME(n){const e={},o=u(n,["media"]);if(o!=null){let p=Pm(o);Array.isArray(p)&&(p=p.map(v=>v)),d(e,["mediaChunks"],p)}const s=u(n,["audio"]);s!=null&&d(e,["audio"],zm(s));const r=u(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const c=u(n,["video"]);c!=null&&d(e,["video"],km(c));const f=u(n,["text"]);f!=null&&d(e,["text"],f);const y=u(n,["activityStart"]);y!=null&&d(e,["activityStart"],y);const m=u(n,["activityEnd"]);return m!=null&&d(e,["activityEnd"],m),e}function RE(n){const e={},o=u(n,["setupComplete"]);o!=null&&d(e,["setupComplete"],o);const s=u(n,["serverContent"]);s!=null&&d(e,["serverContent"],s);const r=u(n,["toolCall"]);r!=null&&d(e,["toolCall"],r);const c=u(n,["toolCallCancellation"]);c!=null&&d(e,["toolCallCancellation"],c);const f=u(n,["usageMetadata"]);f!=null&&d(e,["usageMetadata"],bE(f));const y=u(n,["goAway"]);y!=null&&d(e,["goAway"],y);const m=u(n,["sessionResumptionUpdate"]);m!=null&&d(e,["sessionResumptionUpdate"],m);const p=u(n,["voiceActivityDetectionSignal"]);return p!=null&&d(e,["voiceActivityDetectionSignal"],p),e}function NE(n){const e={},o=u(n,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const c=u(n,["fileData"]);c!=null&&d(e,["fileData"],pE(c));const f=u(n,["functionCall"]);f!=null&&d(e,["functionCall"],hE(f));const y=u(n,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const m=u(n,["inlineData"]);m!=null&&d(e,["inlineData"],nr(m));const p=u(n,["text"]);p!=null&&d(e,["text"],p);const v=u(n,["thought"]);v!=null&&d(e,["thought"],v);const x=u(n,["thoughtSignature"]);x!=null&&d(e,["thoughtSignature"],x);const S=u(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function wE(n){const e={},o=u(n,["handle"]);if(o!=null&&d(e,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function IE(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["functionDeclarations"],v)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const c=u(n,["fileSearch"]);c!=null&&d(e,["fileSearch"],c);const f=u(n,["codeExecution"]);if(f!=null&&d(e,["codeExecution"],f),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],gE(y));const m=u(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],vE(m));const p=u(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function DE(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>yE(S))),d(e,["functionDeclarations"],x)}const s=u(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const c=u(n,["computerUse"]);if(c!=null&&d(e,["computerUse"],c),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=u(n,["codeExecution"]);f!=null&&d(e,["codeExecution"],f);const y=u(n,["enterpriseWebSearch"]);y!=null&&d(e,["enterpriseWebSearch"],y);const m=u(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],m);const p=u(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const v=u(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function bE(n){const e={},o=u(n,["promptTokenCount"]);o!=null&&d(e,["promptTokenCount"],o);const s=u(n,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const r=u(n,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const c=u(n,["toolUsePromptTokenCount"]);c!=null&&d(e,["toolUsePromptTokenCount"],c);const f=u(n,["thoughtsTokenCount"]);f!=null&&d(e,["thoughtsTokenCount"],f);const y=u(n,["totalTokenCount"]);y!=null&&d(e,["totalTokenCount"],y);const m=u(n,["promptTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(U=>U)),d(e,["promptTokensDetails"],_)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(U=>U)),d(e,["cacheTokensDetails"],_)}const v=u(n,["candidatesTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(U=>U)),d(e,["responseTokensDetails"],_)}const x=u(n,["toolUsePromptTokensDetails"]);if(x!=null){let _=x;Array.isArray(_)&&(_=_.map(U=>U)),d(e,["toolUsePromptTokensDetails"],_)}const S=u(n,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UE(n){const e={},o=u(n,["data"]);if(o!=null&&d(e,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function FE(n){const e={},o=u(n,["content"]);o!=null&&d(e,["content"],o);const s=u(n,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],LE(s));const r=u(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const c=u(n,["finishReason"]);c!=null&&d(e,["finishReason"],c);const f=u(n,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const y=u(n,["groundingMetadata"]);y!=null&&d(e,["groundingMetadata"],y);const m=u(n,["index"]);m!=null&&d(e,["index"],m);const p=u(n,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const v=u(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(_=>_)),d(e,["safetyRatings"],S)}const x=u(n,["urlContextMetadata"]);return x!=null&&d(e,["urlContextMetadata"],x),e}function LE(n){const e={},o=u(n,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(e,["citations"],s)}return e}function PE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let c=On(r);Array.isArray(c)&&(c=c.map(f=>f)),d(o,["contents"],c)}return o}function kE(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>c)),d(e,["tokensInfo"],r)}return e}function zE(n){const e={},o=u(n,["values"]);o!=null&&d(e,["values"],o);const s=u(n,["statistics"]);return s!=null&&d(e,["statistics"],HE(s)),e}function HE(n){const e={},o=u(n,["truncated"]);o!=null&&d(e,["truncated"],o);const s=u(n,["token_count"]);return s!=null&&d(e,["tokenCount"],s),e}function cr(n){const e={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>KT(c))),d(e,["parts"],r)}const s=u(n,["role"]);return s!=null&&d(e,["role"],s),e}function GE(n){const e={},o=u(n,["controlType"]);o!=null&&d(e,["controlType"],o);const s=u(n,["enableControlImageComputation"]);return s!=null&&d(e,["computeControl"],s),e}function qE(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function VE(n,e){const o={},s=u(n,["systemInstruction"]);e!==void 0&&s!=null&&d(e,["systemInstruction"],fn(s));const r=u(n,["tools"]);if(e!==void 0&&r!=null){let f=r;Array.isArray(f)&&(f=f.map(y=>Wm(y))),d(e,["tools"],f)}const c=u(n,["generationConfig"]);return e!==void 0&&c!=null&&d(e,["generationConfig"],UT(c)),o}function BE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let f=On(r);Array.isArray(f)&&(f=f.map(y=>cr(y))),d(o,["contents"],f)}const c=u(e,["config"]);return c!=null&&qE(c),o}function OE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let f=On(r);Array.isArray(f)&&(f=f.map(y=>y)),d(o,["contents"],f)}const c=u(e,["config"]);return c!=null&&VE(c,o),o}function YE(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);s!=null&&d(e,["totalTokens"],s);const r=u(n,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function JE(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["totalTokens"]);return s!=null&&d(e,["totalTokens"],s),e}function XE(n,e){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],vt(n,s)),o}function KE(n,e){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],vt(n,s)),o}function $E(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function QE(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}function ZE(n,e){const o={},s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const c=u(n,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const f=u(n,["aspectRatio"]);e!==void 0&&f!=null&&d(e,["parameters","aspectRatio"],f);const y=u(n,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=u(n,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const x=u(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const _=u(n,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const U=u(n,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const P=u(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","compressionQuality"],P);const w=u(n,["addWatermark"]);e!==void 0&&w!=null&&d(e,["parameters","addWatermark"],w);const I=u(n,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);const pe=u(n,["editMode"]);e!==void 0&&pe!=null&&d(e,["parameters","editMode"],pe);const le=u(n,["baseSteps"]);return e!==void 0&&le!=null&&d(e,["parameters","editConfig","baseSteps"],le),o}function WE(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const c=u(e,["referenceImages"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(m=>eC(m))),d(o,["instances[0]","referenceImages"],y)}const f=u(e,["config"]);return f!=null&&ZE(f,o),o}function jE(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>fr(c))),d(e,["generatedImages"],r)}return e}function eT(n,e){const o={},s=u(n,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const r=u(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const c=u(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function tT(n,e){const o={},s=u(n,["taskType"]);e!==void 0&&s!=null&&d(e,["instances[]","task_type"],s);const r=u(n,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const c=u(n,["outputDimensionality"]);e!==void 0&&c!=null&&d(e,["parameters","outputDimensionality"],c);const f=u(n,["mimeType"]);e!==void 0&&f!=null&&d(e,["instances[]","mimeType"],f);const y=u(n,["autoTruncate"]);return e!==void 0&&y!=null&&d(e,["parameters","autoTruncate"],y),o}function nT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let y=Xc(n,r);Array.isArray(y)&&(y=y.map(m=>m)),d(o,["requests[]","content"],y)}const c=u(e,["config"]);c!=null&&eT(c,o);const f=u(e,["model"]);return f!==void 0&&d(o,["requests[]","model"],vt(n,f)),o}function iT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let f=Xc(n,r);Array.isArray(f)&&(f=f.map(y=>y)),d(o,["instances[]","content"],f)}const c=u(e,["config"]);return c!=null&&tT(c,o),o}function oT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["embeddings"],c)}const r=u(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function lT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["predictions[]","embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>zE(f))),d(e,["embeddings"],c)}const r=u(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function sT(n){const e={},o=u(n,["endpoint"]);o!=null&&d(e,["name"],o);const s=u(n,["deployedModelId"]);return s!=null&&d(e,["deployedModelId"],s),e}function aT(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function rT(n){const e={},o=u(n,["id"]);o!=null&&d(e,["id"],o);const s=u(n,["args"]);s!=null&&d(e,["args"],s);const r=u(n,["name"]);if(r!=null&&d(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uT(n){const e={},o=u(n,["mode"]);o!=null&&d(e,["mode"],o);const s=u(n,["allowedFunctionNames"]);if(s!=null&&d(e,["allowedFunctionNames"],s),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cT(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=u(n,["description"]);o!=null&&d(e,["description"],o);const s=u(n,["name"]);s!=null&&d(e,["name"],s);const r=u(n,["parameters"]);r!=null&&d(e,["parameters"],r);const c=u(n,["parametersJsonSchema"]);c!=null&&d(e,["parametersJsonSchema"],c);const f=u(n,["response"]);f!=null&&d(e,["response"],f);const y=u(n,["responseJsonSchema"]);return y!=null&&d(e,["responseJsonSchema"],y),e}function fT(n,e,o){const s={},r=u(e,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],cr(fn(r)));const c=u(e,["temperature"]);c!=null&&d(s,["temperature"],c);const f=u(e,["topP"]);f!=null&&d(s,["topP"],f);const y=u(e,["topK"]);y!=null&&d(s,["topK"],y);const m=u(e,["candidateCount"]);m!=null&&d(s,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const x=u(e,["responseLogprobs"]);x!=null&&d(s,["responseLogprobs"],x);const S=u(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const _=u(e,["presencePenalty"]);_!=null&&d(s,["presencePenalty"],_);const U=u(e,["frequencyPenalty"]);U!=null&&d(s,["frequencyPenalty"],U);const P=u(e,["seed"]);P!=null&&d(s,["seed"],P);const w=u(e,["responseMimeType"]);w!=null&&d(s,["responseMimeType"],w);const I=u(e,["responseSchema"]);I!=null&&d(s,["responseSchema"],Kc(I));const pe=u(e,["responseJsonSchema"]);if(pe!=null&&d(s,["responseJsonSchema"],pe),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const le=u(e,["safetySettings"]);if(o!==void 0&&le!=null){let nt=le;Array.isArray(nt)&&(nt=nt.map(ht=>tC(ht))),d(o,["safetySettings"],nt)}const he=u(e,["tools"]);if(o!==void 0&&he!=null){let nt=Ll(he);Array.isArray(nt)&&(nt=nt.map(ht=>rC(Fl(ht)))),d(o,["tools"],nt)}const Ce=u(e,["toolConfig"]);if(o!==void 0&&Ce!=null&&d(o,["toolConfig"],aC(Ce)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _e=u(e,["cachedContent"]);o!==void 0&&_e!=null&&d(o,["cachedContent"],Hi(n,_e));const ve=u(e,["responseModalities"]);ve!=null&&d(s,["responseModalities"],ve);const Je=u(e,["mediaResolution"]);Je!=null&&d(s,["mediaResolution"],Je);const Ae=u(e,["speechConfig"]);if(Ae!=null&&d(s,["speechConfig"],$c(Ae)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ve=u(e,["thinkingConfig"]);Ve!=null&&d(s,["thinkingConfig"],Ve);const Ze=u(e,["imageConfig"]);Ze!=null&&d(s,["imageConfig"],zT(Ze));const it=u(e,["enableEnhancedCivicAnswers"]);return it!=null&&d(s,["enableEnhancedCivicAnswers"],it),s}function dT(n,e,o){const s={},r=u(e,["systemInstruction"]);o!==void 0&&r!=null&&d(o,["systemInstruction"],fn(r));const c=u(e,["temperature"]);c!=null&&d(s,["temperature"],c);const f=u(e,["topP"]);f!=null&&d(s,["topP"],f);const y=u(e,["topK"]);y!=null&&d(s,["topK"],y);const m=u(e,["candidateCount"]);m!=null&&d(s,["candidateCount"],m);const p=u(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const x=u(e,["responseLogprobs"]);x!=null&&d(s,["responseLogprobs"],x);const S=u(e,["logprobs"]);S!=null&&d(s,["logprobs"],S);const _=u(e,["presencePenalty"]);_!=null&&d(s,["presencePenalty"],_);const U=u(e,["frequencyPenalty"]);U!=null&&d(s,["frequencyPenalty"],U);const P=u(e,["seed"]);P!=null&&d(s,["seed"],P);const w=u(e,["responseMimeType"]);w!=null&&d(s,["responseMimeType"],w);const I=u(e,["responseSchema"]);I!=null&&d(s,["responseSchema"],Kc(I));const pe=u(e,["responseJsonSchema"]);pe!=null&&d(s,["responseJsonSchema"],pe);const le=u(e,["routingConfig"]);le!=null&&d(s,["routingConfig"],le);const he=u(e,["modelSelectionConfig"]);he!=null&&d(s,["modelConfig"],he);const Ce=u(e,["safetySettings"]);if(o!==void 0&&Ce!=null){let j=Ce;Array.isArray(j)&&(j=j.map(xe=>xe)),d(o,["safetySettings"],j)}const _e=u(e,["tools"]);if(o!==void 0&&_e!=null){let j=Ll(_e);Array.isArray(j)&&(j=j.map(xe=>Wm(Fl(xe)))),d(o,["tools"],j)}const ve=u(e,["toolConfig"]);o!==void 0&&ve!=null&&d(o,["toolConfig"],ve);const Je=u(e,["labels"]);o!==void 0&&Je!=null&&d(o,["labels"],Je);const Ae=u(e,["cachedContent"]);o!==void 0&&Ae!=null&&d(o,["cachedContent"],Hi(n,Ae));const Ve=u(e,["responseModalities"]);Ve!=null&&d(s,["responseModalities"],Ve);const Ze=u(e,["mediaResolution"]);Ze!=null&&d(s,["mediaResolution"],Ze);const it=u(e,["speechConfig"]);it!=null&&d(s,["speechConfig"],$c(it));const nt=u(e,["audioTimestamp"]);nt!=null&&d(s,["audioTimestamp"],nt);const ht=u(e,["thinkingConfig"]);ht!=null&&d(s,["thinkingConfig"],ht);const yt=u(e,["imageConfig"]);if(yt!=null&&d(s,["imageConfig"],HT(yt)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function im(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let f=On(r);Array.isArray(f)&&(f=f.map(y=>cr(y))),d(o,["contents"],f)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],fT(n,c,o)),o}function om(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["contents"]);if(r!=null){let f=On(r);Array.isArray(f)&&(f=f.map(y=>y)),d(o,["contents"],f)}const c=u(e,["config"]);return c!=null&&d(o,["generationConfig"],dT(n,c,o)),o}function lm(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>FE(p))),d(e,["candidates"],m)}const r=u(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const c=u(n,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const f=u(n,["responseId"]);f!=null&&d(e,["responseId"],f);const y=u(n,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function sm(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),d(e,["candidates"],p)}const r=u(n,["createTime"]);r!=null&&d(e,["createTime"],r);const c=u(n,["modelVersion"]);c!=null&&d(e,["modelVersion"],c);const f=u(n,["promptFeedback"]);f!=null&&d(e,["promptFeedback"],f);const y=u(n,["responseId"]);y!=null&&d(e,["responseId"],y);const m=u(n,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function pT(n,e){const o={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=u(n,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const c=u(n,["guidanceScale"]);if(e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const y=u(n,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const m=u(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const p=u(n,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const v=u(n,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const x=u(n,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const S=u(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=u(n,["imageSize"]);if(e!==void 0&&_!=null&&d(e,["parameters","sampleImageSize"],_),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function hT(n,e){const o={},s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const c=u(n,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const f=u(n,["aspectRatio"]);e!==void 0&&f!=null&&d(e,["parameters","aspectRatio"],f);const y=u(n,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=u(n,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const x=u(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&d(e,["parameters","includeSafetyAttributes"],x);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const _=u(n,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const U=u(n,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const P=u(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&d(e,["parameters","outputOptions","compressionQuality"],P);const w=u(n,["addWatermark"]);e!==void 0&&w!=null&&d(e,["parameters","addWatermark"],w);const I=u(n,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);const pe=u(n,["imageSize"]);e!==void 0&&pe!=null&&d(e,["parameters","sampleImageSize"],pe);const le=u(n,["enhancePrompt"]);return e!==void 0&&le!=null&&d(e,["parameters","enhancePrompt"],le),o}function yT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const c=u(e,["config"]);return c!=null&&pT(c,o),o}function mT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const c=u(e,["config"]);return c!=null&&hT(c,o),o}function gT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>wT(f))),d(e,["generatedImages"],c)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],Qm(r)),e}function vT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>fr(f))),d(e,["generatedImages"],c)}const r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],Zm(r)),e}function xT(n,e){const o={},s=u(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(n,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=u(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const f=u(n,["resolution"]);e!==void 0&&f!=null&&d(e,["parameters","resolution"],f);const y=u(n,["personGeneration"]);if(e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=u(n,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const p=u(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&d(e,["parameters","enhancePrompt"],p),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=u(n,["lastFrame"]);e!==void 0&&v!=null&&d(e,["instances[0]","lastFrame"],dr(v));const x=u(n,["referenceImages"]);if(e!==void 0&&x!=null){let S=x;Array.isArray(S)&&(S=S.map(_=>EC(_))),d(e,["instances[0]","referenceImages"],S)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function ST(n,e){const o={},s=u(n,["numberOfVideos"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=u(n,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const c=u(n,["fps"]);e!==void 0&&c!=null&&d(e,["parameters","fps"],c);const f=u(n,["durationSeconds"]);e!==void 0&&f!=null&&d(e,["parameters","durationSeconds"],f);const y=u(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=u(n,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const p=u(n,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const x=u(n,["pubsubTopic"]);e!==void 0&&x!=null&&d(e,["parameters","pubsubTopic"],x);const S=u(n,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const _=u(n,["enhancePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","enhancePrompt"],_);const U=u(n,["generateAudio"]);e!==void 0&&U!=null&&d(e,["parameters","generateAudio"],U);const P=u(n,["lastFrame"]);e!==void 0&&P!=null&&d(e,["instances[0]","lastFrame"],ii(P));const w=u(n,["referenceImages"]);if(e!==void 0&&w!=null){let le=w;Array.isArray(le)&&(le=le.map(he=>TC(he))),d(e,["instances[0]","referenceImages"],le)}const I=u(n,["mask"]);e!==void 0&&I!=null&&d(e,["instances[0]","mask"],SC(I));const pe=u(n,["compressionQuality"]);return e!==void 0&&pe!=null&&d(e,["parameters","compressionQuality"],pe),o}function ET(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response","generateVideoResponse"]);return f!=null&&d(e,["response"],AT(f)),e}function TT(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response"]);return f!=null&&d(e,["response"],MT(f)),e}function CT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],dr(c));const f=u(e,["video"]);f!=null&&d(o,["instances[0]","video"],jm(f));const y=u(e,["source"]);y!=null&&RT(y,o);const m=u(e,["config"]);return m!=null&&xT(m,o),o}function _T(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const c=u(e,["image"]);c!=null&&d(o,["instances[0]","image"],ii(c));const f=u(e,["video"]);f!=null&&d(o,["instances[0]","video"],eg(f));const y=u(e,["source"]);y!=null&&NT(y,o);const m=u(e,["config"]);return m!=null&&ST(m,o),o}function AT(n){const e={},o=u(n,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>DT(f))),d(e,["generatedVideos"],c)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function MT(n){const e={},o=u(n,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>bT(f))),d(e,["generatedVideos"],c)}const s=u(n,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const r=u(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function RT(n,e){const o={},s=u(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=u(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],dr(r));const c=u(n,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],jm(c)),o}function NT(n,e){const o={},s=u(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=u(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ii(r));const c=u(n,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],eg(c)),o}function wT(n){const e={},o=u(n,["_self"]);o!=null&&d(e,["image"],GT(o));const s=u(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=u(n,["_self"]);return r!=null&&d(e,["safetyAttributes"],Qm(r)),e}function fr(n){const e={},o=u(n,["_self"]);o!=null&&d(e,["image"],$m(o));const s=u(n,["raiFilteredReason"]);s!=null&&d(e,["raiFilteredReason"],s);const r=u(n,["_self"]);r!=null&&d(e,["safetyAttributes"],Zm(r));const c=u(n,["prompt"]);return c!=null&&d(e,["enhancedPrompt"],c),e}function IT(n){const e={},o=u(n,["_self"]);o!=null&&d(e,["mask"],$m(o));const s=u(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>c)),d(e,["labels"],r)}return e}function DT(n){const e={},o=u(n,["video"]);return o!=null&&d(e,["video"],vC(o)),e}function bT(n){const e={},o=u(n,["_self"]);return o!=null&&d(e,["video"],xC(o)),e}function UT(n){const e={},o=u(n,["modelSelectionConfig"]);o!=null&&d(e,["modelConfig"],o);const s=u(n,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const r=u(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const c=u(n,["candidateCount"]);c!=null&&d(e,["candidateCount"],c);const f=u(n,["enableAffectiveDialog"]);f!=null&&d(e,["enableAffectiveDialog"],f);const y=u(n,["frequencyPenalty"]);y!=null&&d(e,["frequencyPenalty"],y);const m=u(n,["logprobs"]);m!=null&&d(e,["logprobs"],m);const p=u(n,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const v=u(n,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const x=u(n,["presencePenalty"]);x!=null&&d(e,["presencePenalty"],x);const S=u(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const _=u(n,["responseMimeType"]);_!=null&&d(e,["responseMimeType"],_);const U=u(n,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const P=u(n,["responseSchema"]);P!=null&&d(e,["responseSchema"],P);const w=u(n,["routingConfig"]);w!=null&&d(e,["routingConfig"],w);const I=u(n,["seed"]);I!=null&&d(e,["seed"],I);const pe=u(n,["speechConfig"]);pe!=null&&d(e,["speechConfig"],pe);const le=u(n,["stopSequences"]);le!=null&&d(e,["stopSequences"],le);const he=u(n,["temperature"]);he!=null&&d(e,["temperature"],he);const Ce=u(n,["thinkingConfig"]);Ce!=null&&d(e,["thinkingConfig"],Ce);const _e=u(n,["topK"]);_e!=null&&d(e,["topK"],_e);const ve=u(n,["topP"]);if(ve!=null&&d(e,["topP"],ve),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function FT(n,e){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],vt(n,s)),o}function LT(n,e){const o={},s=u(e,["model"]);return s!=null&&d(o,["_url","name"],vt(n,s)),o}function PT(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function kT(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function zT(n){const e={},o=u(n,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=u(n,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HT(n){const e={},o=u(n,["aspectRatio"]);o!=null&&d(e,["aspectRatio"],o);const s=u(n,["imageSize"]);s!=null&&d(e,["imageSize"],s);const r=u(n,["outputMimeType"]);r!=null&&d(e,["imageOutputOptions","mimeType"],r);const c=u(n,["outputCompressionQuality"]);return c!=null&&d(e,["imageOutputOptions","compressionQuality"],c),e}function GT(n){const e={},o=u(n,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],go(o));const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function $m(n){const e={},o=u(n,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&d(e,["imageBytes"],go(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function dr(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(n,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],go(o));const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function ii(n){const e={},o=u(n,["gcsUri"]);o!=null&&d(e,["gcsUri"],o);const s=u(n,["imageBytes"]);s!=null&&d(e,["bytesBase64Encoded"],go(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function qT(n,e,o){const s={},r=u(e,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const c=u(e,["pageToken"]);o!==void 0&&c!=null&&d(o,["_query","pageToken"],c);const f=u(e,["filter"]);o!==void 0&&f!=null&&d(o,["_query","filter"],f);const y=u(e,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],Vm(n,y)),s}function VT(n,e,o){const s={},r=u(e,["pageSize"]);o!==void 0&&r!=null&&d(o,["_query","pageSize"],r);const c=u(e,["pageToken"]);o!==void 0&&c!=null&&d(o,["_query","pageToken"],c);const f=u(e,["filter"]);o!==void 0&&f!=null&&d(o,["_query","filter"],f);const y=u(e,["queryBase"]);return o!==void 0&&y!=null&&d(o,["_url","models_url"],Vm(n,y)),s}function BT(n,e){const o={},s=u(e,["config"]);return s!=null&&qT(n,s,o),o}function OT(n,e){const o={},s=u(e,["config"]);return s!=null&&VT(n,s,o),o}function YT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let c=Bm(r);Array.isArray(c)&&(c=c.map(f=>Dc(f))),d(e,["models"],c)}return e}function JT(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["_self"]);if(r!=null){let c=Bm(r);Array.isArray(c)&&(c=c.map(f=>bc(f))),d(e,["models"],c)}return e}function XT(n){const e={},o=u(n,["maskMode"]);o!=null&&d(e,["maskMode"],o);const s=u(n,["segmentationClasses"]);s!=null&&d(e,["maskClasses"],s);const r=u(n,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function Dc(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=u(n,["description"]);r!=null&&d(e,["description"],r);const c=u(n,["version"]);c!=null&&d(e,["version"],c);const f=u(n,["_self"]);f!=null&&d(e,["tunedModelInfo"],uC(f));const y=u(n,["inputTokenLimit"]);y!=null&&d(e,["inputTokenLimit"],y);const m=u(n,["outputTokenLimit"]);m!=null&&d(e,["outputTokenLimit"],m);const p=u(n,["supportedGenerationMethods"]);p!=null&&d(e,["supportedActions"],p);const v=u(n,["temperature"]);v!=null&&d(e,["temperature"],v);const x=u(n,["maxTemperature"]);x!=null&&d(e,["maxTemperature"],x);const S=u(n,["topP"]);S!=null&&d(e,["topP"],S);const _=u(n,["topK"]);_!=null&&d(e,["topK"],_);const U=u(n,["thinking"]);return U!=null&&d(e,["thinking"],U),e}function bc(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["displayName"]);s!=null&&d(e,["displayName"],s);const r=u(n,["description"]);r!=null&&d(e,["description"],r);const c=u(n,["versionId"]);c!=null&&d(e,["version"],c);const f=u(n,["deployedModels"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(S=>sT(S))),d(e,["endpoints"],x)}const y=u(n,["labels"]);y!=null&&d(e,["labels"],y);const m=u(n,["_self"]);m!=null&&d(e,["tunedModelInfo"],cC(m));const p=u(n,["defaultCheckpointId"]);p!=null&&d(e,["defaultCheckpointId"],p);const v=u(n,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(S=>S)),d(e,["checkpoints"],x)}return e}function KT(n){const e={},o=u(n,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const c=u(n,["fileData"]);c!=null&&d(e,["fileData"],aT(c));const f=u(n,["functionCall"]);f!=null&&d(e,["functionCall"],rT(f));const y=u(n,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const m=u(n,["inlineData"]);m!=null&&d(e,["inlineData"],UE(m));const p=u(n,["text"]);p!=null&&d(e,["text"],p);const v=u(n,["thought"]);v!=null&&d(e,["thought"],v);const x=u(n,["thoughtSignature"]);x!=null&&d(e,["thoughtSignature"],x);const S=u(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function $T(n){const e={},o=u(n,["productImage"]);return o!=null&&d(e,["image"],ii(o)),e}function QT(n,e){const o={},s=u(n,["numberOfImages"]);e!==void 0&&s!=null&&d(e,["parameters","sampleCount"],s);const r=u(n,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const c=u(n,["outputGcsUri"]);e!==void 0&&c!=null&&d(e,["parameters","storageUri"],c);const f=u(n,["seed"]);e!==void 0&&f!=null&&d(e,["parameters","seed"],f);const y=u(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const m=u(n,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const p=u(n,["addWatermark"]);e!==void 0&&p!=null&&d(e,["parameters","addWatermark"],p);const v=u(n,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const x=u(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","compressionQuality"],x);const S=u(n,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const _=u(n,["labels"]);return e!==void 0&&_!=null&&d(e,["labels"],_),o}function ZT(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["source"]);r!=null&&jT(r,o);const c=u(e,["config"]);return c!=null&&QT(c,o),o}function WT(n){const e={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>fr(r))),d(e,["generatedImages"],s)}return e}function jT(n,e){const o={},s=u(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=u(n,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],ii(r));const c=u(n,["productImages"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(y=>$T(y))),d(e,["instances[0]","productImages"],f)}return o}function eC(n){const e={},o=u(n,["referenceImage"]);o!=null&&d(e,["referenceImage"],ii(o));const s=u(n,["referenceId"]);s!=null&&d(e,["referenceId"],s);const r=u(n,["referenceType"]);r!=null&&d(e,["referenceType"],r);const c=u(n,["maskImageConfig"]);c!=null&&d(e,["maskImageConfig"],XT(c));const f=u(n,["controlImageConfig"]);f!=null&&d(e,["controlImageConfig"],GE(f));const y=u(n,["styleImageConfig"]);y!=null&&d(e,["styleImageConfig"],y);const m=u(n,["subjectImageConfig"]);return m!=null&&d(e,["subjectImageConfig"],m),e}function Qm(n){const e={},o=u(n,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=u(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function Zm(n){const e={},o=u(n,["safetyAttributes","categories"]);o!=null&&d(e,["categories"],o);const s=u(n,["safetyAttributes","scores"]);s!=null&&d(e,["scores"],s);const r=u(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function tC(n){const e={},o=u(n,["category"]);if(o!=null&&d(e,["category"],o),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(n,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function nC(n){const e={},o=u(n,["image"]);return o!=null&&d(e,["image"],ii(o)),e}function iC(n,e){const o={},s=u(n,["mode"]);e!==void 0&&s!=null&&d(e,["parameters","mode"],s);const r=u(n,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const c=u(n,["confidenceThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","confidenceThreshold"],c);const f=u(n,["maskDilation"]);e!==void 0&&f!=null&&d(e,["parameters","maskDilation"],f);const y=u(n,["binaryColorThreshold"]);e!==void 0&&y!=null&&d(e,["parameters","binaryColorThreshold"],y);const m=u(n,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),o}function oC(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["source"]);r!=null&&sC(r,o);const c=u(e,["config"]);return c!=null&&iC(c,o),o}function lC(n){const e={},o=u(n,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>IT(r))),d(e,["generatedMasks"],s)}return e}function sC(n,e){const o={},s=u(n,["prompt"]);e!==void 0&&s!=null&&d(e,["instances[0]","prompt"],s);const r=u(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ii(r));const c=u(n,["scribbleImage"]);return e!==void 0&&c!=null&&d(e,["instances[0]","scribble"],nC(c)),o}function aC(n){const e={},o=u(n,["functionCallingConfig"]);o!=null&&d(e,["functionCallingConfig"],uT(o));const s=u(n,["retrievalConfig"]);return s!=null&&d(e,["retrievalConfig"],s),e}function rC(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["functionDeclarations"],v)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const c=u(n,["fileSearch"]);c!=null&&d(e,["fileSearch"],c);const f=u(n,["codeExecution"]);if(f!=null&&d(e,["codeExecution"],f),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],PT(y));const m=u(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],kT(m));const p=u(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function Wm(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(S=>cT(S))),d(e,["functionDeclarations"],x)}const s=u(n,["retrieval"]);s!=null&&d(e,["retrieval"],s);const r=u(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const c=u(n,["computerUse"]);if(c!=null&&d(e,["computerUse"],c),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=u(n,["codeExecution"]);f!=null&&d(e,["codeExecution"],f);const y=u(n,["enterpriseWebSearch"]);y!=null&&d(e,["enterpriseWebSearch"],y);const m=u(n,["googleMaps"]);m!=null&&d(e,["googleMaps"],m);const p=u(n,["googleSearch"]);p!=null&&d(e,["googleSearch"],p);const v=u(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function uC(n){const e={},o=u(n,["baseModel"]);o!=null&&d(e,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function cC(n){const e={},o=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(e,["baseModel"],o);const s=u(n,["createTime"]);s!=null&&d(e,["createTime"],s);const r=u(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function fC(n,e){const o={},s=u(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=u(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const c=u(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function dC(n,e){const o={},s=u(n,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const r=u(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const c=u(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),o}function pC(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","name"],vt(n,s));const r=u(e,["config"]);return r!=null&&fC(r,o),o}function hC(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["config"]);return r!=null&&dC(r,o),o}function yC(n,e){const o={},s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const r=u(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const c=u(n,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const f=u(n,["includeRaiReason"]);e!==void 0&&f!=null&&d(e,["parameters","includeRaiReason"],f);const y=u(n,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const m=u(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const p=u(n,["enhanceInputImage"]);e!==void 0&&p!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=u(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const x=u(n,["labels"]);e!==void 0&&x!=null&&d(e,["labels"],x);const S=u(n,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const _=u(n,["mode"]);return e!==void 0&&_!=null&&d(e,["parameters","mode"],_),o}function mC(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["_url","model"],vt(n,s));const r=u(e,["image"]);r!=null&&d(o,["instances[0]","image"],ii(r));const c=u(e,["upscaleFactor"]);c!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],c);const f=u(e,["config"]);return f!=null&&yC(f,o),o}function gC(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>fr(c))),d(e,["generatedImages"],r)}return e}function vC(n){const e={},o=u(n,["uri"]);o!=null&&d(e,["uri"],o);const s=u(n,["encodedVideo"]);s!=null&&d(e,["videoBytes"],go(s));const r=u(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function xC(n){const e={},o=u(n,["gcsUri"]);o!=null&&d(e,["uri"],o);const s=u(n,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],go(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function SC(n){const e={},o=u(n,["image"]);o!=null&&d(e,["_self"],ii(o));const s=u(n,["maskMode"]);return s!=null&&d(e,["maskMode"],s),e}function EC(n){const e={},o=u(n,["image"]);o!=null&&d(e,["image"],dr(o));const s=u(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function TC(n){const e={},o=u(n,["image"]);o!=null&&d(e,["image"],ii(o));const s=u(n,["referenceType"]);return s!=null&&d(e,["referenceType"],s),e}function jm(n){const e={},o=u(n,["uri"]);o!=null&&d(e,["uri"],o);const s=u(n,["videoBytes"]);s!=null&&d(e,["encodedVideo"],go(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function eg(n){const e={},o=u(n,["uri"]);o!=null&&d(e,["gcsUri"],o);const s=u(n,["videoBytes"]);s!=null&&d(e,["bytesBase64Encoded"],go(s));const r=u(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CC(n,e){const o={},s=u(n,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),o}function _C(n){const e={},o=u(n,["config"]);return o!=null&&CC(o,e),e}function AC(n,e){const o={},s=u(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),o}function MC(n){const e={},o=u(n,["name"]);o!=null&&d(e,["_url","name"],o);const s=u(n,["config"]);return s!=null&&AC(s,e),e}function RC(n){const e={},o=u(n,["name"]);return o!=null&&d(e,["_url","name"],o),e}function NC(n,e){const o={},s=u(n,["customMetadata"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["customMetadata"],c)}const r=u(n,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),o}function wC(n){const e={},o=u(n,["name"]);o!=null&&d(e,["name"],o);const s=u(n,["metadata"]);s!=null&&d(e,["metadata"],s);const r=u(n,["done"]);r!=null&&d(e,["done"],r);const c=u(n,["error"]);c!=null&&d(e,["error"],c);const f=u(n,["response"]);return f!=null&&d(e,["response"],DC(f)),e}function IC(n){const e={},o=u(n,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const s=u(n,["fileName"]);s!=null&&d(e,["fileName"],s);const r=u(n,["config"]);return r!=null&&NC(r,e),e}function DC(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["parent"]);s!=null&&d(e,["parent"],s);const r=u(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function bC(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),o}function UC(n){const e={},o=u(n,["config"]);return o!=null&&bC(o,e),e}function FC(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["fileSearchStores"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["fileSearchStores"],c)}return e}function tg(n,e){const o={},s=u(n,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const r=u(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const c=u(n,["customMetadata"]);if(e!==void 0&&c!=null){let y=c;Array.isArray(y)&&(y=y.map(m=>m)),d(e,["customMetadata"],y)}const f=u(n,["chunkingConfig"]);return e!==void 0&&f!=null&&d(e,["chunkingConfig"],f),o}function LC(n){const e={},o=u(n,["fileSearchStoreName"]);o!=null&&d(e,["_url","file_search_store_name"],o);const s=u(n,["config"]);return s!=null&&tg(s,e),e}function PC(n){const e={},o=u(n,["sdkHttpResponse"]);return o!=null&&d(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kC="Content-Type",zC="X-Server-Timeout",HC="User-Agent",Uc="x-goog-api-client",GC="1.34.0",qC=`google-genai-sdk/${GC}`,VC="v1beta1",BC="v1beta";class OC{constructor(e){var o,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:VC,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:BC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,o,s);if(e.queryParams)for(const[f,y]of Object.entries(e.queryParams))r.searchParams.append(f,String(y));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,o,r.toString(),e.abortSignal),this.unaryApiCall(r,c,e.httpMethod)}patchHttpOptions(e,o){const s=JSON.parse(JSON.stringify(e));for(const[r,c]of Object.entries(o))typeof c=="object"?s[r]=Object.assign(Object.assign({},s[r]),c):c!==void 0&&(s[r]=c);return s}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,o,r.toString(),e.abortSignal),this.streamApiCall(r,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,s,r){if(o&&o.timeout||r){const c=new AbortController,f=c.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const y=setTimeout(()=>c.abort(),o.timeout);y&&typeof y.unref=="function"&&y.unref()}r&&r.addEventListener("abort",()=>{c.abort()}),e.signal=f}return o&&o.extraBody!==null&&YC(e,o.extraBody),e.headers=await this.getHeadersInternal(o,s),e}async unaryApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await am(r),new Nc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,o,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await am(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ti(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),c=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";const y="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield Ke(r.read());if(p){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=c.decode(v,{stream:!0});try{const U=JSON.parse(x);if("error"in U){const P=JSON.parse(JSON.stringify(U.error)),w=P.status,I=P.code,pe=`got status: ${w}. ${JSON.stringify(U)}`;if(I>=400&&I<600)throw new ur({message:pe,status:I})}}catch(U){if(U.name==="ApiError")throw U}f+=x;let S=-1,_=0;for(;;){S=-1,_=0;for(const w of m){const I=f.indexOf(w);I!==-1&&(S===-1||I<S)&&(S=I,_=w.length)}if(S===-1)break;const U=f.substring(0,S);f=f.substring(S+_);const P=U.trim();if(P.startsWith(y)){const w=P.substring(y.length).trim();try{const I=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ke(new Nc(I))}catch(I){throw new Error(`exception parsing stream chunk ${w}. ${I}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},o=qC+" "+this.clientOptions.userAgentExtra;return e[HC]=o,e[Uc]=o,e[kC]="application/json",e}async getHeadersInternal(e,o){const s=new Headers;if(e&&e.headers){for(const[r,c]of Object.entries(e.headers))s.append(r,c);e.timeout&&e.timeout>0&&s.append(zC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(e){var o;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(e,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const c=this.clientOptions.uploader,f=await c.stat(e);r.sizeBytes=String(f.size);const y=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:f.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=y;const m={file:r},p=this.getFileName(e),v=Me("upload/v1beta/files",m._url),x=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,m,o==null?void 0:o.httpOptions);return c.upload(e,x,this)}async uploadFileToFileSearchStore(e,o,s){var r;const c=this.clientOptions.uploader,f=await c.stat(o),y=String(f.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:f.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(o),x={};s!=null&&tg(s,x);const S=await this.fetchUploadUrl(p,y,m,v,x,s==null?void 0:s.httpOptions);return c.uploadToFileSearchStore(o,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,s,r,c,f){var y;let m={};f?m=f:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(y=p==null?void 0:p.headers)===null||y===void 0?void 0:y["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function am(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new ur({message:r,status:o}):new Error(r)}}function YC(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const c=JSON.parse(n.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))o=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(c,f){const y=Object.assign({},c);for(const m in f)if(Object.prototype.hasOwnProperty.call(f,m)){const p=f[m],v=y[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?y[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),y[m]=p)}return y}const r=s(o,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JC="mcp_used/unknown";let XC=!1;function ng(n){for(const e of n)if(KC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XC}function ig(n){var e;const o=(e=n[Uc])!==null&&e!==void 0?e:"";n[Uc]=(o+` ${JC}`).trimStart()}function KC(n){return n!==null&&typeof n=="object"&&n instanceof Zc}function $C(n){return ti(this,arguments,function*(o,s=100){let r,c=0;for(;c<s;){const f=yield Ke(o.listTools({cursor:r}));for(const y of f.tools)yield yield Ke(y),c++;if(!f.nextCursor)break;r=f.nextCursor}})}class Zc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Zc(e,o)}async initialize(){var e,o,s,r;if(this.mcpTools.length>0)return;const c={},f=[];for(const v of this.mcpClients)try{for(var y=!0,m=(o=void 0,ni($C(v))),p;p=await m.next(),e=p.done,!e;y=!0){r=p.value,y=!1;const x=r;f.push(x);const S=x.name;if(c[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);c[S]=v}}catch(x){o={error:x}}finally{try{!y&&!e&&(s=m.return)&&await s.call(m)}finally{if(o)throw o.error}}this.mcpTools=f,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),Rx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const f=await r.callTool({name:s.name,arguments:s.args},void 0,c);o.push({functionResponse:{name:s.name,response:f.isError?{error:f}:f}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QC(n,e,o){const s=new xx;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),e(s)}class ZC{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s}async connect(e){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),f=e_(this.apiClient.getDefaultHeaders()),y=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${y}`;let p=()=>{};const v=new Promise(le=>{p=le}),x=e.callbacks,S=function(){p({})},_=this.apiClient,U={onopen:S,onmessage:le=>{QC(_,x.onmessage,le)},onerror:(o=x==null?void 0:x.onerror)!==null&&o!==void 0?o:function(le){},onclose:(s=x==null?void 0:x.onclose)!==null&&s!==void 0?s:function(le){}},P=this.webSocketFactory.create(m,jC(f),U);P.connect(),await v;const pe={setup:{model:vt(this.apiClient,e.model)}};return P.send(JSON.stringify(pe)),new WC(P,this.apiClient)}}class WC{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=_E(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=CE(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Il.PLAY)}pause(){this.sendPlaybackControl(Il.PAUSE)}stop(){this.sendPlaybackControl(Il.STOP)}resetContext(){this.sendPlaybackControl(Il.RESET_CONTEXT)}close(){this.conn.close()}}function jC(n){const e={};return n.forEach((o,s)=>{e[s]=o}),e}function e_(n){const e=new Headers;for(const[o,s]of Object.entries(n))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n_(n,e,o){const s=new vx;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const c=JSON.parse(r);if(n.isVertexAI()){const f=RE(c);Object.assign(s,f)}else Object.assign(s,c);e(s)}class i_{constructor(e,o,s){this.apiClient=e,this.auth=o,this.webSocketFactory=s,this.music=new ZC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,s,r,c,f,y;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&ng(e.config.tools)&&ig(x);const S=a_(x);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const Ae=this.apiClient.getApiKey();let Ve="BidiGenerateContent",Ze="key";Ae!=null&&Ae.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ve="BidiGenerateContentConstrained",Ze="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${Ve}?${Ze}=${Ae}`}let _=()=>{};const U=new Promise(Ae=>{_=Ae}),P=e.callbacks,w=function(){var Ae;(Ae=P==null?void 0:P.onopen)===null||Ae===void 0||Ae.call(P),_({})},I=this.apiClient,pe={onopen:w,onmessage:Ae=>{n_(I,P.onmessage,Ae)},onerror:(o=P==null?void 0:P.onerror)!==null&&o!==void 0?o:function(Ae){},onclose:(s=P==null?void 0:P.onclose)!==null&&s!==void 0?s:function(Ae){}},le=this.webSocketFactory.create(v,s_(S),pe);le.connect(),await U;let he=vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&he.startsWith("publishers/")){const Ae=this.apiClient.getProject(),Ve=this.apiClient.getLocation();he=`projects/${Ae}/locations/${Ve}/`+he}let Ce={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ir.AUDIO]}:e.config.responseModalities=[ir.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _e=(y=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&y!==void 0?y:[],ve=[];for(const Ae of _e)if(this.isCallableTool(Ae)){const Ve=Ae;ve.push(await Ve.tool())}else ve.push(Ae);ve.length>0&&(e.config.tools=ve);const Je={model:he,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Ce=TE(this.apiClient,Je):Ce=EE(this.apiClient,Je),delete Ce.config,le.send(JSON.stringify(Ce)),new l_(le,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const o_={turnComplete:!0};class l_{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=On(o.turns),e.isVertexAI()||(s=s.map(r=>cr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const c of s){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(t_)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},o_),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:ME(e)}:o={realtimeInput:AE(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function s_(n){const e={};return n.forEach((o,s)=>{e[s]=o}),e}function a_(n){const e=new Headers;for(const[o,s]of Object.entries(n))e.append(o,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rm=10;function um(n){var e,o,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const f of(o=n==null?void 0:n.tools)!==null&&o!==void 0?o:[])if(Ul(f)){r=!0;break}if(!r)return!0;const c=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Ul(n){return"callTool"in n&&typeof n.callTool=="function"}function r_(n){var e,o,s;return(s=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(r=>Ul(r)))!==null&&s!==void 0?s:!1}function cm(n){var e;const o=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Ul(s))return;const c=s;c.functionDeclarations&&c.functionDeclarations.length>0&&o.push(r)}),o}function fm(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u_ extends zi{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var s,r,c,f,y;const m=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!r_(o)||um(o.config))return await this.generateContentInternal(m);const p=cm(o);if(p.length>0){const P=p.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let v,x;const S=On(m.contents),_=(c=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:rm;let U=0;for(;U<_&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const P=v.candidates[0].content,w=[];for(const I of(y=(f=o.config)===null||f===void 0?void 0:f.tools)!==null&&y!==void 0?y:[])if(Ul(I)){const le=await I.callTool(v.functionCalls);w.push(...le)}U++,x={role:"user",parts:w},m.contents=On(m.contents),m.contents.push(P),m.contents.push(x),fm(m.config)&&(S.push(P),S.push(x))}return fm(m.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async o=>{var s,r,c,f,y;if(this.maybeMoveToResponseJsonSchem(o),um(o.config)){const x=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(x)}const m=cm(o);if(m.length>0){const x=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(c=(r=(s=o==null?void 0:o.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,v=(y=(f=o==null?void 0:o.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||y===void 0?void 0:y.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let c;const f=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?c=m==null?void 0:m.safetyAttributes:f.push(m);let y;return c?y={generatedImages:f,positivePromptSafetyAttributes:c,sdkHttpResponse:s.sdkHttpResponse}:y={generatedImages:f,sdkHttpResponse:s.sdkHttpResponse},y}),this.list=async o=>{var s;const f={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((s=f.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new Oo(ki.PAGED_ITEM_MODELS,y=>this.listInternal(y),await this.listInternal(f),f)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,c,f,y,m;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((f=(c=o.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.uri&&(!((m=(y=o.source)===null||y===void 0?void 0:y.video)===null||m===void 0)&&m.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,s,r;const c=(o=e.config)===null||o===void 0?void 0:o.tools;if(!c)return e;const f=await Promise.all(c.map(async m=>Ul(m)?await m.tool():m)),y={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(y.config.tools=f,e.config&&e.config.tools&&ng(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),ig(p),y.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return y}async initAfcToolsMap(e){var o,s,r;const c=new Map;for(const f of(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Ul(f)){const y=f,m=await y.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(c.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);c.set(p.name,y)}}return c}async processAfcStream(e){var o,s,r;const c=(r=(s=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:rm;let f=!1,y=0;const m=await this.initAfcToolsMap(e);return(function(p,v,x){return ti(this,arguments,function*(){for(var S,_,U,P,w,I;y<c;){f&&(y++,f=!1);const Ce=yield Ke(p.processParamsMaybeAddMcpUsage(x)),_e=yield Ke(p.generateContentStreamInternal(Ce)),ve=[],Je=[];try{for(var pe=!0,le=(_=void 0,ni(_e)),he;he=yield Ke(le.next()),S=he.done,!S;pe=!0){P=he.value,pe=!1;const Ae=P;if(yield yield Ke(Ae),Ae.candidates&&(!((w=Ae.candidates[0])===null||w===void 0)&&w.content)){Je.push(Ae.candidates[0].content);for(const Ve of(I=Ae.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(y<c&&Ve.functionCall){if(!Ve.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(Ve.functionCall.name)){const Ze=yield Ke(v.get(Ve.functionCall.name).callTool([Ve.functionCall]));ve.push(...Ze)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${Ve.functionCall.name}`)}}}}catch(Ae){_={error:Ae}}finally{try{!pe&&!S&&(U=le.return)&&(yield Ke(U.call(le)))}finally{if(_)throw _.error}}if(ve.length>0){f=!0;const Ae=new Is;Ae.candidates=[{content:{role:"user",parts:ve}}],yield yield Ke(Ae);const Ve=[];Ve.push(...Je),Ve.push({role:"user",parts:ve});const Ze=On(x.contents).concat(Ve);x.contents=Ze}else break}})})(this,m,e)}async generateContentInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=om(this.apiClient,e);return y=Me("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=sm(v),S=new Is;return Object.assign(S,x),S})}else{const p=im(this.apiClient,e);return y=Me("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=lm(v),S=new Is;return Object.assign(S,x),S})}}async generateContentStreamInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=om(this.apiClient,e);return y=Me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.requestStream({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),f.then(function(x){return ti(this,arguments,function*(){var S,_,U,P;try{for(var w=!0,I=ni(x),pe;pe=yield Ke(I.next()),S=pe.done,!S;w=!0){P=pe.value,w=!1;const le=P,he=sm(yield Ke(le.json()));he.sdkHttpResponse={headers:le.headers};const Ce=new Is;Object.assign(Ce,he),yield yield Ke(Ce)}}catch(le){_={error:le}}finally{try{!w&&!S&&(U=I.return)&&(yield Ke(U.call(I)))}finally{if(_)throw _.error}}})})}else{const p=im(this.apiClient,e);return y=Me("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.requestStream({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),f.then(function(x){return ti(this,arguments,function*(){var S,_,U,P;try{for(var w=!0,I=ni(x),pe;pe=yield Ke(I.next()),S=pe.done,!S;w=!0){P=pe.value,w=!1;const le=P,he=lm(yield Ke(le.json()));he.sdkHttpResponse={headers:le.headers};const Ce=new Is;Object.assign(Ce,he),yield yield Ke(Ce)}}catch(le){_={error:le}}finally{try{!w&&!S&&(U=I.return)&&(yield Ke(U.call(I)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=iT(this.apiClient,e);return y=Me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=lT(v),S=new Gy;return Object.assign(S,x),S})}else{const p=nT(this.apiClient,e);return y=Me("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=oT(v),S=new Gy;return Object.assign(S,x),S})}}async generateImagesInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=mT(this.apiClient,e);return y=Me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=vT(v),S=new qy;return Object.assign(S,x),S})}else{const p=yT(this.apiClient,e);return y=Me("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=gT(v),S=new qy;return Object.assign(S,x),S})}}async editImageInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=WE(this.apiClient,e);return c=Me("{model}:predict",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=jE(m),v=new ax;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=mC(this.apiClient,e);return c=Me("{model}:predict",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=gC(m),v=new rx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=ZT(this.apiClient,e);return c=Me("{model}:predict",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=WT(m),v=new ux;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=oC(this.apiClient,e);return c=Me("{model}:predict",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=lC(m),v=new cx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=LT(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>bc(v))}else{const p=FT(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Dc(v))}}async listInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=OT(this.apiClient,e);return y=Me("{models_url}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=JT(v),S=new Vy;return Object.assign(S,x),S})}else{const p=BT(this.apiClient,e);return y=Me("{models_url}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=YT(v),S=new Vy;return Object.assign(S,x),S})}}async update(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=hC(this.apiClient,e);return y=Me("{model}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>bc(v))}else{const p=pC(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Dc(v))}}async delete(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=KE(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=QE(v),S=new By;return Object.assign(S,x),S})}else{const p=XE(this.apiClient,e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=$E(v),S=new By;return Object.assign(S,x),S})}}async countTokens(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=OE(this.apiClient,e);return y=Me("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=JE(v),S=new Oy;return Object.assign(S,x),S})}else{const p=BE(this.apiClient,e);return y=Me("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=YE(v),S=new Oy;return Object.assign(S,x),S})}}async computeTokens(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=PE(this.apiClient,e);return c=Me("{model}:computeTokens",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=kE(m),v=new fx;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=_T(this.apiClient,e);return y=Me("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>{const x=TT(v),S=new or;return Object.assign(S,x),S})}else{const p=CT(this.apiClient,e);return y=Me("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>{const x=ET(v),S=new or;return Object.assign(S,x),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c_ extends zi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let c;s&&"httpOptions"in s&&(c=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const o=e.operation,s=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let c;s&&"httpOptions"in s&&(c=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=tx(e);return y=Me("{operationName}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f}else{const p=ex(e);return y=Me("{operationName}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=Xv(e);return c=Me("{resourceName}:fetchPredictOperation",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f_(n){const e={},o=u(n,["data"]);if(o!=null&&d(e,["data"],o),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function d_(n){const e={},o=u(n,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(c=>E_(c))),d(e,["parts"],r)}const s=u(n,["role"]);return s!=null&&d(e,["role"],s),e}function p_(n,e,o){const s={},r=u(e,["expireTime"]);o!==void 0&&r!=null&&d(o,["expireTime"],r);const c=u(e,["newSessionExpireTime"]);o!==void 0&&c!=null&&d(o,["newSessionExpireTime"],c);const f=u(e,["uses"]);o!==void 0&&f!=null&&d(o,["uses"],f);const y=u(e,["liveConnectConstraints"]);o!==void 0&&y!=null&&d(o,["bidiGenerateContentSetup"],S_(n,y));const m=u(e,["lockAdditionalFields"]);return o!==void 0&&m!=null&&d(o,["fieldMask"],m),s}function h_(n,e){const o={},s=u(e,["config"]);return s!=null&&d(o,["config"],p_(n,s,o)),o}function y_(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(n,["fileUri"]);o!=null&&d(e,["fileUri"],o);const s=u(n,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function m_(n){const e={},o=u(n,["id"]);o!=null&&d(e,["id"],o);const s=u(n,["args"]);s!=null&&d(e,["args"],s);const r=u(n,["name"]);if(r!=null&&d(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function g_(n){const e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(n,["enableWidget"]);return o!=null&&d(e,["enableWidget"],o),e}function v_(n){const e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(n,["timeRangeFilter"]);return o!=null&&d(e,["timeRangeFilter"],o),e}function x_(n,e){const o={},s=u(n,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const r=u(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const c=u(n,["temperature"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","temperature"],c);const f=u(n,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const y=u(n,["topK"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","topK"],y);const m=u(n,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const x=u(n,["speechConfig"]);e!==void 0&&x!=null&&d(e,["setup","generationConfig","speechConfig"],Qc(x));const S=u(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const U=u(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],d_(fn(U)));const P=u(n,["tools"]);if(e!==void 0&&P!=null){let _e=Ll(P);Array.isArray(_e)&&(_e=_e.map(ve=>C_(Fl(ve)))),d(e,["setup","tools"],_e)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],T_(w));const I=u(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","inputAudioTranscription"],I);const pe=u(n,["outputAudioTranscription"]);e!==void 0&&pe!=null&&d(e,["setup","outputAudioTranscription"],pe);const le=u(n,["realtimeInputConfig"]);e!==void 0&&le!=null&&d(e,["setup","realtimeInputConfig"],le);const he=u(n,["contextWindowCompression"]);e!==void 0&&he!=null&&d(e,["setup","contextWindowCompression"],he);const Ce=u(n,["proactivity"]);if(e!==void 0&&Ce!=null&&d(e,["setup","proactivity"],Ce),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function S_(n,e){const o={},s=u(e,["model"]);s!=null&&d(o,["setup","model"],vt(n,s));const r=u(e,["config"]);return r!=null&&d(o,["config"],x_(r,o)),o}function E_(n){const e={},o=u(n,["mediaResolution"]);o!=null&&d(e,["mediaResolution"],o);const s=u(n,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const r=u(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const c=u(n,["fileData"]);c!=null&&d(e,["fileData"],y_(c));const f=u(n,["functionCall"]);f!=null&&d(e,["functionCall"],m_(f));const y=u(n,["functionResponse"]);y!=null&&d(e,["functionResponse"],y);const m=u(n,["inlineData"]);m!=null&&d(e,["inlineData"],f_(m));const p=u(n,["text"]);p!=null&&d(e,["text"],p);const v=u(n,["thought"]);v!=null&&d(e,["thought"],v);const x=u(n,["thoughtSignature"]);x!=null&&d(e,["thoughtSignature"],x);const S=u(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function T_(n){const e={},o=u(n,["handle"]);if(o!=null&&d(e,["handle"],o),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function C_(n){const e={},o=u(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["functionDeclarations"],v)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(n,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const r=u(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const c=u(n,["fileSearch"]);c!=null&&d(e,["fileSearch"],c);const f=u(n,["codeExecution"]);if(f!=null&&d(e,["codeExecution"],f),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const y=u(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],g_(y));const m=u(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],v_(m));const p=u(n,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function __(n){const e=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const s=n[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(c=>`${o}.${c}`);e.push(...r)}else e.push(o)}return e.join(",")}function A_(n,e){let o=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const c=s.setup;typeof c=="object"&&c!==null?(n.bidiGenerateContentSetup=c,o=c):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(o){const c=__(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)c?n.fieldMask=c:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let y=[];r.length>0&&(y=r.map(p=>f.includes(p)?`generationConfig.${p}`:p));const m=[];c&&m.push(c),y.length>0&&m.push(...y),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class M_ extends zi{constructor(e){super(),this.apiClient=e}async create(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const y=h_(this.apiClient,e);c=Me("auth_tokens",y._url),f=y._query,delete y.config,delete y._url,delete y._query;const m=A_(y,e.config);return r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R_(n,e){const o={},s=u(n,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),o}function N_(n){const e={},o=u(n,["name"]);o!=null&&d(e,["_url","name"],o);const s=u(n,["config"]);return s!=null&&R_(s,e),e}function w_(n){const e={},o=u(n,["name"]);return o!=null&&d(e,["_url","name"],o),e}function I_(n,e){const o={},s=u(n,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const r=u(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),o}function D_(n){const e={},o=u(n,["parent"]);o!=null&&d(e,["_url","parent"],o);const s=u(n,["config"]);return s!=null&&I_(s,e),e}function b_(n){const e={},o=u(n,["sdkHttpResponse"]);o!=null&&d(e,["sdkHttpResponse"],o);const s=u(n,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const r=u(n,["documents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),d(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U_ extends zi{constructor(e){super(),this.apiClient=e,this.list=async o=>new Oo(ki.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=w_(e);return c=Me("{name}",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var o,s;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=N_(e);r=Me("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=D_(e);return c=Me("{parent}/documents",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=b_(m),v=new dx;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F_ extends zi{constructor(e,o=new U_(e)){super(),this.apiClient=e,this.documents=o,this.list=async(s={})=>new Oo(ki.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=_C(e);return c=Me("fileSearchStores",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=RC(e);return c=Me("{name}",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var o,s;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=MC(e);r=Me("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=UC(e);return c=Me("fileSearchStores",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=FC(m),v=new px;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=LC(e);return c=Me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=PC(m),v=new hx;return Object.assign(v,p),v})}}async importFile(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=IC(e);return c=Me("{file_search_store_name}:importFile",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=wC(m),v=new Yc;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let og=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return og=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),o=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const L_=()=>og();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Lc=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn extends Error{}class gn extends Yn{constructor(e,o,s,r){super(`${gn.makeMessage(e,o,s)}`),this.status=e,this.headers=r,this.error=o}static makeMessage(e,o,s){const r=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,o,s,r){if(!e||!r)return new pr({message:s,cause:Lc(o)});const c=o;return e===400?new sg(e,c,s,r):e===401?new ag(e,c,s,r):e===403?new rg(e,c,s,r):e===404?new ug(e,c,s,r):e===409?new cg(e,c,s,r):e===422?new fg(e,c,s,r):e===429?new dg(e,c,s,r):e>=500?new pg(e,c,s,r):new gn(e,c,s,r)}}class Pc extends gn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pr extends gn{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class lg extends pr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class sg extends gn{}class ag extends gn{}class rg extends gn{}class ug extends gn{}class cg extends gn{}class fg extends gn{}class dg extends gn{}class pg extends gn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P_=/^[a-z][a-z0-9+.-]*:/i,k_=n=>P_.test(n);let kc=n=>(kc=Array.isArray,kc(n));const z_=kc;let H_=z_;const dm=H_;function G_(n){if(!n)return!0;for(const e in n)return!1;return!0}function q_(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const V_=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yn(`${n} must be an integer`);if(e<0)throw new Yn(`${n} must be a positive integer`);return e},B_=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O_=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y_(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const J_=()=>{var n,e,o,s,r;const c=Y_();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wl,"X-Stainless-OS":hm(Deno.build.os),"X-Stainless-Arch":pm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wl,"X-Stainless-OS":hm((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":pm((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const f=X_();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X_(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of n){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,c=s[2]||0,f=s[3]||0;return{browser:e,version:`${r}.${c}.${f}`}}}return null}const pm=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",hm=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let $a;const K_=()=>$a??($a=J_());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $_(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function hg(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Q_(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return hg({start(){},async pull(o){const{done:s,value:r}=await e.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function yg(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const o=await e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z_(n){var e,o;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((o=(e=n[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W_=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mg=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tc(n,e,o){return mg(),new File(n,e??"unknown_file",o)}function j_(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const eA=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gg=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",tA=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&gg(n),nA=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function iA(n,e,o){if(mg(),n=await n,tA(n))return n instanceof File?n:Tc([await n.arrayBuffer()],n.name);if(nA(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Tc(await zc(r),e,o)}const s=await zc(n);if(e||(e=j_(n)),!(o!=null&&o.type)){const r=s.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return Tc(s,e,o)}async function zc(n){var e,o,s,r,c;let f=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)f.push(n);else if(gg(n))f.push(n instanceof Blob?n:await n.arrayBuffer());else if(eA(n))try{for(var y=!0,m=ni(n),p;p=await m.next(),e=p.done,!e;y=!0){r=p.value,y=!1;const v=r;f.push(...await zc(v))}}catch(v){o={error:v}}finally{try{!y&&!e&&(s=m.return)&&await s.call(m)}finally{if(o)throw o.error}}else{const v=(c=n==null?void 0:n.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${oA(n)}`)}return f}function oA(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vg{constructor(e){this._client=e}}vg._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xg(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ym=Object.freeze(Object.create(null)),lA=(n=xg)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const c=[],f=o.reduce((v,x,S)=>{var _,U,P;/[?#]/.test(x)&&(r=!0);const w=s[S];let I=(r?encodeURIComponent:n)(""+w);return S!==s.length&&(w==null||typeof w=="object"&&w.toString===((P=Object.getPrototypeOf((U=Object.getPrototypeOf((_=w.hasOwnProperty)!==null&&_!==void 0?_:ym))!==null&&U!==void 0?U:ym))===null||P===void 0?void 0:P.toString))&&(I=w+"",c.push({start:v.length+x.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),v+x+(S===s.length?"":I)},""),y=f.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(y))!==null;)c.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(c.sort((v,x)=>v.start-x.start),c.length>0){let v=0;const x=c.reduce((S,_)=>{const U=" ".repeat(_.start-v),P="^".repeat(_.length);return v=_.start+_.length,S+U+P},"");throw new Yn(`Path parameters result in path with invalid segments:
${c.map(S=>S.error).join(`
`)}
${f}
${x}`)}return f}),Qa=lA(xg);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sg extends vg{create(e,o){var s;const{api_version:r=this._client.apiVersion}=e,c=sr(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new Yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new Yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Qa`/${r}/interactions`,Object.assign(Object.assign({body:c},o),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(Qa`/${r}/interactions/${e}`,s)}cancel(e,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(Qa`/${r}/interactions/${e}/cancel`,s)}get(e,o={},s){var r;const c=o??{},{api_version:f=this._client.apiVersion}=c,y=sr(c,["api_version"]);return this._client.get(Qa`/${f}/interactions/${e}`,Object.assign(Object.assign({query:y},s),{stream:(r=o==null?void 0:o.stream)!==null&&r!==void 0?r:!1}))}}Sg._key=Object.freeze(["interactions"]);class Eg extends Sg{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(n){let e=0;for(const r of n)e+=r.length;const o=new Uint8Array(e);let s=0;for(const r of n)o.set(r,s),s+=r.length;return o}let Za;function Wc(n){let e;return(Za??(e=new globalThis.TextEncoder,Za=e.encode.bind(e)))(n)}let Wa;function mm(n){let e;return(Wa??(e=new globalThis.TextDecoder,Wa=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wc(e):e;this.buffer=sA([this.buffer,o]);const s=[];let r;for(;(r=aA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(mm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,f=mm(this.buffer.subarray(0,c));s.push(f),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}hr.NEWLINE_CHARS=new Set([`
`,"\r"]);hr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function aA(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function rA(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ar={off:0,error:200,warn:300,info:400,debug:500},gm=(n,e,o)=>{if(n){if(q_(ar,n))return n;mn(o).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ar))}`)}};function Us(){}function ja(n,e,o){return!e||ar[n]>ar[o]?Us:e[n].bind(e)}const uA={error:Us,warn:Us,info:Us,debug:Us};let vm=new WeakMap;function mn(n){var e;const o=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!o)return uA;const r=vm.get(o);if(r&&r[0]===s)return r[1];const c={error:ja("error",o,s),warn:ja("warn",o,s),info:ja("info",o,s),debug:ja("debug",o,s)};return vm.set(o,[s,c]),c}const Bo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl{constructor(e,o,s){this.iterator=e,this.controller=o,this.client=s}static fromSSEResponse(e,o,s){let r=!1;const c=s?mn(s):console;function f(){return ti(this,arguments,function*(){var m,p,v,x;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var _=!0,U=ni(cA(e,o)),P;P=yield Ke(U.next()),m=P.done,!m;_=!0){x=P.value,_=!1;const w=x;if(!S)if(w.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ke(JSON.parse(w.data))}catch(I){throw c.error("Could not parse message into JSON:",w.data),c.error("From chunk:",w.raw),I}}}catch(w){p={error:w}}finally{try{!_&&!m&&(v=U.return)&&(yield Ke(v.call(U)))}finally{if(p)throw p.error}}S=!0}catch(w){if(Fc(w))return yield Ke(void 0);throw w}finally{S||o.abort()}})}return new Dl(f,o,s)}static fromReadableStream(e,o,s){let r=!1;function c(){return ti(this,arguments,function*(){var m,p,v,x;const S=new hr,_=yg(e);try{for(var U=!0,P=ni(_),w;w=yield Ke(P.next()),m=w.done,!m;U=!0){x=w.value,U=!1;const I=x;for(const pe of S.decode(I))yield yield Ke(pe)}}catch(I){p={error:I}}finally{try{!U&&!m&&(v=P.return)&&(yield Ke(v.call(P)))}finally{if(p)throw p.error}}for(const I of S.flush())yield yield Ke(I)})}function f(){return ti(this,arguments,function*(){var m,p,v,x;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var _=!0,U=ni(c()),P;P=yield Ke(U.next()),m=P.done,!m;_=!0){x=P.value,_=!1;const w=x;S||w&&(yield yield Ke(JSON.parse(w)))}}catch(w){p={error:w}}finally{try{!_&&!m&&(v=U.return)&&(yield Ke(v.call(U)))}finally{if(p)throw p.error}}S=!0}catch(w){if(Fc(w))return yield Ke(void 0);throw w}finally{S||o.abort()}})}return new Dl(f,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],s=this.iterator(),r=c=>({next:()=>{if(c.length===0){const f=s.next();e.push(f),o.push(f)}return c.shift()}});return[new Dl(()=>r(e),this.controller,this.client),new Dl(()=>r(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return hg({async start(){o=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:c}=await o.next();if(c)return s.close();const f=Wc(JSON.stringify(r)+`
`);s.enqueue(f)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function cA(n,e){return ti(this,arguments,function*(){var s,r,c,f;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yn("Attempted to iterate over a response with no body");const y=new dA,m=new hr,p=yg(n.body);try{for(var v=!0,x=ni(fA(p)),S;S=yield Ke(x.next()),s=S.done,!s;v=!0){f=S.value,v=!1;const _=f;for(const U of m.decode(_)){const P=y.decode(U);P&&(yield yield Ke(P))}}}catch(_){r={error:_}}finally{try{!v&&!s&&(c=x.return)&&(yield Ke(c.call(x)))}finally{if(r)throw r.error}}for(const _ of m.flush()){const U=y.decode(_);U&&(yield yield Ke(U))}})}function fA(n){return ti(this,arguments,function*(){var o,s,r,c;let f=new Uint8Array;try{for(var y=!0,m=ni(n),p;p=yield Ke(m.next()),o=p.done,!o;y=!0){c=p.value,y=!1;const v=c;if(v==null)continue;const x=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Wc(v):v;let S=new Uint8Array(f.length+x.length);S.set(f),S.set(x,f.length),f=S;let _;for(;(_=rA(f))!==-1;)yield yield Ke(f.slice(0,_)),f=f.slice(_)}}catch(v){s={error:v}}finally{try{!y&&!o&&(r=m.return)&&(yield Ke(r.call(m)))}finally{if(s)throw s.error}}f.length>0&&(yield yield Ke(f))})}class dA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,s,r]=pA(e,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function pA(n,e){const o=n.indexOf(e);return o!==-1?[n.substring(0,o),e,n.substring(o+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hA(n,e){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:c}=e,f=await(async()=>{var y;if(e.options.stream)return mn(n).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,n):Dl.fromSSEResponse(o,e.controller,n);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const m=o.headers.get("content-type"),p=(y=m==null?void 0:m.split(";")[0])===null||y===void 0?void 0:y.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await o.json():await o.text()})();return mn(n).debug(`[${s}] response parsed`,Bo({retryOfRequestLogID:r,url:o.url,status:o.status,body:f,durationMs:Date.now()-c})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jc extends Promise{constructor(e,o,s=hA){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new jc(this.client,this.responsePromise,async(o,s)=>e(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tg=Symbol("brand.privateNullableHeaders");function*yA(n){if(!n)return;if(Tg in n){const{values:s,nulls:r}=n;yield*s.entries();for(const c of r)yield[c,null];return}let e=!1,o;n instanceof Headers?o=n.entries():dm(n)?o=n:(e=!0,o=Object.entries(n??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const c=dm(s[1])?s[1]:[s[1]];let f=!1;for(const y of c)y!==void 0&&(e&&!f&&(f=!0,yield[r,null]),yield[r,y])}}const Ds=n=>{const e=new Headers,o=new Set;for(const s of n){const r=new Set;for(const[c,f]of yA(s)){const y=c.toLowerCase();r.has(y)||(e.delete(c),r.add(y)),f===null?(e.delete(c),o.add(y)):(e.append(c,f),o.delete(y))}}return{[Tg]:!0,values:e,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cc=n=>{var e,o,s,r,c,f;if(typeof globalThis.process<"u")return(s=(o=(e=qv)===null||e===void 0?void 0:e[n])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(f=(c=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||c===void 0?void 0:c.call(r,n))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cg;class yr{constructor(e){var o,s,r,c,f,y,m,{baseURL:p=Cc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(o=Cc("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:x="v1beta"}=e,S=sr(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:v,apiVersion:x},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(s=_.timeout)!==null&&s!==void 0?s:yr.DEFAULT_TIMEOUT,this.logger=(r=_.logger)!==null&&r!==void 0?r:console;const U="warn";this.logLevel=U,this.logLevel=(f=(c=gm(_.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:gm(Cc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:U,this.fetchOptions=_.fetchOptions,this.maxRetries=(y=_.maxRetries)!==null&&y!==void 0?y:2,this.fetch=(m=_.fetch)!==null&&m!==void 0?m:$_(),this.encoder=W_,this._options=_,this.apiKey=v,this.apiVersion=x,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=Ds([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ds([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ds([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new Yn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${wl}`}defaultIdempotencyKey(){return`stainless-node-retry-${L_()}`}makeStatusError(e,o,s,r){return gn.generate(e,o,s,r)}buildURL(e,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,c=k_(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return G_(f)||(o=Object.assign(Object.assign({},f),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(c.search=this.stringifyQuery(o)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:s}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:o},r)))}request(e,o=null){return new jc(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,s){var r,c,f;const y=await e,m=(r=y.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=m),await this.prepareOptions(y);const{req:p,url:v,timeout:x}=await this.buildRequest(y,{retryCount:m-o});await this.prepareRequest(p,{url:v,options:y});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=s===void 0?"":`, retryOf: ${s}`,U=Date.now();if(mn(this).debug(`[${S}] sending request`,Bo({retryOfRequestLogID:s,method:y.method,url:v,options:y,headers:p.headers})),!((c=y.signal)===null||c===void 0)&&c.aborted)throw new Pc;const P=new AbortController,w=await this.fetchWithTimeout(v,p,x,P).catch(Lc),I=Date.now();if(w instanceof globalThis.Error){const le=`retrying, ${o} attempts remaining`;if(!((f=y.signal)===null||f===void 0)&&f.aborted)throw new Pc;const he=Fc(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(o)return mn(this).info(`[${S}] connection ${he?"timed out":"failed"} - ${le}`),mn(this).debug(`[${S}] connection ${he?"timed out":"failed"} (${le})`,Bo({retryOfRequestLogID:s,url:v,durationMs:I-U,message:w.message})),this.retryRequest(y,o,s??S);throw mn(this).info(`[${S}] connection ${he?"timed out":"failed"} - error; no more retries left`),mn(this).debug(`[${S}] connection ${he?"timed out":"failed"} (error; no more retries left)`,Bo({retryOfRequestLogID:s,url:v,durationMs:I-U,message:w.message})),he?new lg:new pr({cause:w})}const pe=`[${S}${_}] ${p.method} ${v} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${I-U}ms`;if(!w.ok){const le=await this.shouldRetry(w);if(o&&le){const Ae=`retrying, ${o} attempts remaining`;return await Z_(w.body),mn(this).info(`${pe} - ${Ae}`),mn(this).debug(`[${S}] response error (${Ae})`,Bo({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:I-U})),this.retryRequest(y,o,s??S,w.headers)}const he=le?"error; no more retries left":"error; not retryable";mn(this).info(`${pe} - ${he}`);const Ce=await w.text().catch(Ae=>Lc(Ae).message),_e=B_(Ce),ve=_e?void 0:Ce;throw mn(this).debug(`[${S}] response error (${he})`,Bo({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,message:ve,durationMs:Date.now()-U})),this.makeStatusError(w.status,_e,ve,w.headers)}return mn(this).info(pe),mn(this).debug(`[${S}] response start`,Bo({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:I-U})),{response:w,options:y,controller:P,requestLogID:S,retryOfRequestLogID:s,startTime:U}}async fetchWithTimeout(e,o,s,r){const c=o||{},{signal:f,method:y}=c,m=sr(c,["signal","method"]);f&&f.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,x=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);y&&(x.method=y.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(p)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,s,r){var c;let f;const y=r==null?void 0:r.get("retry-after-ms");if(y){const p=parseFloat(y);Number.isNaN(p)||(f=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!f){const p=parseFloat(m);Number.isNaN(p)?f=Date.parse(m)-Date.now():f=p*1e3}if(!(f&&0<=f&&f<60*1e3)){const p=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(o,p)}return await O_(f),this.makeRequest(e,o-1,s)}calculateDefaultRetryTimeoutMillis(e,o){const c=o-e,f=Math.min(.5*Math.pow(2,c),8),y=1-Math.random()*.25;return f*y*1e3}async buildRequest(e,{retryCount:o=0}={}){var s,r,c;const f=Object.assign({},e),{method:y,path:m,query:p,defaultBaseURL:v}=f,x=this.buildURL(m,p,v);"timeout"in f&&V_("timeout",f.timeout),f.timeout=(s=f.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:_}=this.buildBody({options:f}),U=await this.buildHeaders({options:e,method:y,bodyHeaders:S,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:y,headers:U},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(c=f.fetchOptions)!==null&&c!==void 0?c:{}),url:x,timeout:f.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:s,retryCount:r}){let c={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let y=Ds([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),K_()),this._options.defaultHeaders,s,e.headers,f]);return this.validateHeaders(y),y.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ds([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Q_(e)}:this.encoder({body:e,headers:s})}}yr.DEFAULT_TIMEOUT=6e4;class jt extends yr{constructor(){super(...arguments),this.interactions=new Eg(this)}}Cg=jt;jt.GeminiNextGenAPIClient=Cg;jt.GeminiNextGenAPIClientError=Yn;jt.APIError=gn;jt.APIConnectionError=pr;jt.APIConnectionTimeoutError=lg;jt.APIUserAbortError=Pc;jt.NotFoundError=ug;jt.ConflictError=cg;jt.RateLimitError=dg;jt.BadRequestError=sg;jt.AuthenticationError=ag;jt.InternalServerError=pg;jt.PermissionDeniedError=rg;jt.UnprocessableEntityError=fg;jt.toFile=iA;jt.Interactions=Eg;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mA(n,e){const o={},s=u(n,["name"]);return s!=null&&d(o,["_url","name"],s),o}function gA(n,e){const o={},s=u(n,["name"]);return s!=null&&d(o,["_url","name"],s),o}function vA(n,e){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&d(o,["sdkHttpResponse"],s),o}function xA(n,e){const o={},s=u(n,["sdkHttpResponse"]);return s!=null&&d(o,["sdkHttpResponse"],s),o}function SA(n,e,o){const s={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=u(n,["epochCount"]);e!==void 0&&c!=null&&d(e,["tuningTask","hyperparameters","epochCount"],c);const f=u(n,["learningRateMultiplier"]);if(f!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],f),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const y=u(n,["batchSize"]);e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","batchSize"],y);const m=u(n,["learningRate"]);if(e!==void 0&&m!=null&&d(e,["tuningTask","hyperparameters","learningRate"],m),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function EA(n,e,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const _=u(n,["validationDataset"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec"],xm(_))}else if(r==="PREFERENCE_TUNING"){const _=u(n,["validationDataset"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec"],xm(_))}const c=u(n,["tunedModelDisplayName"]);e!==void 0&&c!=null&&d(e,["tunedModelDisplayName"],c);const f=u(n,["description"]);e!==void 0&&f!=null&&d(e,["description"],f);let y=u(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const _=u(n,["epochCount"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(y==="PREFERENCE_TUNING"){const _=u(n,["epochCount"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let m=u(o,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(m==="PREFERENCE_TUNING"){const _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let p=u(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(p==="PREFERENCE_TUNING"){const _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let v=u(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const _=u(n,["adapterSize"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(v==="PREFERENCE_TUNING"){const _=u(n,["adapterSize"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=u(n,["labels"]);e!==void 0&&x!=null&&d(e,["labels"],x);const S=u(n,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function TA(n,e){const o={},s=u(n,["baseModel"]);s!=null&&d(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const c=u(n,["trainingDataset"]);c!=null&&UA(c);const f=u(n,["config"]);return f!=null&&SA(f,o),o}function CA(n,e){const o={},s=u(n,["baseModel"]);s!=null&&d(o,["baseModel"],s);const r=u(n,["preTunedModel"]);r!=null&&d(o,["preTunedModel"],r);const c=u(n,["trainingDataset"]);c!=null&&FA(c,o,e);const f=u(n,["config"]);return f!=null&&EA(f,o,e),o}function _A(n,e){const o={},s=u(n,["name"]);return s!=null&&d(o,["_url","name"],s),o}function AA(n,e){const o={},s=u(n,["name"]);return s!=null&&d(o,["_url","name"],s),o}function MA(n,e,o){const s={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const c=u(n,["pageToken"]);e!==void 0&&c!=null&&d(e,["_query","pageToken"],c);const f=u(n,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),s}function RA(n,e,o){const s={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const c=u(n,["pageToken"]);e!==void 0&&c!=null&&d(e,["_query","pageToken"],c);const f=u(n,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),s}function NA(n,e){const o={},s=u(n,["config"]);return s!=null&&MA(s,o),o}function wA(n,e){const o={},s=u(n,["config"]);return s!=null&&RA(s,o),o}function IA(n,e){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const c=u(n,["tunedModels"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(y=>_g(y))),d(o,["tuningJobs"],f)}return o}function DA(n,e){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const r=u(n,["nextPageToken"]);r!=null&&d(o,["nextPageToken"],r);const c=u(n,["tuningJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(y=>Hc(y))),d(o,["tuningJobs"],f)}return o}function bA(n,e){const o={},s=u(n,["name"]);s!=null&&d(o,["model"],s);const r=u(n,["name"]);return r!=null&&d(o,["endpoint"],r),o}function UA(n,e){const o={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>c)),d(o,["examples","examples"],r)}return o}function FA(n,e,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const f=u(n,["gcsUri"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(r==="PREFERENCE_TUNING"){const f=u(n,["gcsUri"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}let c=u(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const f=u(n,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(c==="PREFERENCE_TUNING"){const f=u(n,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function _g(n,e){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&d(o,["name"],r);const c=u(n,["state"]);c!=null&&d(o,["state"],Gm(c));const f=u(n,["createTime"]);f!=null&&d(o,["createTime"],f);const y=u(n,["tuningTask","startTime"]);y!=null&&d(o,["startTime"],y);const m=u(n,["tuningTask","completeTime"]);m!=null&&d(o,["endTime"],m);const p=u(n,["updateTime"]);p!=null&&d(o,["updateTime"],p);const v=u(n,["description"]);v!=null&&d(o,["description"],v);const x=u(n,["baseModel"]);x!=null&&d(o,["baseModel"],x);const S=u(n,["_self"]);return S!=null&&d(o,["tunedModel"],bA(S)),o}function Hc(n,e){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&d(o,["name"],r);const c=u(n,["state"]);c!=null&&d(o,["state"],Gm(c));const f=u(n,["createTime"]);f!=null&&d(o,["createTime"],f);const y=u(n,["startTime"]);y!=null&&d(o,["startTime"],y);const m=u(n,["endTime"]);m!=null&&d(o,["endTime"],m);const p=u(n,["updateTime"]);p!=null&&d(o,["updateTime"],p);const v=u(n,["error"]);v!=null&&d(o,["error"],v);const x=u(n,["description"]);x!=null&&d(o,["description"],x);const S=u(n,["baseModel"]);S!=null&&d(o,["baseModel"],S);const _=u(n,["tunedModel"]);_!=null&&d(o,["tunedModel"],_);const U=u(n,["preTunedModel"]);U!=null&&d(o,["preTunedModel"],U);const P=u(n,["supervisedTuningSpec"]);P!=null&&d(o,["supervisedTuningSpec"],P);const w=u(n,["preferenceOptimizationSpec"]);w!=null&&d(o,["preferenceOptimizationSpec"],w);const I=u(n,["tuningDataStats"]);I!=null&&d(o,["tuningDataStats"],I);const pe=u(n,["encryptionSpec"]);pe!=null&&d(o,["encryptionSpec"],pe);const le=u(n,["partnerModelTuningSpec"]);le!=null&&d(o,["partnerModelTuningSpec"],le);const he=u(n,["customBaseModel"]);he!=null&&d(o,["customBaseModel"],he);const Ce=u(n,["experiment"]);Ce!=null&&d(o,["experiment"],Ce);const _e=u(n,["labels"]);_e!=null&&d(o,["labels"],_e);const ve=u(n,["outputUri"]);ve!=null&&d(o,["outputUri"],ve);const Je=u(n,["pipelineJob"]);Je!=null&&d(o,["pipelineJob"],Je);const Ae=u(n,["serviceAccount"]);Ae!=null&&d(o,["serviceAccount"],Ae);const Ve=u(n,["tunedModelDisplayName"]);Ve!=null&&d(o,["tunedModelDisplayName"],Ve);const Ze=u(n,["veoTuningSpec"]);return Ze!=null&&d(o,["veoTuningSpec"],Ze),o}function LA(n,e){const o={},s=u(n,["sdkHttpResponse"]);s!=null&&d(o,["sdkHttpResponse"],s);const r=u(n,["name"]);r!=null&&d(o,["name"],r);const c=u(n,["metadata"]);c!=null&&d(o,["metadata"],c);const f=u(n,["done"]);f!=null&&d(o,["done"],f);const y=u(n,["error"]);return y!=null&&d(o,["error"],y),o}function xm(n,e){const o={},s=u(n,["gcsUri"]);s!=null&&d(o,["validationDatasetUri"],s);const r=u(n,["vertexDatasetResource"]);return r!=null&&d(o,["validationDatasetUri"],r),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PA extends zi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Oo(ki.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},o),{preTunedModel:r});return c.baseModel=void 0,await this.tuneInternal(c)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),c=await this.tuneMldevInternal(r);let f="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?f=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(f=c.name.split("/operations/")[0]),{name:f,state:Rc.JOB_STATE_QUEUED}}}}async getInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=AA(e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>Hc(v))}else{const p=_A(e);return y=Me("{name}",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>_g(v))}}async listInternal(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=wA(e);return y=Me("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=DA(v),S=new Yy;return Object.assign(S,x),S})}else{const p=NA(e);return y=Me("tunedModels",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=IA(v),S=new Yy;return Object.assign(S,x),S})}}async cancel(e){var o,s,r,c;let f,y="",m={};if(this.apiClient.isVertexAI()){const p=gA(e);return y=Me("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=xA(v),S=new Jy;return Object.assign(S,x),S})}else{const p=mA(e);return y=Me("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,f=this.apiClient.request({path:y,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:v.headers},S})),f.then(v=>{const x=vA(v),S=new Jy;return Object.assign(S,x),S})}}async tuneInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI()){const y=CA(e,e);return c=Me("tuningJobs",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>Hc(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,s;let r,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const y=TA(e);return c=Me("tunedModels",y._url),f=y._query,delete y._url,delete y._query,r=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>LA(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kA{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zA=1024*1024*8,HA=3,GA=1e3,qA=2,rr="x-goog-upload-status";async function VA(n,e,o){var s;const r=await Ag(n,e,o),c=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[rr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function BA(n,e,o){var s;const r=await Ag(n,e,o),c=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[rr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=Fm(c),y=new Jc;return Object.assign(y,f),y}async function Ag(n,e,o){var s,r;let c=0,f=0,y=new Nc(new Response),m="upload";for(c=n.size;f<c;){const p=Math.min(zA,c-f),v=n.slice(f,f+p);f+p>=c&&(m+=", finalize");let x=0,S=GA;for(;x<HA&&(y=await o.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(f),"Content-Length":String(p)}}}),!(!((s=y==null?void 0:y.headers)===null||s===void 0)&&s[rr]));)x++,await YA(S),S=S*qA;if(f+=p,((r=y==null?void 0:y.headers)===null||r===void 0?void 0:r[rr])!=="active")break;if(c<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return y}async function OA(n){return{size:n.size,type:n.type}}function YA(n){return new Promise(e=>setTimeout(e,n))}class JA{async upload(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VA(e,o,s)}async uploadToFileSearchStore(e,o,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BA(e,o,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XA{create(e,o,s){return new KA(e,o,s)}}class KA{constructor(e,o,s){this.url=e,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sm="x-goog-api-key";class $A{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(Sm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Sm,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QA="gl-node/";class ZA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new jt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const s=Yv(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new $A(this.apiKey);this.apiClient=new OC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:QA+"web",uploader:new JA,downloader:new kA}),this.models=new u_(this.apiClient),this.live=new i_(this.apiClient,r,new XA),this.batches=new SS(this.apiClient),this.chats=new tE(this.models,this.apiClient),this.caches=new WS(this.apiClient),this.files=new fE(this.apiClient),this.operations=new c_(this.apiClient),this.authTokens=new M_(this.apiClient),this.tunings=new PA(this.apiClient),this.fileSearchStores=new F_(this.apiClient)}}const pt=({type:n,className:e="w-5 h-5"})=>{const o={"cursor-arrow":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A5.25 5.25 0 1117.25 10.5"}),point:C.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),line:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5"}),"elastic-line":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12h5l2-3 2 6 2-6 2 3h5"}),polyline:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5l4.5 6-4.5 6h16.5"}),"elastic-polyline":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5l4 4-3 5h8l-3-5 4-4"}),spline:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 18.5c3-3 6-3 9 0s6 3 9 0",fill:"none"}),nurbs:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.5 18.5s3.21-12.75 9-6 8.5 5 8.5 5",fill:"none"}),circle:C.jsx("circle",{cx:"12",cy:"12",r:"7.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),rectangle:C.jsx("rect",{x:"4.5",y:"6",width:"15",height:"12",rx:"1",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),"arc-3p":C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5 A 12 12 0 0 1 19.5 4.5"}),C.jsx("circle",{cx:"4.5",cy:"19.5",r:"1.2",strokeWidth:"0",fill:"currentColor"}),C.jsx("circle",{cx:"19.5",cy:"4.5",r:"1.2",strokeWidth:"0",fill:"currentColor"}),C.jsx("circle",{cx:"10",cy:"9",r:"1.2",strokeWidth:"0",fill:"currentColor"})]}),"arc-cra":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M20 12 A 8 8 0 0 1 12 20",strokeLinecap:"round",strokeLinejoin:"round"}),C.jsx("path",{d:"M12 12 h8 M12 12 v8",strokeDasharray:"2 2",strokeLinecap:"round",strokeLinejoin:"round"}),C.jsx("circle",{cx:"12",cy:"12",r:"1.2",strokeWidth:"0",fill:"currentColor"})]}),"arc-ttr":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M4 5 h16 M4 19 h16",strokeLinecap:"round",strokeLinejoin:"round"}),C.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),ellipse:C.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),text:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 20h4L12 4l4 16h4M7 14h10"}),offset:C.jsx("path",{d:"M4 12 A 8 8 0 0 1 12 4 M7 12 A 5 5 0 0 1 12 7",fill:"none"}),trim:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12 12L7.5 3M12 12l4.5-9"})]}),fillet:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M20 4v12a4 4 0 0 1-4 4H4"}),C.jsx("path",{d:"M20 4H8 M4 20V8",strokeDasharray:"2 2",opacity:"0.5"})]}),chamfer:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M20 4v12l-4 4H4"}),C.jsx("path",{d:"M20 4H8 M4 20V8",strokeDasharray:"2 2",opacity:"0.5"})]}),mirror:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M12 3v18",strokeDasharray:"2 2"}),C.jsx("path",{d:"M3 8l6 2-4 6"}),C.jsx("path",{d:"M21 8l-6 2 4 6"})]}),explode:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"3 2",d:"M4 4h16v16H4z"}),C.jsx("path",{d:"M8 8 l-4 -4 M16 8 l4 -4 M8 16 l-4 4 M16 16 l4 4"})]}),group:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 2",d:"M3 6a2 2 0 012-2h14a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6z"}),C.jsx("rect",{x:"7",y:"9",width:"4",height:"4",rx:"1",fill:"currentColor"}),C.jsx("rect",{x:"13",y:"11",width:"4",height:"4",rx:"1",fill:"currentColor",opacity:"0.7"})]}),ungroup:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 2",d:"M3 6a2 2 0 012-2h8m6 0a2 2 0 012 2v12a2 2 0 01-2 2H9m-4 0a2 2 0 01-2-2V6z"}),C.jsx("rect",{x:"7",y:"9",width:"4",height:"4",rx:"1",fill:"currentColor"}),C.jsx("rect",{x:"13",y:"11",width:"4",height:"4",rx:"1",fill:"currentColor",opacity:"0.7"})]}),eye:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"eye-slash":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"}),"lock-closed":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}),"lock-open":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m3.75 11.25h3.75a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H9.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}),plus:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),trash:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),clipboard:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5.25a2.25 2.25 0 012.25-2.25h3a2.25 2.25 0 012.25 2.25v3.75a2.25 2.25 0 01-2.25-2.25h-3a2.25 2.25 0 01-2.25-2.25V5.25z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a2.25 2.25 0 01-2.25 2.25H7.5A2.25 2.25 0 015.25 12V7.5a2.25 2.25 0 012.25-2.25m5.25 3.75V5.25m0 3.75h.008v.008H10.5m-1.5 0H9.75m5.25 0h.008v.008H15m0-3.75h.008v.008H15m0 0h.008v.008H15"})]}),"clipboard-paste":C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0h-3v-3h3v3z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 3.75v2.25h4.5V3.75"})]}),scissors:C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12 12L7.5 3M12 12l4.5-9"})]}),"square-2-stack":C.jsxs(C.Fragment,{children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4.5v11.25l-2.25 2.25c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 15.69l3.84 3.84c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L15 15.75V4.5"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5h16.5"})]}),"dimension-linear":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M4 20 L4 18 M4 6 L4 4 M20 20 L20 18 M20 6 L20 4 M4 11 L20 11"}),C.jsx("path",{d:"M4 11 L7 8 M4 11 L7 14 M20 11 L17 8 M20 11 L17 14"})]}),"dimension-aligned":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M4 19 L6 17 M17 6 L19 4 M5 18 L18 5"}),C.jsx("path",{d:"M5 18 L6.5 15.5 M5 18 L7.5 19.5 M18 5 L16.5 7.5 M18 5 L15.5 3.5"})]}),"dimension-angular":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M4 12 L12 12 L12 4 M12 12 L16 20"}),C.jsx("path",{d:"M16 12 A 4 4 0 0 0 12 8"})]}),"dimension-radial":C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"12",cy:"12",r:"8"}),C.jsx("path",{d:"M12 12 L18 6 M12 12 L13 11 L14 12"}),C.jsx("text",{x:"19",y:"5",fontSize:"3",fill:"currentColor",children:"R"})]}),"dimension-diameter":C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"12",cy:"12",r:"8"}),C.jsx("path",{d:"M6 6 L18 18"}),C.jsx("path",{d:"M6 6 L8 5 M6 6 L5 8 M18 18 L16 19 M18 18 L19 16"}),C.jsx("text",{x:"12",y:"11",fontSize:"5",fill:"currentColor",children:""})]}),"dimension-coordinate":C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M12 4 L12 20 M12 12 L20 12"}),C.jsx("path",{d:"M8 8 L4 8 L4 4 L8 4"}),C.jsx("text",{x:"3.5",y:"12",fontSize:"3",fill:"currentColor",children:"X"})]}),"check-circle":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),"x-circle":C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),spinner:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-4.991-2.696L7.926 2.985A8.25 8.25 0 002.985 16.652z"})};return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:e,children:o[n]||C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},pi=[{id:"select",name:"Select",icon:C.jsx(pt,{type:"cursor-arrow"}),command:"Select"},{id:"point",name:"Point",icon:C.jsx(pt,{type:"point"}),command:"Point"},{id:"line",name:"Line",icon:C.jsx(pt,{type:"line"}),command:"Line"},{id:"elastic-line",name:"Elastic Line",icon:C.jsx(pt,{type:"elastic-line"}),command:"ElasticLine"},{id:"polyline",name:"Polyline",icon:C.jsx(pt,{type:"polyline"}),command:"Polyline"},{id:"elastic-polyline",name:"Elastic Polyline",icon:C.jsx(pt,{type:"elastic-polyline"}),command:"ElasticPolyline"},{id:"spline",name:"Spline",icon:C.jsx(pt,{type:"spline"}),command:"Spline"},{id:"nurbs",name:"Nurbs Curve",icon:C.jsx(pt,{type:"nurbs"}),command:"Nurbs"},{id:"circle",name:"Circle",icon:C.jsx(pt,{type:"circle"}),command:"Circle"},{id:"rectangle",name:"Rectangle",icon:C.jsx(pt,{type:"rectangle"}),command:"Rectangle"},{id:"arc-3p",name:"Arc (3-Point)",icon:C.jsx(pt,{type:"arc-3p"}),command:"Arc"},{id:"arc-cra",name:"Arc (Center, Start, Angle)",icon:C.jsx(pt,{type:"arc-cra"}),command:"ArcCRA"},{id:"arc-ttr",name:"Arc (Tan, Tan, Radius)",icon:C.jsx(pt,{type:"arc-ttr"}),command:"ArcTTR"},{id:"ellipse",name:"Ellipse",icon:C.jsx(pt,{type:"ellipse"}),command:"Ellipse"},{id:"text",name:"Text",icon:C.jsx(pt,{type:"text"}),command:"Text"},{id:"offset",name:"Offset",icon:C.jsx(pt,{type:"offset"}),command:"Offset"},{id:"trim",name:"Trim",icon:C.jsx(pt,{type:"scissors"}),command:"Trim"},{id:"fillet",name:"Fillet",icon:C.jsx(pt,{type:"fillet"}),command:"Fillet"},{id:"chamfer",name:"Chamfer",icon:C.jsx(pt,{type:"chamfer"}),command:"Chamfer"},{id:"mirror",name:"Mirror",icon:C.jsx(pt,{type:"mirror"}),command:"Mirror"},{id:"dimension-linear",name:"Linear Dimension",icon:C.jsx(pt,{type:"dimension-linear"}),command:"DimLinear"},{id:"dimension-aligned",name:"Aligned Dimension",icon:C.jsx(pt,{type:"dimension-aligned"}),command:"DimAligned"},{id:"dimension-angular",name:"Angular Dimension",icon:C.jsx(pt,{type:"dimension-angular"}),command:"DimAngular"},{id:"dimension-radial",name:"Radial Dimension",icon:C.jsx(pt,{type:"dimension-radial"}),command:"DimRadial"},{id:"dimension-diameter",name:"Diameter Dimension",icon:C.jsx(pt,{type:"dimension-diameter"}),command:"DimDiameter"},{id:"dimension-coordinate",name:"Coordinate Dimension",icon:C.jsx(pt,{type:"dimension-coordinate"}),command:"DimCoordinate"}],Em=[{id:1,name:"Default",color:"#FFFFFF",isVisible:!0,isLocked:!1},{id:2,name:"Construction",color:"#00FFFF",isVisible:!0,isLocked:!1},{id:3,name:"Dimensions",color:"#FFFF00",isVisible:!0,isLocked:!1},{id:4,name:"Notes",color:"#00FF00",isVisible:!0,isLocked:!1}],Gc=["sans-serif","serif","monospace","Arial","Courier New","Georgia","Times New Roman","Verdana","Impact","Comic Sans MS"],WA={drawings:[{shape:"circle",center:{x:400,y:300},radius:150,layerName:"Face Outline",color:"#FFEB3B"},{shape:"circle",center:{x:350,y:250},radius:20,layerName:"Eyes",color:"#FFFFFF"},{shape:"circle",center:{x:450,y:250},radius:20,layerName:"Eyes",color:"#FFFFFF"},{shape:"arc",center:{x:400,y:320},radius:80,startAngle:.2,endAngle:2.94,counterClockwise:!1,layerName:"Mouth",color:"#FFFFFF"}]},jA={drawings:[{shape:"circle",center:{x:400,y:300},radius:100,layerName:"Flange Body",color:"#B0BEC5"},{shape:"circle",center:{x:400,y:300},radius:40,layerName:"Flange Body",color:"#B0BEC5"},{shape:"circle",center:{x:400,y:230},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:470,y:300},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:400,y:370},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:330,y:300},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:449.5,y:250.5},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:449.5,y:349.5},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:350.5,y:349.5},radius:8,layerName:"Bolt Holes",color:"#78909C"},{shape:"circle",center:{x:350.5,y:250.5},radius:8,layerName:"Bolt Holes",color:"#78909C"}]},e1={drawings:[{shape:"rectangle",x:350,y:50,width:100,height:50,layerName:"Flowchart Blocks",color:"#81D4FA"},{shape:"text",position:{x:400,y:75},content:"Start",textAlign:"center",textBaseline:"middle",layerName:"Flowchart Text",color:"#FFFFFF"},{shape:"line",points:[{x:400,y:100},{x:400,y:140}],layerName:"Flowchart Arrows"},{shape:"polyline",points:[{x:395,y:135},{x:400,y:140},{x:405,y:135}],layerName:"Flowchart Arrows"},{shape:"rectangle",x:325,y:140,width:150,height:60,layerName:"Flowchart Blocks",color:"#81D4FA"},{shape:"text",position:{x:400,y:170},content:"Process Data",textAlign:"center",textBaseline:"middle",layerName:"Flowchart Text",color:"#FFFFFF"},{shape:"line",points:[{x:400,y:200},{x:400,y:240}],layerName:"Flowchart Arrows"},{shape:"polyline",points:[{x:395,y:235},{x:400,y:240},{x:405,y:235}],layerName:"Flowchart Arrows"},{shape:"polyline",points:[{x:400,y:240},{x:480,y:290},{x:400,y:340},{x:320,y:290},{x:400,y:240}],layerName:"Flowchart Blocks",color:"#A5D6A7"},{shape:"text",position:{x:400,y:290},content:"Is valid?",textAlign:"center",textBaseline:"middle",layerName:"Flowchart Text",color:"#FFFFFF"},{shape:"line",points:[{x:480,y:290},{x:550,y:290}],layerName:"Flowchart Arrows"},{shape:"polyline",points:[{x:545,y:285},{x:550,y:290},{x:545,y:295}],layerName:"Flowchart Arrows"},{shape:"text",position:{x:515,y:280},content:"Yes",layerName:"Flowchart Text"},{shape:"line",points:[{x:400,y:340},{x:400,y:380}],layerName:"Flowchart Arrows"},{shape:"polyline",points:[{x:395,y:375},{x:400,y:380},{x:405,y:375}],layerName:"Flowchart Arrows"},{shape:"text",position:{x:410,y:360},content:"No",layerName:"Flowchart Text"},{shape:"rectangle",x:550,y:265,width:100,height:50,layerName:"Flowchart Blocks",color:"#EF9A9A"},{shape:"text",position:{x:600,y:290},content:"End",textAlign:"center",textBaseline:"middle",layerName:"Flowchart Text",color:"#FFFFFF"},{shape:"rectangle",x:350,y:380,width:100,height:50,layerName:"Flowchart Blocks",color:"#EF9A9A"},{shape:"text",position:{x:400,y:405},content:"End",textAlign:"center",textBaseline:"middle",layerName:"Flowchart Text",color:"#FFFFFF"}]},t1={drawings:[{shape:"rectangle",x:250,y:250,width:300,height:200,layerName:"Walls",color:"#C5CAE9"},{shape:"polyline",points:[{x:230,y:250},{x:400,y:180},{x:570,y:250}],layerName:"Roof",color:"#A1887F"},{shape:"rectangle",x:380,y:380,width:40,height:70,layerName:"Doors",color:"#795548"},{shape:"circle",center:{x:412,y:415},radius:2,layerName:"Doors",color:"#FFC107"},{shape:"rectangle",x:280,y:390,width:50,height:40,layerName:"Windows",color:"#81D4FA"},{shape:"rectangle",x:470,y:390,width:50,height:40,layerName:"Windows",color:"#81D4FA"},{shape:"rectangle",x:280,y:280,width:50,height:40,layerName:"Windows",color:"#81D4FA"},{shape:"rectangle",x:470,y:280,width:50,height:40,layerName:"Windows",color:"#81D4FA"},{shape:"line",points:[{x:305,y:390},{x:305,y:430}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:280,y:410},{x:330,y:410}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:495,y:390},{x:495,y:430}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:470,y:410},{x:520,y:410}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:305,y:280},{x:305,y:320}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:280,y:300},{x:330,y:300}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:495,y:280},{x:495,y:320}],layerName:"Windows",color:"#FFFFFF"},{shape:"line",points:[{x:470,y:300},{x:520,y:300}],layerName:"Windows",color:"#FFFFFF"}]},n1={drawings:[{shape:"polyline",points:[{x:100,y:100},{x:600,y:100},{x:600,y:500},{x:100,y:500},{x:100,y:100}],layerName:"Walls",color:"#FFFFFF"},{shape:"rectangle",x:100,y:100,width:500,height:8,layerName:"Walls",color:"#FFFFFF"},{shape:"rectangle",x:100,y:492,width:500,height:8,layerName:"Walls",color:"#FFFFFF"},{shape:"rectangle",x:100,y:100,width:8,height:400,layerName:"Walls",color:"#FFFFFF"},{shape:"rectangle",x:592,y:100,width:8,height:400,layerName:"Walls",color:"#FFFFFF"},{shape:"rectangle",x:108,y:108,width:484,height:60,layerName:"Cabinets",color:"#A1887F"},{shape:"rectangle",x:108,y:432,width:250,height:60,layerName:"Cabinets",color:"#A1887F"},{shape:"rectangle",x:118,y:118,width:80,height:40,layerName:"Appliances",color:"#B0BEC5"},{shape:"text",position:{x:158,y:138},content:"Sink",textAlign:"center",textBaseline:"middle",layerName:"Notes",color:"#CFD8DC",fontSize:10},{shape:"rectangle",x:400,y:432,width:60,height:60,layerName:"Appliances",color:"#B0BEC5"},{shape:"text",position:{x:430,y:462},content:"Fridge",textAlign:"center",textBaseline:"middle",layerName:"Notes",color:"#CFD8DC",fontSize:10},{shape:"rectangle",x:522,y:118,width:60,height:50,layerName:"Appliances",color:"#90A4AE"},{shape:"text",position:{x:552,y:143},content:"Stove",textAlign:"center",textBaseline:"middle",layerName:"Notes",color:"#CFD8DC",fontSize:10},{shape:"dimension-linear",p1:{x:100,y:80},p2:{x:600,y:80},textPosition:{x:350,y:70},layerName:"Dimensions",color:"#FFEB3B"},{shape:"dimension-linear",p1:{x:80,y:100},p2:{x:80,y:500},textPosition:{x:70,y:300},layerName:"Dimensions",color:"#FFEB3B"}]},i1={drawings:[{shape:"circle",center:{x:400,y:300},radius:150,layerName:"Base Plate",color:"#455A64",linetype:"Dashed"},{shape:"circle",center:{x:400,y:300},radius:100,layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"circle",center:{x:400,y:300},radius:20,layerName:"Geneva Wheel",color:"#4DD0E1"},{shape:"arc",center:{x:400,y:300},radius:100,startAngle:.52,endAngle:-.52,counterClockwise:!1,layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"arc",center:{x:400,y:300},radius:100,startAngle:2.62,endAngle:3.66,counterClockwise:!1,layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"line",points:[{x:486.6,y:350},{x:540,y:390}],layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"line",points:[{x:486.6,y:250},{x:540,y:210}],layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"line",points:[{x:313.4,y:350},{x:260,y:390}],layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"line",points:[{x:313.4,y:250},{x:260,y:210}],layerName:"Geneva Wheel",color:"#00ACC1"},{shape:"circle",center:{x:220,y:300},radius:75,layerName:"Drive Wheel",color:"#7CB342",linetype:"Dashed"},{shape:"circle",center:{x:220,y:300},radius:15,layerName:"Drive Wheel",color:"#9CCC65"},{shape:"circle",center:{x:285.5,y:334.5},radius:8,layerName:"Drive Wheel",color:"#AED581"},{shape:"arc",center:{x:220,y:300},radius:75,startAngle:.7,endAngle:-.7,counterClockwise:!0,layerName:"Drive Wheel Lock",color:"#D4E157"}]},Ui=({title:n,children:e})=>{const[o,s]=ee.useState(!1),r=ee.useRef(null);return ee.useEffect(()=>{const c=f=>{r.current&&!r.current.contains(f.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),C.jsxs("div",{className:"relative",ref:r,children:[C.jsx("div",{className:"px-3 py-1 hover:bg-zinc-700 cursor-pointer rounded-sm",onClick:()=>s(!o),children:n}),o&&C.jsx("div",{className:"absolute top-full left-0 mt-1 bg-zinc-800 border border-zinc-700 rounded-md shadow-lg p-1 text-white text-xs z-50 w-56",onClick:c=>{c.target.closest('[role="menuitem"]')&&s(!1)},children:e})]})},Qe=({onClick:n,children:e,icon:o,disabled:s=!1,shortcut:r})=>C.jsxs("div",{role:"menuitem",onClick:s?void 0:n,className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${s?"text-zinc-500 cursor-not-allowed":"hover:bg-zinc-700 cursor-pointer"}`,children:[C.jsxs("div",{className:"flex items-center",children:[o&&Um.cloneElement(o,{className:"w-4 h-4 mr-2"}),C.jsx("span",{children:e})]}),r&&C.jsx("span",{className:"text-zinc-500",children:r})]}),Fi=()=>C.jsx("div",{className:"border-t border-zinc-700 my-1"}),o1=({tools:n,onToolSelect:e,onUndo:o,onRedo:s,canUndo:r,canRedo:c,onZoomExtents:f,onNew:y,onOpen:m,onSave:p,onExport:v,onImport:x,onExecuteExample:S,onExecuteJsonExample:_})=>{const U=n.filter(We=>We.id.startsWith("dimension-")),P=We=>n.find(at=>at.id===We),w=P("select"),I=P("point"),pe=P("line"),le=P("elastic-line"),he=P("polyline"),Ce=P("elastic-polyline"),_e=P("circle"),ve=P("ellipse"),Je=P("rectangle"),Ae=P("arc-3p"),Ve=P("arc-cra"),Ze=P("arc-ttr"),it=P("spline"),nt=P("nurbs"),ht=P("mirror"),yt=P("offset"),j=P("trim"),xe=P("fillet"),ze=P("chamfer");return C.jsxs("header",{className:"flex-shrink-0 bg-zinc-900 border-b border-zinc-700 flex items-center h-8 px-2",children:[C.jsx("div",{className:"text-cyan-400 font-bold text-lg mr-6",children:"R-CAD"}),C.jsxs("nav",{className:"flex items-center text-xs",children:[C.jsxs(Ui,{title:"File",children:[C.jsx(Qe,{onClick:y,children:"New"}),C.jsx(Qe,{onClick:m,children:"Open..."}),C.jsx(Qe,{onClick:p,children:"Save"}),C.jsx(Qe,{onClick:p,children:"Save As..."}),C.jsx(Fi,{}),C.jsx(Qe,{onClick:v,children:"Export..."}),C.jsx(Qe,{onClick:x,children:"Import..."})]}),C.jsxs(Ui,{title:"Edit",children:[C.jsx(Qe,{onClick:o,disabled:!r,shortcut:"Ctrl+Z",children:"Undo"}),C.jsx(Qe,{onClick:s,disabled:!c,shortcut:"Ctrl+Y",children:"Redo"})]}),C.jsx(Ui,{title:"View",children:C.jsx(Qe,{onClick:f,children:"Zoom Extents"})}),C.jsxs(Ui,{title:"Curve",children:[I&&C.jsx(Qe,{onClick:()=>e(I),icon:I.icon,children:I.name}),pe&&C.jsx(Qe,{onClick:()=>e(pe),icon:pe.icon,children:pe.name}),le&&C.jsx(Qe,{onClick:()=>e(le),icon:le.icon,children:le.name}),he&&C.jsx(Qe,{onClick:()=>e(he),icon:he.icon,children:he.name}),Ce&&C.jsx(Qe,{onClick:()=>e(Ce),icon:Ce.icon,children:Ce.name}),C.jsx(Fi,{}),_e&&C.jsx(Qe,{onClick:()=>e(_e),icon:_e.icon,children:_e.name}),ve&&C.jsx(Qe,{onClick:()=>e(ve),icon:ve.icon,children:ve.name}),Je&&C.jsx(Qe,{onClick:()=>e(Je),icon:Je.icon,children:Je.name}),C.jsx(Fi,{}),Ae&&C.jsx(Qe,{onClick:()=>e(Ae),icon:Ae.icon,children:Ae.name}),Ve&&C.jsx(Qe,{onClick:()=>e(Ve),icon:Ve.icon,children:Ve.name}),Ze&&C.jsx(Qe,{onClick:()=>e(Ze),icon:Ze.icon,children:Ze.name}),C.jsx(Fi,{}),it&&C.jsx(Qe,{onClick:()=>e(it),icon:it.icon,children:it.name}),nt&&C.jsx(Qe,{onClick:()=>e(nt),icon:nt.icon,children:nt.name})]}),C.jsx(Ui,{title:"Dimension",children:U.map(We=>C.jsx(Qe,{onClick:()=>e(We),icon:We.icon,children:We.name},We.id))}),C.jsxs(Ui,{title:"Transform",children:[w&&C.jsx(Qe,{onClick:()=>e(w),children:"Move"}),w&&C.jsx(Qe,{onClick:()=>e(w),children:"Rotate"}),w&&C.jsx(Qe,{onClick:()=>e(w),children:"Scale"}),C.jsx(Fi,{}),ht&&C.jsx(Qe,{onClick:()=>e(ht),icon:ht.icon,children:ht.name}),yt&&C.jsx(Qe,{onClick:()=>e(yt),icon:yt.icon,children:yt.name}),C.jsx(Fi,{}),j&&C.jsx(Qe,{onClick:()=>e(j),icon:j.icon,children:j.name}),xe&&C.jsx(Qe,{onClick:()=>e(xe),icon:xe.icon,children:xe.name}),ze&&C.jsx(Qe,{onClick:()=>e(ze),icon:ze.icon,children:ze.name}),C.jsx(Fi,{}),C.jsx(Qe,{onClick:()=>alert("Align (Not Implemented)"),children:"Align"})]}),C.jsx(Ui,{title:"Analyze",children:C.jsx(Qe,{onClick:()=>alert("Distance"),children:"Distance"})}),C.jsx(Ui,{title:"Render",children:C.jsx(Qe,{onClick:()=>alert("Render"),children:"Render"})}),C.jsxs(Ui,{title:"Help",children:[C.jsx(Qe,{onClick:()=>alert(`About R-CAD Professional

A powerful 2D CAD tool with an integrated AI assistant.`),children:"About"}),C.jsx(Fi,{}),C.jsx("div",{className:"px-3 pt-1.5 pb-1 text-zinc-500 text-xs font-semibold",children:"AI Prompt Examples"}),C.jsx(Qe,{onClick:()=>S("A floor plan for a small 1-bedroom apartment"),children:"1-Bedroom Floor Plan"}),C.jsx(Qe,{onClick:()=>S("A simple mechanical gear with 12 teeth"),children:"Mechanical Gear"}),C.jsx(Qe,{onClick:()=>S("A 2D side-view diagram of a bicycle"),children:"Bicycle Diagram"}),C.jsx(Fi,{}),C.jsx("div",{className:"px-3 pt-1.5 pb-1 text-zinc-500 text-xs font-semibold",children:"Instant Examples"}),C.jsx(Qe,{onClick:()=>_(WA,"Smiley Face"),children:"Smiley Face"}),C.jsx(Qe,{onClick:()=>_(jA,"Mechanical Flange"),children:"Mechanical Flange"}),C.jsx(Qe,{onClick:()=>_(e1,"Simple Flowchart"),children:"Simple Flowchart"}),C.jsx(Qe,{onClick:()=>_(t1,"House Front Elevation"),children:"House Front Elevation"}),C.jsx(Qe,{onClick:()=>_(n1,"Kitchen Layout"),children:"Kitchen Layout"}),C.jsx(Qe,{onClick:()=>_(i1,"Geneva Drive Mechanism"),children:"Geneva Drive Mechanism"})]})]})]})},l1=({tools:n,activeTool:e,onToolSelect:o})=>C.jsx("aside",{className:"w-12 bg-zinc-800 border-r border-zinc-700 flex flex-col items-center py-2 space-y-1",children:n.map(s=>C.jsx("button",{onClick:()=>o(s),title:s.name,className:`p-2 rounded-md transition-colors duration-150 ${(e==null?void 0:e.id)===s.id?"bg-sky-600 text-white":"text-gray-400 hover:bg-zinc-700 hover:text-white"}`,children:s.icon},s.id))}),s1=["endpoint","midpoint","center","node","quadrant","intersection","perpendicular","tangent","nearest","geometric-center"],Tm={endpoint:"EndPoint",midpoint:"MidPoint",center:"Center",node:"Node",quadrant:"Quadrant",intersection:"Intersection",perpendicular:"Perpendicular",tangent:"Tangent",nearest:"Nearest","geometric-center":"Geometric Center"},a1=({activeModes:n,onToggle:e,isOsnapEnabled:o,onToggleOsnap:s})=>C.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-zinc-800 border border-zinc-700 rounded-md shadow-lg p-1 text-white pointer-events-auto",children:[C.jsxs("div",{onClick:s,className:"px-3 py-1.5 text-xs text-left rounded transition-colors flex items-center justify-between cursor-pointer hover:bg-zinc-700",children:[C.jsx("span",{children:"Object Snap On (F3)"}),C.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 flex items-center transition-colors ${o?"bg-sky-600":"bg-zinc-600"}`,children:C.jsx("div",{className:`w-3 h-3 bg-white rounded-full transition-transform ${o?"transform translate-x-4":""}`})})]}),C.jsx("div",{className:"border-t border-zinc-600 my-1"}),C.jsx("div",{className:"grid grid-cols-2 gap-1",children:s1.map(r=>C.jsx("button",{onClick:()=>e(r),title:Tm[r],className:`px-3 py-1.5 text-xs text-left rounded transition-colors ${n.has(r)?"bg-sky-600 text-white":"text-gray-300 hover:bg-zinc-700"}`,children:Tm[r]},r))})]}),r1=[90,45,30,22.5,15,5],u1=({currentAngle:n,onAngleSelect:e,isPolarTrackingEnabled:o,onTogglePolarTracking:s})=>C.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-zinc-800 border border-zinc-700 rounded-md shadow-lg p-1 text-white pointer-events-auto",children:[C.jsxs("div",{onClick:s,className:"px-3 py-1.5 text-xs text-left rounded transition-colors flex items-center justify-between cursor-pointer hover:bg-zinc-700",children:[C.jsx("span",{children:"Polar Tracking On"}),C.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 flex items-center transition-colors ${o?"bg-sky-600":"bg-zinc-600"}`,children:C.jsx("div",{className:`w-3 h-3 bg-white rounded-full transition-transform ${o?"transform translate-x-4":""}`})})]}),C.jsx("div",{className:"border-t border-zinc-600 my-1"}),C.jsx("div",{className:"px-2 py-1 text-gray-400 text-xs",children:"Tracking Angles"}),r1.map(r=>C.jsxs("button",{onClick:()=>e(r),className:`px-3 py-1.5 text-xs text-left w-full rounded transition-colors ${n===r&&o?"bg-sky-600 text-white":"text-gray-300 hover:bg-zinc-700"}`,children:[r,""]},r))]}),vn=8,c1=vn/2,ef=5,er=10,f1=10,Yo={Solid:[],Dashed:[8,4],Dotted:[2,3],DashDot:[8,4,2,4]},Z={sub:(n,e)=>({x:n.x-e.x,y:n.y-e.y}),add:(n,e)=>({x:n.x+e.x,y:n.y+e.y}),mul:(n,e)=>({x:n.x*e,y:n.y*e}),len:n=>Math.hypot(n.x,n.y),normalize:n=>{const e=Z.len(n)||1;return{x:n.x/e,y:n.y/e}},perp:n=>({x:-n.y,y:n.x}),dot:(n,e)=>n.x*e.x+n.y*e.y},d1=(n,e,o,s,r)=>{const c=r.find(p=>p.id===e.layerId);if(c&&!c.isVisible)return;const f=e.color??(c?c.color:"#FFFFFF"),m=(o?12:8)/s/2;n.beginPath(),n.moveTo(e.position.x-m,e.position.y),n.lineTo(e.position.x+m,e.position.y),n.moveTo(e.position.x,e.position.y-m),n.lineTo(e.position.x,e.position.y+m),n.strokeStyle=o?"#00FFFF":f,n.lineWidth=(o?2:1.5)/s,n.stroke()},fi=(n,e,o,s,r,c,f)=>{const y=r.find(v=>v.id===e.layerId);if(y&&!y.isVisible)return;n.save();const m=(f==null?void 0:f.color)??e.color??(y?y.color:"#FFFFFF"),p=e.linetype;if(n.beginPath(),n.moveTo(e.points[0].x,e.points[0].y),n.lineTo(e.points[1].x,e.points[1].y),n.strokeStyle=o?"#00FFFF":m,n.lineWidth=(o?2.5:1.5)/s,f!=null&&f.lineDash)n.setLineDash(f.lineDash.map(v=>v/s));else if(p&&p!=="Solid"){const v=Yo[p]||[];n.setLineDash(v.map(x=>x/s))}if(n.stroke(),n.restore(),c){const v=vn/s,x=v/2;for(const S of e.points)n.fillStyle="#00FFFF",n.fillRect(S.x-x,S.y-x,v,v)}},bs=(n,e,o,s,r,c,f)=>{if(e.points.length<2)return;const y=r.find(v=>v.id===e.layerId);if(y&&!y.isVisible)return;n.save();const m=(f==null?void 0:f.color)??e.color??(y?y.color:"#FFFFFF"),p=e.linetype;n.beginPath(),n.moveTo(e.points[0].x,e.points[0].y);for(let v=1;v<e.points.length;v++)n.lineTo(e.points[v].x,e.points[v].y);if(n.strokeStyle=o?"#00FFFF":m,n.lineWidth=(o?2.5:1.5)/s,f!=null&&f.lineDash)n.setLineDash(f.lineDash.map(v=>v/s));else if(p&&p!=="Solid"){const v=Yo[p]||[];n.setLineDash(v.map(x=>x/s))}if(n.stroke(),n.restore(),c){const v=vn/s,x=v/2;for(const S of e.points)n.fillStyle="#00FFFF",n.fillRect(S.x-x,S.y-x,v,v)}},Mg=(n,e,o,s,r)=>{const c=n*n,f=c*n;return{x:.5*(2*o.x+(-e.x+s.x)*n+(2*e.x-5*o.x+4*s.x-r.x)*c+(-e.x+3*o.x-3*s.x+r.x)*f),y:.5*(2*o.y+(-e.y+s.y)*n+(2*e.y-5*o.y+4*s.y-r.y)*c+(-e.y+3*o.y-3*s.y+r.y)*f)}},qc=(n,e,o,s,r)=>{const c=n*n,f=c*n,y=1-n,m=y*y*y,p=(m*e.x+(3*f-6*c+4)*o.x+(-3*f+3*c+3*n+1)*s.x+f*r.x)/6,v=(m*e.y+(3*f-6*c+4)*o.y+(-3*f+3*c+3*n+1)*s.y+f*r.y)/6;return{x:p,y:v}},Cm=(n,e,o,s,r,c)=>{if(e.points.length<2)return;const f=r.find(p=>p.id===e.layerId);if(f&&!f.isVisible)return;n.save();const y=e.color??(f?f.color:"#FFFFFF"),m=e.linetype;if(n.strokeStyle=o?"#00FFFF":y,n.lineWidth=(o?2.5:1.5)/s,m&&m!=="Solid"){const p=Yo[m]||[];n.setLineDash(p.map(v=>v/s))}if(n.beginPath(),n.moveTo(e.points[0].x,e.points[0].y),e.interpolation==="Linear"||e.points.length<4)for(let p=1;p<e.points.length;p++)n.lineTo(e.points[p].x,e.points[p].y);else if(e.interpolation==="Cardinal"){n.moveTo(e.points[0].x,e.points[0].y);for(let p=0;p<e.points.length-1;p++){const v=e.points[p===0?0:p-1],x=e.points[p],S=e.points[p+1],_=e.points[p+2>e.points.length-1?p+1:p+2];for(let U=.05;U<=1.0001;U+=.05){const P=Mg(U,v,x,S,_);n.lineTo(P.x,P.y)}}}else if(e.interpolation==="Basis")for(let p=0;p<e.points.length-1;p++){const v=e.points[p===0?0:p-1],x=e.points[p],S=e.points[p+1],_=e.points[p+2>e.points.length-1?p+1:p+2];for(let U=0;U<=1.0001;U+=.05){const P=qc(U,v,x,S,_);p===0&&U===0?n.moveTo(P.x,P.y):n.lineTo(P.x,P.y)}}if(n.stroke(),n.restore(),c){const p=vn/s,v=p/2;n.strokeStyle="rgba(0, 255, 255, 0.5)",n.lineWidth=1/s,n.setLineDash([4/s,4/s]),n.beginPath(),n.moveTo(e.points[0].x,e.points[0].y);for(let x=1;x<e.points.length;x++)n.lineTo(e.points[x].x,e.points[x].y);n.stroke(),n.setLineDash([]),n.fillStyle="#00FFFF";for(const x of e.points)n.fillRect(x.x-v,x.y-v,p,p)}},_m=(n,e,o,s,r,c)=>{const f=r.find(p=>p.id===e.layerId);if(f&&!f.isVisible)return;n.save();const y=e.color??(f?f.color:"#FFFFFF"),m=e.linetype;if(n.strokeStyle=o?"#00FFFF":y,n.lineWidth=(o?2.5:1.5)/s,m&&m!=="Solid"){const p=Yo[m]||[];n.setLineDash(p.map(v=>v/s))}if(n.strokeRect(e.x,e.y,e.width,e.height),n.restore(),c){const p=vn/s,v=p/2,x=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];n.fillStyle="#00FFFF";for(const S of x)n.fillRect(S.x-v,S.y-v,p,p)}},Vo=(n,e,o,s,r,c,f)=>{const y=r.find(v=>v.id===e.layerId);if(y&&!y.isVisible)return;n.save();const m=(f==null?void 0:f.color)??e.color??(y?y.color:"#FFFFFF"),p=e.linetype;if(n.beginPath(),n.arc(e.center.x,e.center.y,e.radius,0,2*Math.PI),n.strokeStyle=o?"#00FFFF":m,n.lineWidth=(o?2.5:1.5)/s,f!=null&&f.lineDash)n.setLineDash(f.lineDash.map(v=>v/s));else if(p&&p!=="Solid"){const v=Yo[p]||[];n.setLineDash(v.map(x=>x/s))}if(n.stroke(),n.restore(),c){const v=vn/s,x=v/2;n.fillStyle="#00FFFF",n.fillRect(e.center.x-x,e.center.y-x,v,v);const S={x:e.center.x+e.radius,y:e.center.y};n.fillRect(S.x-x,S.y-x,v,v)}},Rl=(n,e,o,s,r,c,f)=>{const y=r.find(v=>v.id===e.layerId);if(y&&!y.isVisible)return;n.save();const m=(f==null?void 0:f.color)??e.color??(y?y.color:"#FFFFFF"),p=e.linetype;if(n.beginPath(),n.arc(e.center.x,e.center.y,e.radius,e.startAngle,e.endAngle,e.counterClockwise),n.strokeStyle=o?"#00FFFF":m,n.lineWidth=(o?2.5:1.5)/s,f!=null&&f.lineDash)n.setLineDash(f.lineDash.map(v=>v/s));else if(p&&p!=="Solid"){const v=Yo[p]||[];n.setLineDash(v.map(x=>x/s))}if(n.stroke(),n.restore(),c){const v=vn/s,x=v/2;n.fillStyle="#00FFFF";const S={x:e.center.x+e.radius*Math.cos(e.startAngle),y:e.center.y+e.radius*Math.sin(e.startAngle)},_={x:e.center.x+e.radius*Math.cos(e.endAngle),y:e.center.y+e.radius*Math.sin(e.endAngle)};n.fillRect(S.x-x,S.y-x,v,v),n.fillRect(_.x-x,_.y-x,v,v),n.fillRect(e.center.x-x,e.center.y-x,v,v)}},p1=(n,e,o,s,r,c)=>{const f=r.find(p=>p.id===e.layerId);if(f&&!f.isVisible)return;n.save();const y=e.color??(f?f.color:"#FFFFFF");n.translate(e.position.x,e.position.y),n.rotate(e.rotation);const m=e.fontSize;if(n.font=`${m}px ${e.fontFamily}`,n.fillStyle=o?"#00FFFF":y,n.textAlign=e.textAlign,n.textBaseline=e.textBaseline,n.fillText(e.content,0,0),n.restore(),c){const p=vn/s,v=p/2;n.fillStyle="#00FFFF",n.fillRect(e.position.x-v,e.position.y-v,p,p)}},Am=(n,e,o,s,r,c)=>{const f=r.find(p=>p.id===e.layerId);if(f&&!f.isVisible)return;n.save();const y=e.color??(f?f.color:"#FFFFFF"),m=e.linetype;if(n.beginPath(),n.ellipse(e.center.x,e.center.y,e.radiusX,e.radiusY,e.rotation,0,2*Math.PI),n.strokeStyle=o?"#00FFFF":y,n.lineWidth=(o?2.5:1.5)/s,m&&m!=="Solid"){const p=Yo[m]||[];n.setLineDash(p.map(v=>v/s))}if(n.stroke(),n.restore(),c){const p=vn/s,v=p/2;n.fillStyle="#00FFFF",n.fillRect(e.center.x-v,e.center.y-v,p,p);const x=Math.cos(e.rotation),S=Math.sin(e.rotation),_=[{x:e.center.x+e.radiusX*x,y:e.center.y+e.radiusX*S},{x:e.center.x-e.radiusX*x,y:e.center.y-e.radiusX*S},{x:e.center.x-e.radiusY*S,y:e.center.y+e.radiusY*x},{x:e.center.x+e.radiusY*S,y:e.center.y-e.radiusY*x}];for(const U of _)n.fillRect(U.x-v,U.y-v,p,p)}},Jo=(n,e,o)=>{const s=8/e,r=12/e,c=4/e,f=10/e;return n.lineWidth=1/e,n.strokeStyle=o,n.fillStyle=o,n.font=`${r}px sans-serif`,{arrowSize:s,textSize:r,extensionGap:c,extensionLineOffset:f,drawArrow:(m,p)=>{const v=Z.normalize(Z.sub(p,m)),x=Z.perp(v);n.beginPath(),n.moveTo(p.x,p.y),n.lineTo(p.x-v.x*s+x.x*s/3,p.y-v.y*s+x.y*s/3),n.lineTo(p.x-v.x*s-x.x*s/3,p.y-v.y*s-x.y*s/3),n.closePath(),n.fill()}}},h1=(n,e,o,s,r,c)=>{const f=r.find(le=>le.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF"),{extensionLineOffset:m,drawArrow:p}=Jo(n,s,y),v=Math.abs(e.p1.x-e.p2.x)<Math.abs(e.p1.y-e.p2.y);let x=e.p1,S=e.p2;v?x.y>S.y&&([x,S]=[S,x]):x.x>S.x&&([x,S]=[S,x]);const _=e.textPosition;let U,P,w,I,pe;if(n.beginPath(),v?(U=Math.abs(S.y-x.y).toFixed(2),P={x:_.x,y:x.y},w={x:_.x,y:S.y},I={x:x.x+Math.sign(_.x-x.x)*m,y:x.y},pe={x:S.x+Math.sign(_.x-S.x)*m,y:S.y},n.moveTo(x.x,x.y),n.lineTo(I.x,I.y),n.moveTo(S.x,S.y),n.lineTo(pe.x,pe.y),n.textAlign="right",n.textBaseline="middle"):(U=Math.abs(S.x-x.x).toFixed(2),P={x:x.x,y:_.y},w={x:S.x,y:_.y},I={x:x.x,y:x.y+Math.sign(_.y-x.y)*m},pe={x:S.x,y:S.y+Math.sign(_.y-S.y)*m},n.moveTo(x.x,x.y),n.lineTo(I.x,I.y),n.moveTo(S.x,S.y),n.lineTo(pe.x,pe.y),n.textAlign="center",n.textBaseline="bottom"),n.moveTo(P.x,P.y),n.lineTo(w.x,w.y),n.stroke(),p(w,P),p(P,w),n.fillText(U,_.x,_.y-4/s),c){const le=vn/s,he=le/2;n.fillStyle="#00FFFF",[e.p1,e.p2,e.textPosition].forEach(Ce=>{n.fillRect(Ce.x-he,Ce.y-he,le,le)})}},y1=(n,e,o,s,r,c)=>{const f=r.find(he=>he.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF"),{extensionGap:m,extensionLineOffset:p,drawArrow:v}=Jo(n,s,y),x=Z.normalize(Z.sub(e.p2,e.p1)),S=Z.perp(x),_=Z.dot(Z.sub(e.textPosition,e.p1),S),U=Z.add(e.p1,Z.mul(S,_)),P=Z.add(e.p2,Z.mul(S,_));Z.add(e.p1,Z.mul(S,Math.sign(_)*m)),Z.add(e.p2,Z.mul(S,Math.sign(_)*m));const w=Z.add(U,Z.mul(S,Math.sign(_)*p)),I=Z.add(P,Z.mul(S,Math.sign(_)*p));n.beginPath(),n.moveTo(e.p1.x,e.p1.y),n.lineTo(w.x,w.y),n.moveTo(e.p2.x,e.p2.y),n.lineTo(I.x,I.y),n.moveTo(U.x,U.y),n.lineTo(P.x,P.y),n.stroke(),v(P,U),v(U,P);const pe=Z.len(Z.sub(e.p2,e.p1)).toFixed(2),le=Z.add(U,Z.mul(Z.sub(P,U),.5));if(n.save(),n.translate(le.x,le.y),n.rotate(Math.atan2(x.y,x.x)),n.textAlign="center",n.textBaseline="bottom",n.fillText(pe,0,-4/s),n.restore(),c){const he=vn/s,Ce=he/2;n.fillStyle="#00FFFF",[e.p1,e.p2,e.textPosition].forEach(_e=>{n.fillRect(_e.x-Ce,_e.y-Ce,he,he)})}},m1=(n,e,o,s,r,c)=>{const f=r.find(U=>U.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF");Jo(n,s,y);const m=Math.atan2(e.p1.y-e.center.y,e.p1.x-e.center.x),p=Math.atan2(e.p2.y-e.center.y,e.p2.x-e.center.x);n.beginPath(),n.moveTo(e.center.x,e.center.y),n.lineTo(e.p1.x,e.p1.y),n.moveTo(e.center.x,e.center.y),n.lineTo(e.p2.x,e.p2.y),n.stroke(),n.beginPath(),n.arc(e.center.x,e.center.y,e.radius,m,p),n.stroke();let v=Math.abs(p-m);v>Math.PI&&(v=2*Math.PI-v);const x=(v*180/Math.PI).toFixed(1)+"",S=m+(p-m)/2,_={x:e.center.x+(e.radius+10/s)*Math.cos(S),y:e.center.y+(e.radius+10/s)*Math.sin(S)};if(n.textAlign="center",n.textBaseline="middle",n.fillText(x,_.x,_.y),c){const U=vn/s,P=U/2;n.fillStyle="#00FFFF";const w={x:e.center.x+e.radius*Math.cos(S),y:e.center.y+e.radius*Math.sin(S)};[e.center,e.p1,e.p2,w].forEach(I=>{n.fillRect(I.x-P,I.y-P,U,U)})}},g1=(n,e,o,s,r,c)=>{const f=r.find(_=>_.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF"),{drawArrow:m}=Jo(n,s,y),p=Z.len(Z.sub(e.radiusPoint,e.center)),v="R"+p.toFixed(2),x=Z.normalize(Z.sub(e.radiusPoint,e.center)),S=Z.add(e.center,Z.mul(x,p));if(n.beginPath(),n.moveTo(e.center.x,e.center.y),n.lineTo(e.radiusPoint.x,e.radiusPoint.y),n.stroke(),m(e.center,S),n.textAlign="left",n.textBaseline="middle",n.fillText(v,e.radiusPoint.x+4/s,e.radiusPoint.y),c){const _=vn/s,U=_/2;n.fillStyle="#00FFFF",[e.center,e.radiusPoint].forEach(P=>{n.fillRect(P.x-U,P.y-U,_,_)})}},v1=(n,e,o,s,r,c)=>{const f=r.find(S=>S.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF"),{drawArrow:m}=Jo(n,s,y),v=""+Z.len(Z.sub(e.p2,e.p1)).toFixed(2),x=Z.add(e.p1,Z.mul(Z.sub(e.p2,e.p1),.5));if(n.beginPath(),n.moveTo(e.p1.x,e.p1.y),n.lineTo(e.p2.x,e.p2.y),n.stroke(),m(e.p2,e.p1),m(e.p1,e.p2),n.textAlign="center",n.textBaseline="bottom",n.fillText(v,x.x,x.y-4/s),c){const S=vn/s,_=S/2;n.fillStyle="#00FFFF",[e.p1,e.p2].forEach(U=>{n.fillRect(U.x-_,U.y-_,S,S)})}},x1=(n,e,o,s,r,c)=>{const f=r.find(S=>S.id===e.layerId);if(f&&!f.isVisible)return;const y=o?"#00FFFF":e.color??(f?f.color:"#FFFFFF");Jo(n,s,y);const{point:m,leaderEndPoint:p,axis:v}=e,x=(v==="X"?"X=":"Y=")+(v==="X"?m.x:m.y).toFixed(2);if(n.beginPath(),v==="X"?(n.moveTo(m.x,m.y),n.lineTo(m.x,p.y),n.lineTo(p.x,p.y),n.textAlign="left",n.textBaseline="middle"):(n.moveTo(m.x,m.y),n.lineTo(p.x,m.y),n.lineTo(p.x,p.y),n.textAlign="center",n.textBaseline="top"),n.stroke(),n.fillText(x,p.x+(v==="X"?4/s:0),p.y+(v==="Y"?4/s:0)),c){const S=vn/s,_=S/2;n.fillStyle="#00FFFF",[e.point,e.leaderEndPoint].forEach(U=>{n.fillRect(U.x-_,U.y-_,S,S)})}},S1=(n,e,o,s)=>{const{pivot:r,size:c}=e,{x:f,y}=r,m=c/s,p=10/s,v=8/s;n.lineWidth=2/s,n.font=`${12/s}px sans-serif`,n.textAlign="center",n.textBaseline="middle",n.strokeStyle=o==="move-x"?"#FF8888":"#F44336",n.fillStyle=o==="move-x"?"#FF8888":"#F44336",n.beginPath(),n.moveTo(f,y),n.lineTo(f+m,y),n.stroke(),n.beginPath(),n.moveTo(f+m+p,y),n.lineTo(f+m,y-p/2),n.lineTo(f+m,y+p/2),n.closePath(),n.fill(),n.strokeStyle=o==="move-y"?"#88FF88":"#4CAF50",n.fillStyle=o==="move-y"?"#88FF88":"#4CAF50",n.beginPath(),n.moveTo(f,y),n.lineTo(f,y-m),n.stroke(),n.beginPath(),n.moveTo(f,y-m-p),n.lineTo(f-p/2,y-m),n.lineTo(f+p/2,y-m),n.closePath(),n.fill();const x=c*.8/s;n.strokeStyle=o==="rotate"?"#8888FF":"#2196F3",n.beginPath(),n.arc(f,y,x,-Math.PI*.1,-Math.PI*.9,!0),n.stroke();const S=c*.5/s,_={x:f+S,y:y-S};n.fillStyle=o==="scale"?"#FFFF88":"#FFEB3B",n.strokeStyle="#444",n.lineWidth=1/s,n.fillRect(_.x-v/2,_.y-v/2,v,v),n.strokeRect(_.x-v/2,_.y-v/2,v,v);const U=6/s;n.fillStyle=o==="pivot"?"#FFFFFF":"#CCCCCC",n.beginPath(),n.arc(f,y,U,0,2*Math.PI),n.fill(),n.strokeStyle="#444",n.stroke()},Ft=(n,e,o,s=ef)=>{const r=o.x-e.x,c=o.y-e.y;if(r===0&&c===0)return St(n,e)<s*s;const f=r*r+c*c;let y=((n.x-e.x)*r+(n.y-e.y)*c)/f;return y=Math.max(0,Math.min(1,y)),(n.x-(e.x+y*r))**2+(n.y-(e.y+y*c))**2<s*s},Mm=(n,e,o=ef)=>{const s=Math.hypot(n.x-e.center.x,n.y-e.center.y);if(Math.abs(s-e.radius)>o)return!1;let r=Math.atan2(n.y-e.center.y,n.x-e.center.x),c=e.startAngle,f=e.endAngle;e.counterClockwise&&([c,f]=[f,c]);const y=2*Math.PI,m=p=>(p%y+y)%y;return c=m(c),f=m(f),r=m(r),c<f?r>=c&&r<=f:r>=c||r<=f},Rm=(n,e,o)=>{const s=2*(n.x*(e.y-o.y)+e.x*(o.y-n.y)+o.x*(n.y-e.y));if(Math.abs(s)<1e-6)return null;const r=n.x**2+n.y**2,c=e.x**2+e.y**2,f=o.x**2+o.y**2,y={x:(r*(e.y-o.y)+c*(o.y-n.y)+f*(n.y-e.y))/s,y:(r*(o.x-e.x)+c*(n.x-o.x)+f*(e.x-n.x))/s},m=Math.hypot(n.x-y.x,n.y-y.y),p=Math.atan2(n.y-y.y,n.x-y.x),v=Math.atan2(o.y-y.y,o.x-y.x),S=(e.x-n.x)*(o.y-n.y)-(e.y-n.y)*(o.x-n.x)<0;return{center:y,radius:m,startAngle:p,endAngle:v,counterClockwise:S}},St=(n,e)=>(n.x-e.x)**2+(n.y-e.y)**2,Li=(n,e)=>{const o=Math.min(e.x,e.x+e.width),s=Math.max(e.x,e.x+e.width),r=Math.min(e.y,e.y+e.height),c=Math.max(e.y,e.y+e.height);return n.x>=o&&n.x<=s&&n.y>=r&&n.y<=c},E1=(n,e,o,s,r)=>{const c=c1/s;for(const f of e){if(!o.has(f.id))continue;const y=r.find(m=>m.id===f.layerId);if(!(y!=null&&y.isLocked)){if(f.type==="line"||f.type==="polyline"||f.type==="spline")for(let m=0;m<f.points.length;m++){const p=f.points[m];if(n.x>=p.x-c&&n.x<=p.x+c&&n.y>=p.y-c&&n.y<=p.y+c)return{objectId:f.id,pointIndex:m}}else if(f.type==="rectangle"){const m=f,p=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}];for(let v=0;v<p.length;v++){const x=p[v];if(n.x>=x.x-c&&n.x<=x.x+c&&n.y>=x.y-c&&n.y<=x.y+c)return{objectId:f.id,pointIndex:v}}}else if(f.type==="circle"){const m=f,p=m.center,v={x:m.center.x+m.radius,y:m.center.y};if(n.x>=p.x-c&&n.x<=p.x+c&&n.y>=p.y-c&&n.y<=p.y+c)return{objectId:f.id,pointIndex:0};if(n.x>=v.x-c&&n.x<=v.x+c&&n.y>=v.y-c&&n.y<=v.y+c)return{objectId:f.id,pointIndex:1}}else if(f.type==="arc"){const m=f,p={x:m.center.x+m.radius*Math.cos(m.startAngle),y:m.center.y+m.radius*Math.sin(m.startAngle)},v={x:m.center.x+m.radius*Math.cos(m.endAngle),y:m.center.y+m.radius*Math.sin(m.endAngle)},x=[p,v,m.center];for(let S=0;S<x.length;S++){const _=x[S];if(n.x>=_.x-c&&n.x<=_.x+c&&n.y>=_.y-c&&n.y<=_.y+c)return{objectId:f.id,pointIndex:S}}}else if(f.type==="text"){const m=f.position;if(n.x>=m.x-c&&n.x<=m.x+c&&n.y>=m.y-c&&n.y<=m.y+c)return{objectId:f.id,pointIndex:0}}else if(f.type==="ellipse"){const m=f,p=Math.cos(m.rotation),v=Math.sin(m.rotation),x=[m.center,{x:m.center.x+m.radiusX*p,y:m.center.y+m.radiusX*v},{x:m.center.x-m.radiusX*p,y:m.center.y-m.radiusX*v},{x:m.center.x-m.radiusY*v,y:m.center.y+m.radiusY*p},{x:m.center.x+m.radiusY*v,y:m.center.y-m.radiusY*p}];for(let S=0;S<x.length;S++){const _=x[S];if(n.x>=_.x-c&&n.x<=_.x+c&&n.y>=_.y-c&&n.y<=_.y+c)return{objectId:f.id,pointIndex:S}}}else if(f.type==="dimension-linear"||f.type==="dimension-aligned"){const m=[f.p1,f.p2,f.textPosition];for(let p=0;p<m.length;p++)if(n.x>=m[p].x-c&&n.x<=m[p].x+c&&n.y>=m[p].y-c&&n.y<=m[p].y+c)return{objectId:f.id,pointIndex:p}}else if(f.type==="dimension-radial"){const m=[f.center,f.radiusPoint];for(let p=0;p<m.length;p++)if(n.x>=m[p].x-c&&n.x<=m[p].x+c&&n.y>=m[p].y-c&&n.y<=m[p].y+c)return{objectId:f.id,pointIndex:p}}else if(f.type==="dimension-diameter"){const m=[f.p1,f.p2];for(let p=0;p<m.length;p++)if(n.x>=m[p].x-c&&n.x<=m[p].x+c&&n.y>=m[p].y-c&&n.y<=m[p].y+c)return{objectId:f.id,pointIndex:p}}else if(f.type==="dimension-angular"){const m=Math.atan2(f.p1.y-f.center.y,f.p1.x-f.center.x),p=Math.atan2(f.p2.y-f.center.y,f.p2.x-f.center.x),v=m+(p-m)/2,x={x:f.center.x+f.radius*Math.cos(v),y:f.center.y+f.radius*Math.sin(v)},S=[f.center,f.p1,f.p2,x];for(let _=0;_<S.length;_++)if(n.x>=S[_].x-c&&n.x<=S[_].x+c&&n.y>=S[_].y-c&&n.y<=S[_].y+c)return{objectId:f.id,pointIndex:_}}else if(f.type==="dimension-coordinate"){const m=[f.point,f.leaderEndPoint];for(let p=0;p<m.length;p++)if(n.x>=m[p].x-c&&n.x<=m[p].x+c&&n.y>=m[p].y-c&&n.y<=m[p].y+c)return{objectId:f.id,pointIndex:p}}}}return null},yn=(n,e,o,s,r)=>{const c=ef/o;for(let f=e.length-1;f>=0;f--){const y=e[f],m=s.find(p=>p.id===y.layerId);if(!(!m||!m.isVisible||m.isLocked)){if(y.type==="line"&&Ft(n,y.points[0],y.points[1],c))return y;if(y.type==="polyline"){for(let p=0;p<y.points.length-1;p++)if(Ft(n,y.points[p],y.points[p+1],c))return y}else if(y.type==="spline"){const p=y;if(p.points.length<2)continue;if(p.interpolation==="Linear"||p.points.length<4){for(let v=0;v<p.points.length-1;v++)if(Ft(n,p.points[v],p.points[v+1],c))return y}else if(p.interpolation==="Cardinal")for(let v=0;v<p.points.length-1;v++){const x=p.points[v===0?0:v-1],S=p.points[v],_=p.points[v+1],U=p.points[v+2>p.points.length-1?v+1:v+2];let P=S;for(let w=.05;w<=1.001;w+=.05){const I=Mg(w,x,S,_,U);if(Ft(n,P,I,c))return y;P=I}}else if(p.interpolation==="Basis")for(let v=0;v<p.points.length-1;v++){const x=p.points[v===0?0:v-1],S=p.points[v],_=p.points[v+1],U=p.points[v+2>p.points.length-1?v+1:v+2];let P=qc(0,x,S,_,U);for(let w=.05;w<=1.001;w+=.05){const I=qc(w,x,S,_,U);if(Ft(n,P,I,c))return y;P=I}}}else{if(y.type==="point"&&St(n,y.position)<c*c)return y;if(y.type==="text"){if(!r)continue;const{position:p,content:v,fontSize:x,fontFamily:S,textAlign:_,textBaseline:U,rotation:P}=y,w={x:n.x-p.x,y:n.y-p.y},I=Math.cos(-P),pe=Math.sin(-P),le={x:w.x*I-w.y*pe,y:w.x*pe+w.y*I};r.save(),r.font=`${x}px ${S}`;const he=r.measureText(v);r.restore();let Ce=0,_e=0;_==="center"?Ce-=he.width/2:_==="right"&&(Ce-=he.width),U==="middle"?_e-=(he.actualBoundingBoxAscent+he.actualBoundingBoxDescent)/2:_e-=he.actualBoundingBoxAscent;const ve={x:Ce,y:_e,width:he.width,height:he.actualBoundingBoxAscent+he.actualBoundingBoxDescent};if(Li({x:le.x,y:le.y},ve))return y}else if(y.type==="rectangle"){const p=y,v={x:p.x,y:p.y},x={x:p.x+p.width,y:p.y},S={x:p.x+p.width,y:p.y+p.height},_={x:p.x,y:p.y+p.height};if(Ft(n,v,x,c)||Ft(n,x,S,c)||Ft(n,S,_,c)||Ft(n,_,v,c))return y}else if(y.type==="circle"){const p=Math.hypot(n.x-y.center.x,n.y-y.center.y);if(Math.abs(p-y.radius)<c)return y}else if(y.type==="arc"){if(Mm(n,y,c))return y}else if(y.type==="ellipse"){const{center:p,radiusX:v,radiusY:x,rotation:S}=y;if(v<=0||x<=0)continue;const _=n.x-p.x,U=n.y-p.y,P=Math.cos(-S),w=Math.sin(-S),I=_*P-U*w,pe=_*w+U*P,le=Math.pow(I/v,2)+Math.pow(pe/x,2);if(le>1e-6){const he=Math.hypot(I,pe);if(Math.abs(he-he/Math.sqrt(le))<c)return y}}else if(y.type.startsWith("dimension-")){if(y.type==="dimension-linear"||y.type==="dimension-aligned"){const p=y,{extensionLineOffset:v}=Jo(r,1,"");let x,S,_,U;if(y.type==="dimension-linear"){const P=Math.abs(p.p1.x-p.p2.x)<Math.abs(p.p1.y-p.p2.y);let w=p.p1,I=p.p2;if(P?w.y>I.y&&([w,I]=[I,w]):w.x>I.x&&([w,I]=[I,w]),P?(x={x:p.textPosition.x,y:w.y},S={x:p.textPosition.x,y:I.y},_={x:w.x+Math.sign(p.textPosition.x-w.x)*v,y:w.y},U={x:I.x+Math.sign(p.textPosition.x-I.x)*v,y:I.y}):(x={x:w.x,y:p.textPosition.y},S={x:I.x,y:p.textPosition.y},_={x:w.x,y:w.y+Math.sign(p.textPosition.y-w.y)*v},U={x:I.x,y:I.y+Math.sign(p.textPosition.y-I.y)*v}),Ft(n,p.p1,_,c)||Ft(n,p.p2,U,c)||Ft(n,x,S,c))return y}else{const P=Z.normalize(Z.sub(p.p2,p.p1)),w=Z.perp(P),I=Z.dot(Z.sub(p.textPosition,p.p1),w);if(x=Z.add(p.p1,Z.mul(w,I)),S=Z.add(p.p2,Z.mul(w,I)),_=Z.add(x,Z.mul(w,Math.sign(I)*v)),U=Z.add(S,Z.mul(w,Math.sign(I)*v)),Ft(n,p.p1,_,c)||Ft(n,p.p2,U,c)||Ft(n,x,S,c))return y}}else if(y.type==="dimension-angular"){if(Ft(n,y.center,y.p1,c)||Ft(n,y.center,y.p2,c))return y;const p={...y,startAngle:Math.atan2(y.p1.y-y.center.y,y.p1.x-y.center.x),endAngle:Math.atan2(y.p2.y-y.center.y,y.p2.x-y.center.x),counterClockwise:!1};if(Mm(n,p,c))return y}else if(y.type==="dimension-radial"){if(Ft(n,y.center,y.radiusPoint,c))return y}else if(y.type==="dimension-diameter"){if(Ft(n,y.p1,y.p2,c))return y}else if(y.type==="dimension-coordinate"){let p;if(y.axis==="X"?p={x:y.point.x,y:y.leaderEndPoint.y}:p={x:y.leaderEndPoint.x,y:y.point.y},Ft(n,y.point,p,c)||Ft(n,p,y.leaderEndPoint,c))return y}}}}}return null},Nm=(n,e,o)=>{const{pivot:s,size:r}=e,c=10/o,f=r/o,y=r*.8/o,m=r*.5/o;if(St(n,s)<c*c)return"pivot";const p={x:s.x+m,y:s.y-m};if(Math.abs(n.x-p.x)<c/2&&Math.abs(n.y-p.y)<c/2)return"scale";const v=Math.hypot(n.x-s.x,n.y-s.y);if(Math.abs(v-y)<c){let x=Math.atan2(n.y-s.y,n.x-s.x);if(x>-Math.PI*.9&&x<-Math.PI*.1)return"rotate"}return Ft(n,s,{x:s.x+f,y:s.y},c)&&n.x>s.x-c?"move-x":Ft(n,s,{x:s.x,y:s.y-f},c)&&n.y<s.y+c?"move-y":null},_c=n=>{let e=[];if(n.type==="point"||n.type==="text")e.push(n.position);else if(n.type==="line"||n.type==="polyline"||n.type==="spline")e.push(...n.points);else if(n.type==="rectangle")e.push({x:n.x,y:n.y},{x:n.x+n.width,y:n.y+n.height});else if(n.type==="circle")e.push({x:n.center.x-n.radius,y:n.center.y-n.radius},{x:n.center.x+n.radius,y:n.center.y+n.radius});else if(n.type==="arc"){const f={x:n.center.x+n.radius*Math.cos(n.startAngle),y:n.center.y+n.radius*Math.sin(n.startAngle)},y={x:n.center.x+n.radius*Math.cos(n.endAngle),y:n.center.y+n.radius*Math.sin(n.endAngle)};e.push(f,y)}if(e.length===0)return{minX:0,minY:0,maxX:0,maxY:0};const o=Math.min(...e.map(f=>f.x)),s=Math.min(...e.map(f=>f.y)),r=Math.max(...e.map(f=>f.x)),c=Math.max(...e.map(f=>f.y));return{minX:o,minY:s,maxX:r,maxY:c}},Nl=(n,e,o,s,r=!0)=>{const c=(n.x-e.x)*(o.y-s.y)-(n.y-e.y)*(o.x-s.x);if(Math.abs(c)<1e-9)return null;const f=((n.x-o.x)*(o.y-s.y)-(n.y-o.y)*(o.x-s.x))/c,y=-((n.x-e.x)*(n.y-o.y)-(n.y-e.y)*(n.x-o.x))/c;return!r||f>=0&&f<=1&&y>=0&&y<=1?{x:n.x+f*(e.x-n.x),y:n.y+f*(e.y-n.y)}:null},wm=(n,e)=>{const[o,s]=n.points,{center:r,radius:c}=e,f=s.x-o.x,y=s.y-o.y,m=f*f+y*y,p=2*(f*(o.x-r.x)+y*(o.y-r.y)),v=(o.x-r.x)**2+(o.y-r.y)**2-c*c,x=p*p-4*m*v;if(m<=1e-9||x<0)return[];const S=(-p+Math.sqrt(x))/(2*m),_=(-p-Math.sqrt(x))/(2*m),U=[];return S>=0&&S<=1&&U.push({x:o.x+S*f,y:o.y+S*y}),x>1e-9&&_>=0&&_<=1&&U.push({x:o.x+_*f,y:o.y+_*y}),U},T1=(n,e)=>{const o=Math.hypot(e.center.x-n.center.x,e.center.y-n.center.y);if(o>n.radius+e.radius||o<Math.abs(n.radius-e.radius)||o===0)return[];const s=(n.radius*n.radius-e.radius*e.radius+o*o)/(2*o),r=Math.sqrt(Math.max(0,n.radius*n.radius-s*s)),c=n.center.x+s*(e.center.x-n.center.x)/o,f=n.center.y+s*(e.center.y-n.center.y)/o,y={x:c+r*(e.center.y-n.center.y)/o,y:f-r*(e.center.x-n.center.x)/o},m={x:c-r*(e.center.y-n.center.y)/o,y:f+r*(e.center.x-n.center.x)/o};return o===n.radius+e.radius||o===Math.abs(n.radius-e.radius)?[y]:[y,m]},Pi=n=>{if(n.type==="line")return[n.points];if(n.type==="polyline"){const e=[];for(let o=0;o<n.points.length-1;o++)e.push([n.points[o],n.points[o+1]]);return e}if(n.type==="rectangle"){const e={x:n.x,y:n.y},o={x:n.x+n.width,y:n.y},s={x:n.x+n.width,y:n.y+n.height},r={x:n.x,y:n.y+n.height};return[[e,o],[o,s],[s,r],[r,e]]}return[]};function C1(n,e,o=!1){if(n.length<2)return[];const s=n.length,r=[];for(let c=0;c<s;c++){const f=n[(c-1+s)%s],y=n[c],m=n[(c+1)%s];let p;if(!o&&c===0){const v=Z.normalize(Z.sub(m,y));p=Z.perp(v)}else if(!o&&c===s-1){const v=Z.normalize(Z.sub(y,f));p=Z.perp(v)}else{const v=Z.perp(Z.normalize(Z.sub(y,f))),x=Z.perp(Z.normalize(Z.sub(m,y)));p=Z.normalize(Z.add(v,x));const S=p.x*v.x+p.y*v.y;S<0&&(p=Z.mul(p,-1));const _=1/Math.max(S,1e-6);if(_>4){r.push(Z.add(y,Z.mul(v,e)),Z.add(y,Z.mul(x,e)));continue}r.push(Z.add(y,Z.mul(p,e*_)));continue}r.push(Z.add(y,Z.mul(p,e)))}return r}const Vc=(n,e,o)=>{const s=o.x-e.x,r=o.y-e.y,c=s*s+r*r;if(c===0)return{point:e,distSq:St(n,e)};let f=((n.x-e.x)*s+(n.y-e.y)*r)/c;f=Math.max(0,Math.min(1,f));const y={x:e.x+f*s,y:e.y+f*r};return{point:y,distSq:St(n,y)}},_1=(n,e)=>{let o={x:0,y:0},s=1/0;if(e.type==="circle"||e.type==="arc"){const r=Math.atan2(n.y-e.center.y,n.x-e.center.x);o={x:e.center.x+e.radius*Math.cos(r),y:e.center.y+e.radius*Math.sin(r)},s=St(n,o)}else{const r=Pi(e);for(const c of r){const{point:f,distSq:y}=Vc(n,c[0],c[1]);y<s&&(s=y,o=f)}}return{point:o,distance:Math.sqrt(s)}},di=(n,e,o)=>{const s=o.x-e.x,r=o.y-e.y;if(s===0&&r===0)return{...n};const c=s*s+r*r,f=((n.x-e.x)*s+(n.y-e.y)*r)/c,y=e.x+f*s,m=e.y+f*r,p=y-n.x,v=m-n.y;return{x:n.x+2*p,y:n.y+2*v}},A1=n=>{if(n<=0)return{width:0,label:""};const o=80/n,s=Math.floor(Math.log10(o)),r=Math.pow(10,s),c=[1,2,5,10];let f=1,y=1/0;c.forEach(x=>{const S=x*r,_=Math.abs(S-o);_<y&&(y=_,f=x)});const m=f*r,p=m*n;let v=m.toString();return m<1?v=m.toFixed(2):m<10&&(v=m.toFixed(1)),{width:p,label:v}},M1=({activeTool:n,drawableObjects:e,addDrawableObjects:o,selectedObjectIds:s,onSelectionChange:r,onObjectsUpdate:c,setActiveTool:f,onDelete:y,onCopy:m,onCut:p,onPaste:v,onDuplicate:x,onGroup:S,onUngroup:_,onExplode:U,hasClipboard:P,activeLayerId:w,layers:I,statusText:pe,onStatusChange:le,offsetDistanceCommand:he,onOffsetDistanceSet:Ce,onSetCommandOptions:_e,subCommand:ve,onSubCommandProcessed:Je,filletRadius:Ae,chamferDistances:Ve,commandToExecute:Ze,onCommandProcessed:it,onCommandRejected:nt,viewBoundsToFit:ht})=>{const yt=ee.useRef(null),j=ee.useRef(null),xe=ee.useRef(null),ze=ee.useRef(null),We=ee.useRef(null),at=ee.useRef(null),L=ee.useRef(null),[T,J]=ee.useState({type:"idle"}),[Re,Fe]=ee.useState([]),[Xe,He]=ee.useState(null),[Ye,Ct]=ee.useState(null),[Nt,oi]=ee.useState(null),[Ut,hi]=ee.useState(null),[en,Jn]=ee.useState(null),[Gi,kl]=ee.useState(!0),[vo,xo]=ee.useState(!1),[yi,qi]=ee.useState(!1),[So,zl]=ee.useState(45),[tn,mi]=ee.useState(!1),[Mn,Eo]=ee.useState(null),[Xn,To]=ee.useState(!0),[Xo,Ko]=ee.useState(!1),[Kn,li]=ee.useState(null),[Yt,Ln]=ee.useState(()=>new Set(["endpoint","midpoint","center","intersection","quadrant","node"])),[zt,nn]=ee.useState(null),[ye,Vi]=ee.useState({scale:1,offsetX:0,offsetY:0}),[V,W]=ee.useState(!1),[de,K]=ee.useState("ultra-fine"),[b,se]=ee.useState(!0),[Pe,Se]=ee.useState(!0),[Ne,Ge]=ee.useState(20),[je,dn]=ee.useState(null),[Oe,gi]=ee.useState(null),[Ht,Gt]=ee.useState(!1);ee.useEffect(()=>{n&&n.id!=="select"&&gi(n)},[n]);const ot=ee.useMemo(()=>new Set(s),[s]),ct=ee.useMemo(()=>s.length===0?!1:e.filter(R=>ot.has(R.id)).some(R=>R.type==="polyline"||R.type==="rectangle"),[s,e,ot]),wt=ee.useMemo(()=>s.length>=2,[s]),Lt=ee.useMemo(()=>s.length===0?!1:e.filter(R=>ot.has(R.id)).some(R=>R.groupId),[s,e,ot]),Jt=ee.useCallback(M=>{const R=yt.current;if(!R)return{x:0,y:0};const Q=R.getBoundingClientRect();return{x:M.clientX-Q.left,y:M.clientY-Q.top}},[]),on=ee.useCallback(M=>({x:(M.x-ye.offsetX)/ye.scale,y:(M.y-ye.offsetY)/ye.scale}),[ye]),Hl=ee.useCallback(M=>({x:Math.round(M.x/er)*er,y:Math.round(M.y/er)*er}),[]),Fs=ee.useCallback((M,R,Q,ie)=>{const G=f1/ie;let q=null,fe=G**2;const me=(F,z)=>{const N=St(M,F);N<fe&&(fe=N,q={point:F,mode:z})},O=R.filter(F=>{const z=I.find(N=>N.id===F.layerId);return z&&z.isVisible&&!z.isLocked});for(const F of O){if(Q.has("endpoint")&&((F.type==="line"||F.type==="polyline")&&F.points.forEach(z=>me(z,"endpoint")),F.type==="arc"&&(me({x:F.center.x+F.radius*Math.cos(F.startAngle),y:F.center.y+F.radius*Math.sin(F.startAngle)},"endpoint"),me({x:F.center.x+F.radius*Math.cos(F.endAngle),y:F.center.y+F.radius*Math.sin(F.endAngle)},"endpoint"))),Q.has("midpoint")&&(F.type==="line"&&me({x:(F.points[0].x+F.points[1].x)/2,y:(F.points[0].y+F.points[1].y)/2},"midpoint"),F.type==="polyline"))for(let z=0;z<F.points.length-1;z++)me({x:(F.points[z].x+F.points[z+1].x)/2,y:(F.points[z].y+F.points[z+1].y)/2},"midpoint");if(Q.has("center")&&(F.type==="circle"||F.type==="arc"||F.type==="ellipse")&&me(F.center,"center"),Q.has("node")&&F.type==="point"&&me(F.position,"node"),Q.has("quadrant")&&(F.type==="circle"||F.type==="arc")&&(me({x:F.center.x+F.radius,y:F.center.y},"quadrant"),me({x:F.center.x-F.radius,y:F.center.y},"quadrant"),me({x:F.center.x,y:F.center.y+F.radius},"quadrant"),me({x:F.center.x,y:F.center.y-F.radius},"quadrant")),Q.has("geometric-center")&&(F.type==="rectangle"||F.type==="polyline"&&F.points[0].x===F.points[F.points.length-1].x&&F.points[0].y===F.points[F.points.length-1].y)){let z=0,N=0,H=[];F.type==="rectangle"?H=[{x:F.x,y:F.y},{x:F.x+F.width,y:F.y},{x:F.x+F.width,y:F.y+F.height},{x:F.x,y:F.y+F.height}]:H=F.points.slice(0,-1),H.forEach(ne=>{z+=ne.x,N+=ne.y}),me({x:z/H.length,y:N/H.length},"geometric-center")}}if(Q.has("intersection"))for(let F=0;F<O.length;F++)for(let z=F+1;z<O.length;z++){const N=O[F],H=O[z],ne=Pi(N),Te=Pi(H);for(const we of ne)for(const Ee of Te){const Ue=Nl(we[0],we[1],Ee[0],Ee[1]);Ue&&me(Ue,"intersection")}}if(Q.has("nearest")&&!q)for(const F of O){const z=Pi(F);for(const N of z){const H=N[1].x-N[0].x,ne=N[1].y-N[0].y,Te=H*H+ne*ne;let we=Te===0?0:Math.max(0,Math.min(1,((M.x-N[0].x)*H+(M.y-N[0].y)*ne)/Te));const Ee={x:N[0].x+we*H,y:N[0].y+we*ne};me(Ee,"nearest")}}return q},[I]),Gl=ee.useCallback((M,R,Q)=>{let ie=[];for(const G of R){const q=Pi(G);if(M.type==="line"){for(const me of q){const O=Nl(M.points[0],M.points[1],me[0],me[1]);O&&ie.push(O)}const fe=G.type==="circle"?G:null;fe&&ie.push(...wm(M,fe))}else if(M.type==="circle"){for(const me of q)ie.push(...wm({points:[me[0],me[1]]},M));const fe=G.type==="circle"?G:null;fe&&ie.push(...T1(M,fe))}else M.type}if(M.type==="line"){const G=M,q=[G.points[0],...ie,G.points[1]],fe=H=>St(H,G.points[0]);q.sort((H,ne)=>fe(H)-fe(ne));const me=[];if(q.length>0){me.push(q[0]);for(let H=1;H<q.length;H++)St(q[H],q[H-1])>1e-6&&me.push(q[H])}if(me.length<2)return null;let O=-1,F=1/0;for(let H=0;H<me.length-1;H++){const ne={x:(me[H].x+me[H+1].x)/2,y:(me[H].y+me[H+1].y)/2},Te=St(Q,ne);Te<F&&(F=Te,O=H)}if(O===-1)return null;const z=[{...G,id:`preview-removed-${G.id}`,points:[me[O],me[O+1]]}],N=[];return O>0&&N.push({...G,id:`preview-trimmed-1-${G.id}`,points:[me[0],me[O]]}),O<me.length-2&&N.push({...G,id:`preview-trimmed-2-${G.id}`,points:[me[O+1],me[me.length-1]]}),{original:M,trimmed:N,removed:z}}else if(M.type==="circle"){if(ie.length<2)return null;const G=M,q=ie.map(N=>Math.atan2(N.y-G.center.y,N.x-G.center.x));q.sort((N,H)=>N-H);const fe=Math.atan2(Q.y-G.center.y,Q.x-G.center.x);let me=-1/0,O=1/0;for(let N=0;N<q.length;N++){const H=q[N],ne=q[(N+1)%q.length];if(ne<H){if(fe>H||fe<ne){me=ne,O=H;break}}else if(fe>H&&fe<ne){me=ne,O=H;break}}if(me===-1/0)return null;const F={id:`trimmed-arc-${G.id}`,type:"arc",center:G.center,radius:G.radius,startAngle:me,endAngle:O,counterClockwise:!1,layerId:G.layerId},z={id:`removed-arc-${G.id}`,type:"arc",center:G.center,radius:G.radius,startAngle:O,endAngle:me,counterClockwise:!1,layerId:G.layerId};return{original:M,trimmed:[F],removed:[z]}}return null},[]),Ls=ee.useCallback((M,R,Q)=>{const ie=Gl(M,R,Q);if(!ie)return;const G=e.filter(fe=>fe.id!==M.id),q=ie.trimmed.map(fe=>({...fe,id:`${fe.type}-${Date.now()}-${Math.random()}`}));c([...G,...q])},[e,c,Gl]),si=ee.useCallback((M,R,Q,ie,G)=>{const q=Nl(M.points[0],M.points[1],R.points[0],R.points[1],!1);if(!q||Q<=0)return null;const[fe,me]=M.points,O=St(ie,fe)<St(ie,me)?fe:me,[F,z]=R.points,N=St(G,F)<St(G,z)?F:z,H=Z.normalize(Z.sub(O,q)),ne=Z.normalize(Z.sub(N,q)),Te=Z.dot(H,ne);if(Math.abs(Te)>1-1e-9)return null;const we=Math.acos(Te);if(Math.abs(we)<1e-9)return null;const Ee=Q/Math.tan(we/2),Ue=Z.add(q,Z.mul(H,Ee)),ae=Z.add(q,Z.mul(ne,Ee));if(St(Ue,q)>St(O,q)+1e-6||St(ae,q)>St(N,q)+1e-6)return le("Fillet radius is too large for one or both segments."),null;const ge=Q/Math.sin(we/2),De=Z.normalize(Z.add(H,ne)),Ie=Z.add(q,Z.mul(De,ge)),ce=Math.atan2(Ue.y-Ie.y,Ue.x-Ie.x),Le=Math.atan2(ae.y-Ie.y,ae.x-Ie.x),Vt=H.x*ne.y-H.y*ne.x;return{arc:{id:"fillet-preview",type:"arc",center:Ie,radius:Q,startAngle:ce,endAngle:Le,counterClockwise:Vt<0,layerId:M.layerId},trimPoint1:Ue,trimPoint2:ae,endpointToKeep1:O,endpointToKeep2:N}},[le]),ql=ee.useCallback((M,R,Q,ie,G)=>{const q=si(M,R,Q,ie,G);if(!q)return;const{arc:fe,trimPoint1:me,trimPoint2:O,endpointToKeep1:F,endpointToKeep2:z}=q,N={...fe,id:`arc-fillet-${Date.now()}`},H={...M,points:[F,me]},ne={...R,points:[z,O]},Te=e.filter(we=>we.id!==M.id&&we.id!==R.id);c([...Te,H,ne,N])},[e,c,si]),Bi=ee.useCallback((M,R,Q,ie,G)=>{const q=si(M,R,Q,ie,G);return q?q.arc:null},[si]),$n=ee.useCallback((M,R,Q,ie,G)=>{const q=Nl(M.points[0],M.points[1],R.points[0],R.points[1],!1);if(!q)return null;const[fe,me]=Q;if(fe<=0||me<=0)return null;const[O,F]=M.points,z=St(ie,O)<St(ie,F)?O:F,[N,H]=R.points,ne=St(G,N)<St(G,H)?N:H,Te=Z.normalize(Z.sub(z,q)),we=Z.normalize(Z.sub(ne,q));if(Math.abs(Z.dot(Te,we))>1-1e-9)return null;const Ee=Z.add(q,Z.mul(Te,fe)),Ue=Z.add(q,Z.mul(we,me));return St(Ee,q)>St(z,q)+1e-6||St(Ue,q)>St(ne,q)+1e-6?(le("Chamfer distance is too large for one or both segments."),null):{chamferLine:{id:"chamfer-preview",type:"line",points:[Ee,Ue],layerId:M.layerId},trimPoint1:Ee,trimPoint2:Ue,endpointToKeep1:z,endpointToKeep2:ne}},[le]),Co=ee.useCallback((M,R,Q,ie,G)=>{const q=$n(M,R,Q,ie,G);if(!q)return;const{chamferLine:fe,trimPoint1:me,trimPoint2:O,endpointToKeep1:F,endpointToKeep2:z}=q,N={...fe,id:`line-chamfer-${Date.now()}`},H={...M,points:[F,me]},ne={...R,points:[z,O]},Te=e.filter(we=>we.id!==M.id&&we.id!==R.id);c([...Te,H,ne,N])},[e,c,$n]),Oi=ee.useCallback((M,R,Q,ie,G)=>{const q=$n(M,R,Q,ie,G);return q?q.chamferLine:null},[$n]),qt=ee.useCallback((M,R,Q)=>{const ie=`${M.type}-mirrored-${Date.now()}-${Math.random()}`;if(M.type==="rectangle"){const fe=[{x:M.x,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x+M.width,y:M.y+M.height},{x:M.x,y:M.y+M.height}].map(O=>di(O,R,Q));return[{id:ie,type:"polyline",points:[...fe,fe[0]],layerId:M.layerId}]}const G=JSON.parse(JSON.stringify(M));if(G.id=ie,M.type==="point")G.position=di(M.position,R,Q);else if(M.type==="text")G.position=di(M.position,R,Q);else if(M.type==="line"||M.type==="polyline"||M.type==="spline")G.points=M.points.map(q=>di(q,R,Q));else if(M.type==="circle")G.center=di(M.center,R,Q);else if(M.type==="ellipse"){const q=G;q.center=di(M.center,R,Q);const fe={x:M.center.x+M.radiusX*Math.cos(M.rotation),y:M.center.y+M.radiusX*Math.sin(M.rotation)},me=di(fe,R,Q);q.rotation=Math.atan2(me.y-q.center.y,me.x-q.center.y)}else if(M.type==="arc"){const q=G;q.center=di(M.center,R,Q);const fe={x:M.center.x+M.radius*Math.cos(M.startAngle),y:M.center.y+M.radius*Math.sin(M.startAngle)},me={x:M.center.x+M.radius*Math.cos(M.endAngle),y:M.center.y+M.radius*Math.sin(M.endAngle)},O=di(fe,R,Q),F=di(me,R,Q);q.startAngle=Math.atan2(O.y-q.center.y,O.x-q.center.y),q.endAngle=Math.atan2(F.y-q.center.y,F.x-q.center.y),q.counterClockwise=!M.counterClockwise}return[G]},[]),Ps=ee.useCallback((M,R)=>{if(s.length===0)return;const ie=e.filter(G=>s.includes(G.id)).flatMap(G=>qt(G,M,R));ie.length>0&&(o(ie),r(ie.map(G=>G.id)))},[s,e,qt,o,r]),ks=ee.useCallback((M,R,Q)=>{const ie=[];if(Pi(M).length>0&&Pi(R).length>0){const G=Pi(M),q=Pi(R);for(const fe of G)for(const me of q){const[O,F]=fe,[z,N]=me,H=Z.normalize(Z.sub(F,O)),ne=Z.perp(H),Te=Z.normalize(Z.sub(N,z)),we=Z.perp(Te),Ee=[{off1:Z.mul(ne,Q),off2:Z.mul(we,Q)},{off1:Z.mul(ne,-Q),off2:Z.mul(we,Q)},{off1:Z.mul(ne,Q),off2:Z.mul(we,-Q)},{off1:Z.mul(ne,-Q),off2:Z.mul(we,-Q)}];for(const Ue of Ee){const ae=Z.add(O,Ue.off1),ge=Z.add(F,Ue.off1),De=Z.add(z,Ue.off2),Ie=Z.add(N,Ue.off2),ce=Nl(ae,ge,De,Ie,!1);ce&&ie.push({id:`ttr-candidate-${ie.length}`,type:"circle",center:ce,radius:Q,layerId:M.layerId})}}}return ie},[]);ee.useEffect(()=>{["select",...["mirror"].includes((n==null?void 0:n.id)??"")?[n.id]:[]].includes((n==null?void 0:n.id)??"")||r([]),(n==null?void 0:n.id)==="offset"?J({type:"offsetting-select"}):(n==null?void 0:n.id)==="trim"?J({type:"trimming-select-cutters",cutterIds:new Set}):(n==null?void 0:n.id)==="fillet"?J({type:"filleting-select1",radius:Ae}):(n==null?void 0:n.id)==="chamfer"?J({type:"chamfering-select1",distances:Ve}):(n==null?void 0:n.id)==="arc-3p"?J({type:"drawing-arc-3p",points:[]}):(n==null?void 0:n.id)==="arc-cra"?J({type:"drawing-arc-cra",points:[]}):(n==null?void 0:n.id)==="arc-ttr"?J({type:"ttr-select1",radius:Ne}):(n==null?void 0:n.id)==="dimension-linear"?J({type:"drawing-dim-linear",points:[]}):(n==null?void 0:n.id)==="dimension-aligned"?J({type:"drawing-dim-aligned",points:[]}):(n==null?void 0:n.id)==="dimension-angular"?J({type:"drawing-dim-angular",selection:[]}):(n==null?void 0:n.id)==="dimension-radial"?J({type:"drawing-dim-radial"}):(n==null?void 0:n.id)==="dimension-diameter"?J({type:"drawing-dim-diameter"}):(n==null?void 0:n.id)==="dimension-coordinate"?J({type:"drawing-dim-coordinate",points:[]}):J({type:"idle"}),Fe([]),He(null),Gt(!1)},[n==null?void 0:n.id,r,Ae,Ve,Ne]),ee.useEffect(()=>{T.type==="filleting-select1"&&T.radius!==Ae&&J({type:"filleting-select1",radius:Ae})},[Ae,T]),ee.useEffect(()=>{T.type==="chamfering-select1"&&(T.distances[0]!==Ve[0]||T.distances[1]!==Ve[1])&&J({type:"chamfering-select1",distances:Ve})},[Ve,T]),ee.useEffect(()=>{const M=R=>{ze.current&&!ze.current.contains(R.target)&&W(!1),We.current&&!We.current.contains(R.target)&&(R.target.closest("[data-osnap-button]")||Ko(!1)),at.current&&!at.current.contains(R.target)&&(R.target.closest("[data-polar-button]")||mi(!1))};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]),ee.useEffect(()=>{if(s.length>0){let M=1/0,R=1/0,Q=-1/0,ie=-1/0;if(e.forEach(G=>{if(ot.has(G.id)){const q=_c(G);M=Math.min(M,q.minX),R=Math.min(R,q.minY),Q=Math.max(Q,q.maxX),ie=Math.max(ie,q.maxY)}}),isFinite(M)){const G={x:(M+Q)/2,y:(R+ie)/2};hi(q=>({pivot:q!=null&&q.pivot&&T.type!=="gizmo-transform"?q.pivot:G,size:60}))}}else hi(null)},[s,e,T.type,ot]),ee.useEffect(()=>{var R;let M=pe;if(Kn)M=Kn.mode.charAt(0).toUpperCase()+Kn.mode.slice(1).replace("-"," ");else if(n)switch(n.id){case"select":M="Select objects or click and drag for box selection.";break;case"point":M="Specify a point.";break;case"text":M="Specify insertion point for text.";break;case"line":M=T.type==="drawing"?"Specify end point of line.":"Specify start point of line.";break;case"elastic-line":T.type==="drawing-elastic-line-end"?M="Specify end point or enter length.":T.type==="drawing-elastic-line-direction"?M=`Specify direction. [Length=${T.length}]`:M="Specify start point of elastic line.";break;case"polyline":M=T.type==="drawing-polyline"?"Specify next point or press Enter to finish.":"Specify start point of polyline.";break;case"elastic-polyline":T.type==="drawing-elastic-polyline-point"?M=T.points.length>0?"Specify next point or enter length. Press Enter to finish.":"Specify start point of elastic polyline.":T.type==="drawing-elastic-polyline-direction"?M=`Specify direction. [Length=${T.length}]`:M="Specify start point of elastic polyline.";break;case"spline":case"nurbs":M=T.type==="drawing-spline"?"Specify next control point or press Enter to finish.":"Specify first control point.";break;case"rectangle":M=T.type==="drawing"?"Specify opposite corner of rectangle.":"Specify first corner of rectangle.";break;case"circle":M=T.type==="drawing"?"Specify radius of circle.":"Specify center point for circle.";break;case"arc-3p":T.type==="drawing-arc-3p"?T.points.length===1?M="Specify second point on arc.":T.points.length===2&&(M="Specify end point of arc."):M="Specify start point of arc.";break;case"arc-cra":T.type==="drawing-arc-cra"?T.points.length===1?M="Specify arc start point (and radius).":T.points.length===2&&(M="Specify arc end point."):M="Specify center of arc.";break;case"arc-ttr":T.type==="ttr-select1"?M=`Select first tangent object. [Radius=${Ne}]`:T.type==="ttr-select2"?M="Select second tangent object.":T.type==="ttr-disambiguate"&&(M="Click to create the desired tangent circle.");break;case"ellipse":T.type==="drawing-ellipse"?T.points.length===1?M="Specify endpoint of first axis.":T.points.length===2&&(M="Specify distance for second axis."):M="Specify center of ellipse.";break;case"offset":Ht?M="Offsetting both sides. Specify distance or click.":T.type==="offsetting-select"?M="Select object to offset or [Both].":T.type==="offsetting-interactive"?M=`Specify offset distance or click. Distance: ${((R=T.liveDistance)==null?void 0:R.toFixed(2))??"0.00"}`:T.type==="offsetting-with-distance"&&(M=`Select side to offset. Distance: ${T.distance.toFixed(2)}`);break;case"trim":T.type==="trimming-select-cutters"?M="Select cutting edges. Press Enter when done.":T.type==="trimming-select-objects"&&(M="Select object to trim.");break;case"fillet":T.type==="filleting-select1"?M=`Select first object to fillet or [Radius=${T.radius}]`:T.type==="filleting-select2"&&(M="Select second object to fillet.");break;case"chamfer":T.type==="chamfering-select1"?M=`Select first line to chamfer or [Distance=${T.distances[0]},${T.distances[1]}]`:T.type==="chamfering-select2"&&(M="Select second line to chamfer.");break;case"mirror":s.length===0?M="Select objects to mirror.":T.type==="mirroring"?M="Specify second point of mirror line.":M="Specify first point of mirror line.";break;case"dimension-linear":case"dimension-aligned":(T.type==="drawing-dim-linear"||T.type==="drawing-dim-aligned")&&(T.points.length===0?M="Specify first extension line origin.":T.points.length===1?M="Specify second extension line origin.":M="Specify dimension line location.");break;case"dimension-angular":T.type==="drawing-dim-angular"&&(T.selection.length===0?M="Select first line.":T.selection.length===1?M="Select second line.":M="Specify dimension arc location.");break;case"dimension-radial":M="Select arc or circle.";break;case"dimension-diameter":M="Select arc or circle.";break;case"dimension-coordinate":T.type==="drawing-dim-coordinate"&&(T.points.length===0?M="Select feature location.":M="Specify leader endpoint.");break;default:M=`${n.name} tool active. Ready for input.`}M!==pe&&le(M)},[n,T,le,Kn,pe,s.length,Ne,Ht]);const un=ee.useCallback((M,R,Q)=>{const ie=`${M.type}-offset-${Date.now()}-${Math.random()}`,G=M.layerId;if(M.type==="circle"){const F=Q?Math.hypot(Q.x-M.center.x,Q.y-M.center.y):0,z=Q?F>M.radius?M.radius+R:Math.max(0,M.radius-R):M.radius+R;return{...M,id:ie,radius:z,layerId:G}}if(M.type==="arc"){const F=Q?Math.hypot(Q.x-M.center.x,Q.y-M.center.y):0,z=Q?F>M.radius?M.radius+R:Math.max(0,M.radius-R):M.radius+R;return{...M,id:ie,radius:z,layerId:G}}let q=[],fe=!1;if(M.type==="line"||M.type==="polyline"?q=M.points:M.type==="rectangle"&&(q=[{x:M.x,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x+M.width,y:M.y+M.height},{x:M.x,y:M.y+M.height}],fe=!0),q.length<2)return null;let me=R;if(Q){const F=Z.add(q[0],Z.mul(Z.sub(q[1],q[0]),.5)),z=Z.perp(Z.normalize(Z.sub(q[1],q[0]))),N=Z.add(F,Z.mul(z,10)),H=St(Q,N),ne=St(Q,F);me=H<ne?R:-R}const O=C1(q,me,fe);return O.length===0?null:(fe&&O.push(O[0]),M.type==="line"||M.type==="rectangle"?{id:ie,type:"polyline",points:O,layerId:G}:"points"in M?{...M,id:ie,points:O,layerId:G}:null)},[]);ee.useEffect(()=>{he!==null&&T.type==="offsetting-interactive"&&(J({type:"offsetting-with-distance",selectedObject:T.selectedObject,distance:he}),Ce())},[he,Ce,T]),ee.useEffect(()=>{T.type==="filleting-select1"?_e(["Radius"]):T.type==="chamfering-select1"?_e(["Distance"]):T.type.startsWith("offsetting-")&&!Ht?_e(["Both"]):T.type==="drawing-dim-coordinate"&&T.points.length===1?_e(["X","Y"]):_e([])},[T,_e,Ht]),ee.useEffect(()=>{ve==="Both"&&T.type.startsWith("offsetting-")&&(Gt(!0),le("Offset both sides. Specify distance or click."),Je()),(ve==="X"||ve==="Y")&&T.type==="drawing-dim-coordinate"&&T.points.length===1&&(J({...T,axis:ve}),Je())},[ve,T,Je,le]);const Qn=M=>{var fe,me;if(xe.current&&xe.current.contains(M.target))return;if(nn(null),M.button===1){J({type:"panning",startTransform:ye,startMouse:{x:M.clientX,y:M.clientY}}),M.preventDefault();return}if(M.button!==0)return;const R=Jt(M),Q=on(R),ie=Ye??Q,G=Xn?Fs(Q,e,Yt,ye.scale):null;li(G),dn(ie);const q=(fe=yt.current)==null?void 0:fe.getContext("2d");if(n!=null&&n.id.startsWith("dimension-")){const O=((me=I.find(F=>F.name.toLowerCase()==="dimensions"))==null?void 0:me.id)??w;if(T.type==="drawing-dim-linear"||T.type==="drawing-dim-aligned"){const F=[...T.points,ie];if(F.length===3){const z=n.id==="dimension-linear"?{id:`dim-lin-${Date.now()}`,type:"dimension-linear",p1:F[0],p2:F[1],textPosition:F[2],layerId:O}:{id:`dim-aln-${Date.now()}`,type:"dimension-aligned",p1:F[0],p2:F[1],textPosition:F[2],layerId:O};o([z]),J({type:n.id==="dimension-linear"?"drawing-dim-linear":"drawing-dim-aligned",points:[]})}else J({type:n.id==="dimension-linear"?"drawing-dim-linear":"drawing-dim-aligned",points:F});return}if(T.type==="drawing-dim-angular"){const F=yn(Q,e,ye.scale,I,q);if(F&&(F.type==="line"||F.type==="arc")){const z=[...T.selection,{obj:F,point:Q}];if(z.length===3){const N=z[0].obj,H=z[1].obj,ne=Nl(N.points[0],N.points[1],H.points[0],H.points[1],!1);if(ne){const Te=Z.len(Z.sub(ie,ne)),we=Vc(ne,N.points[0],N.points[1]).point,Ee=Vc(ne,H.points[0],H.points[1]).point;o([{id:`dim-ang-${Date.now()}`,type:"dimension-angular",center:ne,p1:we,p2:Ee,radius:Te,layerId:O}])}J({type:"drawing-dim-angular",selection:[]})}else z.length===2?J({...T,selection:z}):z.length===1&&J({type:"drawing-dim-angular",selection:z})}else T.selection.length===2&&Qn(M);return}if(T.type==="drawing-dim-radial"||T.type==="drawing-dim-diameter"){const F=yn(Q,e,ye.scale,I,q);if(F&&(F.type==="circle"||F.type==="arc")){if(T.type==="drawing-dim-radial")o([{id:`dim-rad-${Date.now()}`,type:"dimension-radial",center:F.center,radiusPoint:ie,layerId:O}]);else{const z=Z.normalize(Z.sub(ie,F.center)),N=Z.add(F.center,Z.mul(z,F.radius)),H=Z.sub(F.center,Z.mul(z,F.radius));o([{id:`dim-dia-${Date.now()}`,type:"dimension-diameter",p1:N,p2:H,layerId:O}])}J({type:n.id==="dimension-radial"?"drawing-dim-radial":"drawing-dim-diameter"})}return}if(T.type==="drawing-dim-coordinate"){const F=[...T.points,ie];if(F.length===2){const z=T.axis??(Math.abs(ie.x-F[0].x)>Math.abs(ie.y-F[0].y)?"X":"Y");o([{id:`dim-crd-${Date.now()}`,type:"dimension-coordinate",point:F[0],leaderEndPoint:ie,axis:z,layerId:O}]),J({type:"drawing-dim-coordinate",points:[]})}else J({type:"drawing-dim-coordinate",points:F,axis:void 0});return}}if(T.type==="offsetting-select"){const O=yn(Q,e,ye.scale,I,q);O&&J({type:"offsetting-interactive",selectedObject:O});return}if(T.type==="offsetting-interactive"||T.type==="offsetting-with-distance"){if(Ht){const{selectedObject:O}=T,F=T.type==="offsetting-with-distance"?T.distance:T.type==="offsetting-interactive"&&T.liveDistance||0;if(F>.001){const z=un(O,F,null),N=un(O,-F,null),H=[z,N].filter(ne=>ne!==null);H.length>0&&o(H)}Gt(!1)}else Re.length>0&&o(Re);Fe([]),J({type:"offsetting-select"});return}if(T.type==="filleting-select1"){const O=yn(Q,e,ye.scale,I,q);O&&O.type==="line"&&J({type:"filleting-select2",radius:T.radius,firstObject:O,firstPoint:Q});return}if(T.type==="filleting-select2"){const O=yn(Q,e,ye.scale,I,q);O&&O.type==="line"&&O.id!==T.firstObject.id?(ql(T.firstObject,O,T.radius,T.firstPoint,Q),J({type:"filleting-select1",radius:T.radius})):J({type:"filleting-select1",radius:T.radius}),Fe([]);return}if(T.type==="chamfering-select1"){const O=yn(Q,e,ye.scale,I,q);O&&O.type==="line"&&J({type:"chamfering-select2",distances:T.distances,firstObject:O,firstPoint:Q});return}if(T.type==="chamfering-select2"){const O=yn(Q,e,ye.scale,I,q);O&&O.type==="line"&&O.id!==T.firstObject.id?(Co(T.firstObject,O,T.distances,T.firstPoint,Q),J({type:"chamfering-select1",distances:T.distances})):J({type:"chamfering-select1",distances:T.distances}),Fe([]);return}if(T.type==="trimming-select-cutters"){const O=yn(Q,e,ye.scale,I,q);if(O){const F=new Set(T.cutterIds);F.has(O.id)?F.delete(O.id):F.add(O.id),J({type:"trimming-select-cutters",cutterIds:F})}return}if(T.type==="trimming-select-objects"){const O=yn(Q,e,ye.scale,I,q);O&&!T.cutterIds.has(O.id)&&Ls(O,T.cutters,Q);return}if((n==null?void 0:n.id)==="mirror"){if(s.length===0){le("Select objects to mirror first.");return}T.type==="mirroring"?(Ps(T.firstPoint,ie),J({type:"idle"}),f(pi[0])):J({type:"mirroring",firstPoint:ie});return}if((n==null?void 0:n.id)==="point"){const O={id:`point-${Date.now()}`,type:"point",position:ie,layerId:w};o([O]),J({type:"idle"});return}if((n==null?void 0:n.id)==="text"){const O={id:`text-${Date.now()}-${Math.random()}`,type:"text",position:ie,content:"Text",fontSize:16,fontFamily:"sans-serif",textAlign:"left",textBaseline:"top",rotation:0,layerId:w};o([O]),r([O.id]),f(pi[0]);return}if((n==null?void 0:n.id)==="elastic-line"){if(T.type==="drawing-elastic-line-end")o([{id:`line-${Date.now()}`,type:"line",points:[T.startPoint,ie],layerId:w}]),f(pi[0]);else if(T.type==="drawing-elastic-line-direction"){const O=Z.normalize(Z.sub(ie,T.startPoint)),F=Z.add(T.startPoint,Z.mul(O,T.length));o([{id:`line-${Date.now()}`,type:"line",points:[T.startPoint,F],layerId:w}]),f(pi[0])}else r([]),J({type:"drawing-elastic-line-end",startPoint:ie});return}if((n==null?void 0:n.id)==="polyline"){T.type==="drawing-polyline"?J({type:"drawing-polyline",points:[...T.points,ie]}):(r([]),J({type:"drawing-polyline",points:[ie]}));return}if((n==null?void 0:n.id)==="elastic-polyline"){if(T.type==="drawing-elastic-polyline-point")J({type:"drawing-elastic-polyline-point",points:[...T.points,ie]});else if(T.type==="drawing-elastic-polyline-direction"){const O=T.points[T.points.length-1],F=Z.normalize(Z.sub(ie,O)),z=Z.add(O,Z.mul(F,T.length));J({type:"drawing-elastic-polyline-point",points:[...T.points,z]})}else r([]),J({type:"drawing-elastic-polyline-point",points:[ie]});return}if((n==null?void 0:n.id)==="spline"||(n==null?void 0:n.id)==="nurbs"){T.type==="drawing-spline"?J({type:"drawing-spline",points:[...T.points,ie]}):(r([]),J({type:"drawing-spline",points:[ie]}));return}if((n==null?void 0:n.id)==="arc-3p"){if(T.type==="drawing-arc-3p"){const O=[...T.points,ie];if(O.length===3){const F=Rm(O[0],O[1],O[2]);F&&o([{id:`arc-${Date.now()}`,type:"arc",...F,layerId:w}]),J({type:"idle"})}else J({type:"drawing-arc-3p",points:O})}else r([]),J({type:"drawing-arc-3p",points:[ie]});return}if((n==null?void 0:n.id)==="arc-cra"){if(T.type==="drawing-arc-cra"){const O=[...T.points,ie];if(O.length===3){const[F,z,N]=O,H=Math.hypot(z.x-F.x,z.y-F.y),ne=Math.atan2(z.y-F.y,z.x-F.x),Te=Math.atan2(N.y-F.y,N.x-F.x);H>1e-6&&o([{id:`arc-cra-${Date.now()}`,type:"arc",center:F,radius:H,startAngle:ne,endAngle:Te,counterClockwise:!1,layerId:w}]),J({type:"idle"})}else J({type:"drawing-arc-cra",points:O})}else r([]),J({type:"drawing-arc-cra",points:[ie]});return}if((n==null?void 0:n.id)==="arc-ttr"){if(T.type==="ttr-select1"){const O=yn(Q,e,ye.scale,I,q);O&&J({type:"ttr-select2",radius:T.radius,firstObject:O,firstPoint:Q})}else if(T.type==="ttr-select2"){const O=yn(Q,e,ye.scale,I,q);if(O&&O.id!==T.firstObject.id){const F=ks(T.firstObject,O,T.radius);F.length>0?J({type:"ttr-disambiguate",candidates:F}):(le("No valid tangent circle found."),J({type:"ttr-select1",radius:T.radius}))}}else if(T.type==="ttr-disambiguate"){let O=null,F=1/0;for(const z of T.candidates){const N=St(ie,z.center);N<F&&(F=N,O=z)}O&&o([{...O,id:`circle-ttr-${Date.now()}`}]),J({type:"ttr-select1",radius:Ne})}return}if((n==null?void 0:n.id)==="ellipse"){if(T.type==="drawing-ellipse"){const O=[...T.points,ie];if(O.length===3){const F=O[0],z=O[1],N=O[2],H=z.x-F.x,ne=z.y-F.y,Te=Math.atan2(ne,H),we=Math.hypot(H,ne),Ee=N.x-F.x,Ue=N.y-F.y,ae=Math.cos(-Te),ge=Math.sin(-Te),De=Ee*ge+Ue*ae,Ie=Math.abs(De);if(we>1e-6&&Ie>1e-6){const ce={id:`ellipse-${Date.now()}`,type:"ellipse",center:F,radiusX:we,radiusY:Ie,rotation:Te,layerId:w};o([ce])}J({type:"idle"})}else J({type:"drawing-ellipse",points:O})}else r([]),J({type:"drawing-ellipse",points:[ie]});return}if((n==null?void 0:n.id)==="line"||(n==null?void 0:n.id)==="rectangle"||(n==null?void 0:n.id)==="circle")r([]),J({type:"drawing",startPoint:ie});else if((n==null?void 0:n.id)==="select"){if(Ut){const z=Nm(Q,Ut,ye.scale);if(z){const N=e.filter(H=>ot.has(H.id));L.current={initialObjects:new Map(N.map(H=>[H.id,JSON.parse(JSON.stringify(H))]))},J({type:"gizmo-transform",startPoint:ie,part:z,initialPivot:Ut.pivot});return}}const O=E1(Q,e,ot,ye.scale,I);if(O){const z={type:"control-point",...O},N=e.find(H=>H.id===O.objectId);L.current={initialObjects:new Map([[N.id,JSON.parse(JSON.stringify(N))]])},J({type:"dragging",startPoint:ie,dragTarget:z});return}const F=yn(Q,e,ye.scale,I,q);if(F){if(F.groupId){const Te=e.filter(ge=>ge.groupId===F.groupId).map(ge=>ge.id),we=Te.some(ge=>ot.has(ge));let Ee;if(M.ctrlKey||M.shiftKey){const ge=new Set(s);we?Te.forEach(De=>ge.delete(De)):Te.forEach(De=>ge.add(De)),Ee=[...ge]}else we&&s.length===Te.length?Ee=s:Ee=Te;r(Ee);const Ue={type:"objects",ids:Ee},ae=e.filter(ge=>Ee.includes(ge.id));L.current={initialObjects:new Map(ae.map(ge=>[ge.id,JSON.parse(JSON.stringify(ge))]))},J({type:"dragging",startPoint:ie,dragTarget:Ue});return}const z=ot.has(F.id);if(!M.ctrlKey&&!M.shiftKey&&!z)r([F.id]);else if((M.ctrlKey||M.shiftKey)&&z){r(s.filter(Te=>Te!==F.id));return}else(M.ctrlKey||M.shiftKey)&&!z&&r([...s,F.id]);const N=ot.has(F.id)?s:[F.id],H={type:"objects",ids:N},ne=e.filter(Te=>N.includes(Te.id));L.current={initialObjects:new Map(ne.map(Te=>[Te.id,JSON.parse(JSON.stringify(Te))]))},J({type:"dragging",startPoint:ie,dragTarget:H});return}!M.ctrlKey&&!M.shiftKey&&r([]),J({type:"box-selecting",startPoint:R})}},mr=M=>{var F;const R=Jt(M);oi(R);const Q=on(R),ie=(F=yt.current)==null?void 0:F.getContext("2d");if(T.type==="panning"){const z=M.clientX-T.startMouse.x,N=M.clientY-T.startMouse.y;Vi({...T.startTransform,offsetX:T.startTransform.offsetX+z,offsetY:T.startTransform.offsetY+N});return}let G=Q,q=null;T.type==="drawing"&&(q=T.startPoint),T.type==="drawing-elastic-line-end"&&(q=T.startPoint),T.type==="drawing-elastic-line-direction"?q=T.startPoint:T.type==="drawing-polyline"&&T.points.length>0||T.type==="drawing-elastic-polyline-point"&&T.points.length>0||T.type==="drawing-spline"&&T.points.length>0?q=T.points[T.points.length-1]:T.type==="drawing-arc-cra"&&T.points.length>0||T.type==="drawing-ellipse"&&T.points.length>0?q=T.points[0]:T.type==="dragging"||T.type==="gizmo-transform"?q=T.startPoint:T.type==="mirroring"&&(q=T.firstPoint);let fe=!1;const me=Xn&&(q||(n==null?void 0:n.id)!=="select")?Fs(Q,e,Yt,ye.scale):null;if(li(me),Eo(null),me&&(G=me.point,fe=!0),q&&!fe){const z=Q.x-q.x,N=Q.y-q.y;if(yi){const H=Math.atan2(N,z),ne=Math.hypot(z,N),Te=So*Math.PI/180,we=Math.round(H/Te)*Te,Ee=3*Math.PI/180;if(Math.abs(H-we)<Ee&&ne>1e-6){G={x:q.x+ne*Math.cos(we),y:q.y+ne*Math.sin(we)};let Ue=we*180/Math.PI;for(;Ue<0;)Ue+=360;Eo({angle:we,dist:ne,snappedAngle:Math.round(Ue%360)}),fe=!0}}vo&&!fe&&(Math.abs(z)>Math.abs(N)?G={x:Q.x,y:q.y}:G={x:q.x,y:Q.y},fe=!0)}if(!fe&&Gi&&(G=Hl(Q)),Ct(G),T.type==="offsetting-interactive"){const{selectedObject:z}=T,{distance:N}=_1(G,z);if(N>.001)if(Ht){const H=un(z,N,null),ne=un(z,-N,null);Fe([H,ne].filter(Te=>Te!==null))}else{const H=un(z,N,G);Fe(H?[H]:[])}else Fe([]);J({...T,liveDistance:N})}else if(T.type==="offsetting-with-distance"){const{selectedObject:z,distance:N}=T;if(Ht){const H=un(z,N,null),ne=un(z,-N,null);Fe([H,ne].filter(Te=>Te!==null))}else{const H=un(z,N,G);Fe(H?[H]:[])}}else if(T.type==="filleting-select2"){const z=yn(Q,e,ye.scale,I,ie);if(z&&z.type==="line"&&z.id!==T.firstObject.id){const N=Bi(T.firstObject,z,T.radius,T.firstPoint,Q);Fe(N?[N]:[])}else Fe([])}else if(T.type==="chamfering-select2"){const z=yn(Q,e,ye.scale,I,ie);if(z&&z.type==="line"&&z.id!==T.firstObject.id){const N=Oi(T.firstObject,z,T.distances,T.firstPoint,Q);Fe(N?[N]:[])}else Fe([])}else if(T.type==="trimming-select-objects"){const z=yn(Q,e,ye.scale,I,ie);z&&!T.cutterIds.has(z.id)?He(Gl(z,T.cutters,Q)):He(null)}else T.type.startsWith("offsetting-")||Fe([]),He(null);if(T.type==="idle"&&(n==null?void 0:n.id)==="select"&&Ut){const z=Nm(Q,Ut,ye.scale);z!==en&&Jn(z)}else en!==null&&T.type!=="gizmo-transform"&&Jn(null);const{current:O}=L;if(T.type==="gizmo-transform"&&O){const{part:z,startPoint:N,initialPivot:H}=T,ne=G.x-N.x,Te=G.y-N.y;if(z==="pivot"){hi(Ee=>Ee?{...Ee,pivot:{x:H.x+ne,y:H.y+Te}}:null);return}let we=[];if(z==="move-x"||z==="move-y"){const Ee=z==="move-x"?ne:0,Ue=z==="move-y"?Te:0;we=e.map(ae=>{const ge=O.initialObjects.get(ae.id);if(!ge)return ae;const De=JSON.parse(JSON.stringify(ge));return De.type==="line"||De.type==="polyline"||De.type==="spline"?De.points.forEach(Ie=>{Ie.x+=Ee,Ie.y+=Ue}):De.type==="point"||De.type==="text"?(De.position.x+=Ee,De.position.y+=Ue):De.type==="rectangle"?(De.x+=Ee,De.y+=Ue):De.type==="circle"||De.type==="arc"||De.type==="ellipse"?(De.center.x+=Ee,De.center.y+=Ue):De.type.startsWith("dimension-")&&Object.keys(De).forEach(Ie=>{De[Ie]&&typeof De[Ie]=="object"&&"x"in De[Ie]&&"y"in De[Ie]&&(De[Ie].x+=Ee,De[Ie].y+=Ue)}),De})}else if(z==="rotate"){const Ee=Math.atan2(N.y-H.y,N.x-H.x),ae=Math.atan2(G.y-H.y,G.x-H.x)-Ee,ge=De=>{const Ie=Math.sin(ae),ce=Math.cos(ae),Le=De.x-H.x,Vt=De.y-H.y;return{x:Le*ce-Vt*Ie+H.x,y:Le*Ie+Vt*ce+H.y}};we=e.map(De=>{const Ie=O.initialObjects.get(De.id);if(!Ie)return De;let ce=JSON.parse(JSON.stringify(Ie));if(ce.type==="line"||ce.type==="polyline"||ce.type==="spline")ce.points=ce.points.map(ge);else if(ce.type==="point"||ce.type==="text")ce.position=ge(ce.position);else if(ce.type==="circle")ce.center=ge(ce.center);else if(ce.type==="arc")ce.center=ge(ce.center),ce.startAngle+=ae,ce.endAngle+=ae;else if(ce.type==="ellipse")ce.center=ge(ce.center),ce.rotation+=ae;else if(ce.type==="rectangle"){const Le=ce,pn=[{x:Le.x,y:Le.y},{x:Le.x+Le.width,y:Le.y},{x:Le.x+Le.width,y:Le.y+Le.height},{x:Le.x,y:Le.y+Le.height}].map(ge);ce={id:Le.id,type:"polyline",points:[...pn,pn[0]],layerId:Le.layerId,groupId:Le.groupId}}else ce.type.startsWith("dimension-")&&Object.keys(ce).forEach(Le=>{ce[Le]&&typeof ce[Le]=="object"&&"x"in ce[Le]&&"y"in ce[Le]&&(ce[Le]=ge(ce[Le]))});if(ce.type==="text"){const Le=Ie;ce.rotation=(Le.rotation||0)+ae}return ce})}else if(z==="scale"){const Ee=Math.hypot(N.x-H.x,N.y-H.y),Ue=Math.hypot(G.x-H.x,G.y-H.y);if(Ee<1)return;const ae=Ue/Ee,ge=De=>({x:H.x+(De.x-H.x)*ae,y:H.y+(De.y-H.y)*ae});we=e.map(De=>{const Ie=O.initialObjects.get(De.id);if(!Ie)return De;const ce=JSON.parse(JSON.stringify(Ie));if(ce.type==="line"||ce.type==="polyline"||ce.type==="spline")ce.points=ce.points.map(ge);else if(ce.type==="point"||ce.type==="text")ce.position=ge(ce.position);else if(ce.type==="rectangle"){const Le=ge({x:ce.x,y:ce.y}),Vt=ge({x:ce.x+ce.width,y:ce.y+ce.height});ce.x=Le.x,ce.y=Le.y,ce.width=Vt.x-Le.x,ce.height=Vt.y-Le.y}else ce.type==="circle"||ce.type==="arc"?(ce.center=ge(ce.center),ce.radius*=ae):ce.type==="ellipse"?(ce.center=ge(ce.center),ce.radiusX*=ae,ce.radiusY*=ae):ce.type.startsWith("dimension-")&&(Object.keys(ce).forEach(Le=>{ce[Le]&&typeof ce[Le]=="object"&&"x"in ce[Le]&&"y"in ce[Le]&&(ce[Le]=ge(ce[Le]))}),ce.type==="dimension-angular"&&(ce.radius*=ae));if(ce.type==="text"){const Le=Ie;ce.fontSize=Le.fontSize*ae}return ce})}c(we)}else if(T.type==="dragging"&&O){const{startPoint:z,dragTarget:N}=T,{initialObjects:H}=O,ne=G.x-z.x,Te=G.y-z.y,we=e.map(Ee=>{const Ue=H.get(Ee.id);if(!Ue)return Ee;const ae=JSON.parse(JSON.stringify(Ue));if(N.type==="control-point"&&Ue.id===N.objectId)if(ae.type==="line"||ae.type==="polyline"||ae.type==="spline")ae.points[N.pointIndex]={...ae.points[N.pointIndex],x:G.x,y:G.y};else if(ae.type==="text")N.pointIndex===0&&(ae.position=G);else if(ae.type==="rectangle"){const ge=Ue,Ie=[{x:ge.x,y:ge.y},{x:ge.x+ge.width,y:ge.y},{x:ge.x+ge.width,y:ge.y+ge.height},{x:ge.x,y:ge.y+ge.height}][(N.pointIndex+2)%4];ae.x=Math.min(G.x,Ie.x),ae.y=Math.min(G.y,Ie.y),ae.width=Math.abs(G.x-Ie.x),ae.height=Math.abs(G.y-Ie.y)}else if(ae.type==="circle")N.pointIndex===0?ae.center=G:N.pointIndex===1&&(ae.radius=Math.hypot(G.x-ae.center.x,G.y-ae.center.y));else if(ae.type==="arc"){const ge=Ue;if(N.pointIndex===2)ae.center=G;else{const De=Math.hypot(G.x-ge.center.x,G.y-ge.center.y),Ie=Math.atan2(G.y-ge.center.y,G.x-ge.center.y);ae.radius=De,N.pointIndex===0?ae.startAngle=Ie:ae.endAngle=Ie}}else if(ae.type==="ellipse"){const ge=Ue;if(N.pointIndex===0)ae.center=G;else{const De=G.x-ge.center.x,Ie=G.y-ge.center.y;if(N.pointIndex===1||N.pointIndex===2){const ce=Math.cos(ge.rotation),Le=Math.sin(ge.rotation);ae.radiusX=Math.max(1e-6,Math.abs(De*ce+Ie*Le))}else{const ce=Math.cos(ge.rotation+Math.PI/2),Le=Math.sin(ge.rotation+Math.PI/2);ae.radiusY=Math.max(1e-6,Math.abs(De*ce+Ie*Le))}}}else if(ae.type==="dimension-linear"||ae.type==="dimension-aligned")N.pointIndex===0?ae.p1=G:N.pointIndex===1?ae.p2=G:N.pointIndex===2&&(ae.textPosition=G);else if(ae.type==="dimension-radial")N.pointIndex===0?ae.center=G:N.pointIndex===1&&(ae.radiusPoint=G);else if(ae.type==="dimension-diameter")N.pointIndex===0?ae.p1=G:N.pointIndex===1&&(ae.p2=G);else if(ae.type==="dimension-angular"){if(N.pointIndex===0)ae.center=G;else if(N.pointIndex===1)ae.p1=G;else if(N.pointIndex===2)ae.p2=G;else if(N.pointIndex===3){const ge=Ue;ae.radius=Math.hypot(G.x-ge.center.x,G.y-ge.center.y)}}else ae.type==="dimension-coordinate"&&(N.pointIndex===0?ae.point=G:N.pointIndex===1&&(ae.leaderEndPoint=G));else N.type==="objects"&&(ae.type==="line"||ae.type==="polyline"||ae.type==="spline"?ae.points=ae.points.map(ge=>({x:ge.x+ne,y:ge.y+Te})):ae.type==="point"||ae.type==="text"?ae.position={x:ae.position.x+ne,y:ae.position.y+Te}:ae.type==="rectangle"?(ae.x+=ne,ae.y+=Te):ae.type==="circle"||ae.type==="arc"||ae.type==="ellipse"?(ae.center.x+=ne,ae.center.y+=Te):ae.type.startsWith("dimension-")&&Object.keys(ae).forEach(ge=>{ae[ge]&&typeof ae[ge]=="object"&&"x"in ae[ge]&&"y"in ae[ge]&&(ae[ge].x+=ne,ae[ge].y+=Te)}));return ae});c(we)}},$o=M=>{var q;const R=Jt(M);if(!R)return;const Q=on(R),ie=Ye??Q;if((q=yt.current)==null||q.getContext("2d"),T.type==="drawing"){if(St(T.startPoint,ie)>4){if((n==null?void 0:n.id)==="line")o([{id:`line-${Date.now()}`,type:"line",points:[T.startPoint,ie],layerId:w}]);else if((n==null?void 0:n.id)==="rectangle")o([{id:`rect-${Date.now()}`,type:"rectangle",x:Math.min(T.startPoint.x,ie.x),y:Math.min(T.startPoint.y,ie.y),width:Math.abs(T.startPoint.x-ie.x),height:Math.abs(T.startPoint.y-ie.y),layerId:w}]);else if((n==null?void 0:n.id)==="circle"){const fe=Math.hypot(ie.x-T.startPoint.x,ie.y-T.startPoint.y);o([{id:`circle-${Date.now()}`,type:"circle",center:T.startPoint,radius:fe,layerId:w}])}dn(ie)}}else if(T.type==="box-selecting"){const fe=on(T.startPoint),me=on(R),O={x:Math.min(fe.x,me.x),y:Math.min(fe.y,me.y),width:Math.abs(fe.x-me.x),height:Math.abs(fe.y-me.y)};if(O.width>5||O.height>5){const F=[];for(const z of e){const N=I.find(H=>H.id===z.layerId);if(!(!N||!N.isVisible||N.isLocked)){if(z.type==="line")(Li(z.points[0],O)||Li(z.points[1],O))&&F.push(z.id);else if(z.type==="polyline"||z.type==="spline")z.points.some(H=>Li(H,O))&&F.push(z.id);else if(z.type==="point")Li(z.position,O)&&F.push(z.id);else if(z.type==="text"||z.type==="ellipse"){const H=_c(z),ne={x:H.minX,y:H.minY,width:H.maxX-H.minX,height:H.maxY-H.minY};O.x<ne.x+ne.width&&O.x+O.width>ne.x&&O.y<ne.y+ne.height&&O.y+O.height>ne.y&&F.push(z.id)}else if(z.type==="rectangle")[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}].some(ne=>Li(ne,O))&&F.push(z.id);else if(z.type==="circle")Li(z.center,O)&&F.push(z.id);else if(z.type==="arc"){const H={x:z.center.x+z.radius*Math.cos(z.startAngle),y:z.center.y+z.radius*Math.sin(z.startAngle)},ne={x:z.center.x+z.radius*Math.cos(z.endAngle),y:z.center.y+z.radius*Math.sin(z.endAngle)};(Li(H,O)||Li(ne,O))&&F.push(z.id)}}}if(M.ctrlKey||M.shiftKey){const z=new Set(s);F.forEach(N=>{z.has(N)?z.delete(N):z.add(N)}),r(Array.from(z))}else r(F)}}else if(T.type==="dragging"||T.type==="gizmo-transform"){if(T.type==="gizmo-transform"&&T.part!=="pivot"&&s.length>0){let fe=1/0,me=1/0,O=-1/0,F=-1/0;e.forEach(z=>{if(ot.has(z.id)){const N=_c(z);fe=Math.min(fe,N.minX),me=Math.min(me,N.minY),O=Math.max(O,N.maxX),F=Math.max(F,N.maxY)}}),isFinite(fe)&&hi(z=>z?{...z,pivot:{x:(fe+O)/2,y:(me+F)/2}}:null)}L.current=null}!(["drawing-polyline","drawing-elastic-polyline-point","drawing-elastic-polyline-direction","drawing-arc-3p","drawing-arc-cra","drawing-spline","drawing-ellipse","drawing-elastic-line-end"].includes(T.type)||T.type.startsWith("drawing-dim"))&&!T.type.startsWith("offsetting")&&!T.type.startsWith("trimming")&&!T.type.startsWith("filleting")&&!T.type.startsWith("chamfering")&&!T.type.startsWith("mirroring")&&!T.type.startsWith("ttr-")&&J({type:"idle"})},zs=M=>{if(M.preventDefault(),!yt.current)return;const Q=Jt(M),ie=on(Q),G=1.1,q=M.deltaY>0?1/G:G,fe=ye.scale*q;if(fe<.05||fe>20)return;const me=Q.x-ie.x*fe,O=Q.y-ie.y*fe;Vi({scale:fe,offsetX:me,offsetY:O})},Qo=ee.useCallback(()=>{var M;if((M=L.current)!=null&&M.initialObjects){const R=new Map(L.current.initialObjects);c(e.map(Q=>R.get(Q.id)||Q)),L.current=null}Fe([]),He(null),Gt(!1),(n==null?void 0:n.id)==="offset"?J({type:"offsetting-select"}):(n==null?void 0:n.id)==="trim"?J({type:"trimming-select-cutters",cutterIds:new Set}):(n==null?void 0:n.id)==="fillet"?J({type:"filleting-select1",radius:Ae}):(n==null?void 0:n.id)==="chamfer"?J({type:"chamfering-select1",distances:Ve}):(n==null?void 0:n.id)==="arc-ttr"?J({type:"ttr-select1",radius:Ne}):J({type:"idle"}),(["offset","trim","fillet","chamfer","extend","mirror","text","ellipse","arc-3p","arc-cra","arc-ttr","elastic-line","elastic-polyline"].includes((n==null?void 0:n.id)??"")||n!=null&&n.id.startsWith("dimension-"))&&f(pi[0])},[e,c,n,f,Ae,Ve,Ne]),Yi=ee.useCallback(()=>{T.type==="drawing-polyline"&&T.points.length>=2&&o([{id:`polyline-${Date.now()}`,type:"polyline",points:T.points,layerId:w}]),J({type:"idle"})},[T,o,w]),Ji=ee.useCallback(()=>{(T.type==="drawing-elastic-polyline-point"||T.type==="drawing-elastic-polyline-direction")&&T.points.length>=2&&o([{id:`polyline-${Date.now()}`,type:"polyline",points:T.points,layerId:w}]),J({type:"idle"}),f(pi[0])},[T,o,w,f]),Rn=ee.useCallback(()=>{if(T.type==="drawing-spline"&&T.points.length>=2){const M=(n==null?void 0:n.id)==="nurbs"?"Basis":"Cardinal",R=T.points;o([{id:`spline-${Date.now()}`,type:"spline",points:R,interpolation:M,layerId:w}])}J({type:"idle"})},[T,o,n,w]);ee.useEffect(()=>{const M=R=>{if(R.target.tagName.toLowerCase()!=="input"&&(R.key==="F3"&&(R.preventDefault(),To(Q=>!Q)),R.key==="Escape"&&(Qo(),nn(null)),T.type==="drawing-polyline"&&R.key==="Enter"&&Yi(),(T.type==="drawing-elastic-polyline-point"||T.type==="drawing-elastic-polyline-direction")&&R.key==="Enter"&&Ji(),T.type==="drawing-spline"&&R.key==="Enter"&&Rn(),T.type==="trimming-select-cutters"&&R.key==="Enter")){const Q=e.filter(ie=>T.cutterIds.has(ie.id));J({type:"trimming-select-objects",cutterIds:T.cutterIds,cutters:Q})}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[T,Yi,Rn,Ji,Qo,e,To]);const xn=M=>{if(M.preventDefault(),T.type==="drawing-polyline")Yi();else if(T.type==="drawing-elastic-polyline-point"||T.type==="drawing-elastic-polyline-direction")Ji();else if(T.type==="drawing-spline")Rn();else if(T.type!=="idle")Qo();else{const R=Jt(M);on(R),nn({x:M.clientX,y:M.clientY})}};ee.useEffect(()=>{const M=yt.current,R=j.current;if(!M||!R)return;const Q=new ResizeObserver(()=>{M.width=R.clientWidth,M.height=R.clientHeight});return Q.observe(R),M.width=R.clientWidth,M.height=R.clientHeight,()=>Q.disconnect()},[]);const Hs=(M,R,Q)=>{const ie=8/Q,G=ie/2,{x:q,y:fe}=R.point;switch(M.strokeStyle="#00FF00",M.lineWidth=1.5/Q,M.beginPath(),R.mode){case"endpoint":M.rect(q-G,fe-G,ie,ie);break;case"midpoint":M.moveTo(q,fe-G),M.lineTo(q+G,fe+G),M.lineTo(q-G,fe+G),M.closePath();break;case"center":M.arc(q,fe,G,0,2*Math.PI);break;case"node":M.arc(q,fe,G,0,2*Math.PI),M.moveTo(q-ie,fe),M.lineTo(q+ie,fe),M.moveTo(q,fe-ie),M.lineTo(q,fe+ie);break;case"quadrant":M.moveTo(q,fe-G),M.lineTo(q+G,fe),M.lineTo(q,fe+G),M.lineTo(q-G,fe),M.closePath();break;case"intersection":M.moveTo(q-G,fe-G),M.lineTo(q+G,fe+G),M.moveTo(q+G,fe-G),M.lineTo(q-G,fe+G);break;case"nearest":M.moveTo(q-G,fe-G),M.lineTo(q+G,fe+G),M.moveTo(q-G,fe+G),M.lineTo(q+G,fe-G),M.moveTo(q-G,fe),M.lineTo(q+G,fe);break;case"geometric-center":M.arc(q,fe,G,0,2*Math.PI),M.moveTo(q-ie,fe),M.lineTo(q+ie,fe),M.moveTo(q,fe-ie),M.lineTo(q,fe+ie);break}M.stroke()},Vl=ee.useMemo(()=>{const M=new Set;return e.forEach(R=>{ot.has(R.id)&&R.groupId&&M.add(R.groupId)}),M},[ot,e]);ee.useEffect(()=>{if(!ht||!yt.current)return;const M=yt.current,{width:R,height:Q}=M,{minX:ie,minY:G,maxX:q,maxY:fe}=ht,me=q-ie,O=fe-G;if(me<1e-6&&O<1e-6){const ge=(ie+q)/2,De=(G+fe)/2;Vi({scale:1,offsetX:R/2-ge,offsetY:Q/2-De});return}const F=.1,z=me===0?100:me*(1+F*2),N=O===0?100:O*(1+F*2),H=R/z,ne=Q/N,Te=Math.min(H,ne,20),we=ie+me/2,Ee=G+O/2,Ue=R/2-we*Te,ae=Q/2-Ee*Te;Vi({scale:Te,offsetX:Ue,offsetY:ae})},[ht]),ee.useEffect(()=>{var z;const M=yt.current;if(!M)return;const R=M.getContext("2d");if(!R)return;const{width:Q,height:ie}=M;R.clearRect(0,0,Q,ie),R.fillStyle="#27272a",R.fillRect(0,0,Q,ie),R.save(),R.translate(ye.offsetX,ye.offsetY),R.scale(ye.scale,ye.scale);const G=on({x:0,y:0}),q=on({x:Q,y:ie}),fe=(N,H)=>{const ne={"ultra-fine":{m:10,M:50},"extra-fine":{m:25,M:125},fine:{m:50,M:250},medium:{m:100,M:500},coarse:{m:250,M:1250},"extra-coarse":{m:500,M:2500}},{m:Te,M:we}=ne[H];let Ee=Te;for(;Ee*N<10;)Ee*=5;for(;Ee*N>25;)Ee/=5;let Ue=we;for(;Ue*N<50;)Ue*=5;for(;Ue*N>125;)Ue/=5;return{minor:Ee,major:Ue}},{minor:me,major:O}=fe(ye.scale,de),F=(N,H,ne)=>{R.strokeStyle=H,R.lineWidth=ne/ye.scale,R.beginPath();const Te=Math.floor(G.x/N)*N,we=Math.ceil(q.x/N)*N,Ee=Math.floor(G.y/N)*N,Ue=Math.ceil(q.y/N)*N;for(let ae=Te;ae<=we;ae+=N)R.moveTo(ae,Ee),R.lineTo(ae,Ue);for(let ae=Ee;ae<=Ue;ae+=N)R.moveTo(Te,ae),R.lineTo(we,ae);R.stroke()};if(F(me,"#3f3f46",.5),F(O,"#52525b",1),Pe&&(R.strokeStyle="#ef4444",R.lineWidth=1.5/ye.scale,R.beginPath(),R.moveTo(G.x,0),R.lineTo(q.x,0),R.stroke(),R.strokeStyle="#22c55e",R.lineWidth=1.5/ye.scale,R.beginPath(),R.moveTo(0,G.y),R.lineTo(0,q.y),R.stroke()),e.forEach(N=>{const H=ot.has(N.id),ne=H&&(!N.groupId||!Vl.has(N.groupId));N.type==="line"?fi(R,N,H,ye.scale,I,ne):N.type==="polyline"?bs(R,N,H,ye.scale,I,ne):N.type==="spline"?Cm(R,N,H,ye.scale,I,ne):N.type==="point"?d1(R,N,H,ye.scale,I):N.type==="rectangle"?_m(R,N,H,ye.scale,I,ne):N.type==="circle"?Vo(R,N,H,ye.scale,I,ne):N.type==="arc"?Rl(R,N,H,ye.scale,I,ne):N.type==="text"?p1(R,N,H,ye.scale,I,ne):N.type==="ellipse"?Am(R,N,H,ye.scale,I,ne):N.type==="dimension-linear"?h1(R,N,H,ye.scale,I,ne):N.type==="dimension-aligned"?y1(R,N,H,ye.scale,I,ne):N.type==="dimension-angular"?m1(R,N,H,ye.scale,I,ne):N.type==="dimension-radial"?g1(R,N,H,ye.scale,I,ne):N.type==="dimension-diameter"?v1(R,N,H,ye.scale,I,ne):N.type==="dimension-coordinate"&&x1(R,N,H,ye.scale,I,ne)}),Ye){if(T.type==="drawing"&&n){const N={id:"preview",layerId:w};if(n.id==="line"&&fi(R,{...N,points:[T.startPoint,Ye],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]}),n.id==="rectangle"&&_m(R,{...N,x:Math.min(T.startPoint.x,Ye.x),y:Math.min(T.startPoint.y,Ye.y),width:Math.abs(T.startPoint.x-Ye.x),height:Math.abs(T.startPoint.y-Ye.y)},!1,ye.scale,I,!1),n.id==="circle"){const H=Math.hypot(Ye.x-T.startPoint.x,Ye.y-T.startPoint.y);Vo(R,{...N,center:T.startPoint,radius:H},!1,ye.scale,I,!1)}}if(T.type==="drawing-elastic-line-end"&&fi(R,{points:[T.startPoint,Ye],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]}),T.type==="drawing-elastic-line-direction"){Vo(R,{center:T.startPoint,radius:T.length,layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]});const N=Z.normalize(Z.sub(Ye,T.startPoint)),H=Z.add(T.startPoint,Z.mul(N,T.length));fi(R,{points:[T.startPoint,H],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]})}if(T.type==="drawing-polyline"&&T.points.length>0){const N={points:[...T.points,Ye],layerId:w};bs(R,N,!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]})}if(T.type==="drawing-elastic-polyline-point"&&T.points.length>0){const N={points:[...T.points,Ye],layerId:w};bs(R,N,!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]})}if(T.type==="drawing-elastic-polyline-direction"&&T.points.length>0){const N=T.points[T.points.length-1],H={points:T.points,layerId:w};bs(R,H,!1,ye.scale,I,!1),Vo(R,{center:N,radius:T.length,layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]});const ne=Z.normalize(Z.sub(Ye,N)),Te=Z.add(N,Z.mul(ne,T.length));fi(R,{points:[N,Te],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]})}if(T.type==="drawing-spline"&&T.points.length>0){const N={points:[...T.points,Ye],interpolation:(n==null?void 0:n.id)==="nurbs"?"Basis":"Cardinal",layerId:w};Cm(R,N,!1,ye.scale,I,!1)}if(T.type==="drawing-arc-3p"&&T.points.length>0){const N=Rm(T.points[0],T.points.length>1?T.points[1]:Ye,Ye);N&&Rl(R,{...N,layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]})}if(T.type==="drawing-arc-cra"&&T.points.length>0){const N=T.points[0],H=Ye,ne=Math.hypot(H.x-N.x,H.y-N.y);if(Vo(R,{center:N,radius:ne,layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]}),T.points.length===2){const Te=T.points[1],we=Ye,Ee=Math.atan2(Te.y-N.y,Te.x-N.x),Ue=Math.atan2(we.y-N.y,we.x-N.x);Rl(R,{center:N,radius:ne,startAngle:Ee,endAngle:Ue,counterClockwise:!1,layerId:w},!1,ye.scale,I,!1,{color:"#888"})}}if(T.type==="drawing-ellipse"&&T.points.length>0){if(T.points.length===1)fi(R,{points:[T.points[0],Ye],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]});else if(T.points.length===2){const N=T.points[0],H=T.points[1],ne=Ye,Te=H.x-N.x,we=H.y-N.y,Ee=Math.atan2(we,Te),Ue=Math.hypot(Te,we),ae=ne.x-N.x,ge=ne.y-N.y,De=Math.cos(-Ee),Ie=Math.sin(-Ee),ce=ae*Ie+ge*De,Le=Math.abs(ce);Am(R,{center:N,radiusX:Ue,radiusY:Le,rotation:Ee,layerId:w},!1,ye.scale,I,!1)}}T.type==="mirroring"&&fi(R,{points:[T.firstPoint,Ye],layerId:w},!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]}),T.type==="ttr-disambiguate"&&T.candidates.forEach(N=>Vo(R,N,!1,ye.scale,I,!1,{color:"#888",lineDash:[4,4]}))}if(Re.length>0&&Re.forEach(N=>{const H={color:"rgba(255, 255, 0, 0.7)",lineDash:[5,3]};N.type==="line"&&fi(R,N,!1,ye.scale,I,!1,H),N.type==="polyline"&&bs(R,N,!1,ye.scale,I,!1,H),N.type==="circle"&&Vo(R,N,!1,ye.scale,I,!1,H),N.type==="arc"&&Rl(R,N,!1,ye.scale,I,!1,H)}),Xe){const N={color:"rgba(255, 0, 0, 0.5)",lineDash:[2,2]},H={color:"rgba(0, 255, 0, 0.5)"};Xe.removed.forEach(ne=>{ne.type==="line"&&fi(R,ne,!1,ye.scale,I,!1,N),ne.type==="arc"&&Rl(R,ne,!1,ye.scale,I,!1,N)}),Xe.trimmed.forEach(ne=>{ne.type==="line"&&fi(R,ne,!1,ye.scale,I,!1,H),ne.type==="arc"&&Rl(R,ne,!1,ye.scale,I,!1,H)})}if(Kn&&Hs(R,Kn,ye.scale),(Ut&&(n==null?void 0:n.id)==="select"&&Vl.size>0||Ut&&(n==null?void 0:n.id)==="select"&&s.length>0&&!((z=e.find(N=>s.includes(N.id)))!=null&&z.groupId))&&S1(R,Ut,en,ye.scale),R.restore(),b){R.save();const Te=Ie=>{const Le=[.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3],pn=60*(1/Ie);let _o=Le[Le.length-1];for(const Zn of Le)if(Zn>=pn){_o=Zn;break}const Ao=_o/5;return{major:_o,minor:Ao}},{major:we,minor:Ee}=Te(ye.scale);R.fillStyle="#27272a",R.fillRect(0,0,Q,20),R.fillRect(0,0,20,ie),R.strokeStyle="#52525b",R.lineWidth=1,R.beginPath(),R.moveTo(20,20),R.lineTo(Q,20),R.moveTo(20,20),R.lineTo(20,ie),R.stroke(),R.fillStyle="#a1a1aa",R.strokeStyle="#a1a1aa",R.font="10px sans-serif",R.textAlign="center",R.textBaseline="bottom";const Ue=Math.floor(G.x/Ee)*Ee,ae=Math.ceil(q.x/Ee)*Ee;for(let Ie=Ue;Ie<=ae;Ie+=Ee){const ce=Ie*ye.scale+ye.offsetX;if(ce<20)continue;const Le=Math.abs(Ie%we)<1e-9||Math.abs(Ie%we-we)<1e-9,Vt=Le?10:5;R.beginPath(),R.moveTo(ce,20),R.lineTo(ce,20-Vt),R.stroke(),Le&&R.fillText(Ie.toFixed(Ie<1&&Ie!==0?2:0),ce,20-Vt-2)}R.textAlign="right",R.textBaseline="middle";const ge=Math.floor(G.y/Ee)*Ee,De=Math.ceil(q.y/Ee)*Ee;for(let Ie=ge;Ie<=De;Ie+=Ee){const ce=Ie*ye.scale+ye.offsetY;if(ce<20)continue;const Le=Math.abs(Ie%we)<1e-9||Math.abs(Ie%we-we)<1e-9,Vt=Le?10:5;R.beginPath(),R.moveTo(20,ce),R.lineTo(20-Vt,ce),R.stroke(),Le&&R.fillText(Ie.toFixed(Ie<1&&Ie!==0?2:0),20-Vt-2,ce)}Nt&&Nt.x>20&&Nt.y>20&&(R.strokeStyle="#f59e0b",R.lineWidth=.5,R.beginPath(),R.moveTo(Nt.x,0),R.lineTo(Nt.x,20),R.stroke(),R.beginPath(),R.moveTo(0,Nt.y),R.lineTo(20,Nt.y),R.stroke()),R.fillStyle="#27272a",R.fillRect(0,0,20,20),R.restore()}if(Mn&&Ye&&Nt){let N=null;if(T.type==="drawing"&&(N=T.startPoint),T.type==="drawing-elastic-line-end"&&(N=T.startPoint),T.type==="drawing-elastic-line-direction"?N=T.startPoint:T.type==="drawing-polyline"&&T.points.length>0||T.type==="drawing-spline"&&T.points.length>0?N=T.points[T.points.length-1]:T.type==="drawing-arc-cra"&&T.points.length>0||T.type==="drawing-ellipse"&&T.points.length>0?N=T.points[0]:T.type==="dragging"||T.type==="gizmo-transform"?N=T.startPoint:T.type==="mirroring"&&(N=T.firstPoint),N){const H={x:N.x*ye.scale+ye.offsetX,y:N.y*ye.scale+ye.offsetY},ne={x:H.x+1e4*Math.cos(Mn.angle),y:H.y+1e4*Math.sin(Mn.angle)},Te={x:H.x-1e4*Math.cos(Mn.angle),y:H.y-1e4*Math.sin(Mn.angle)};R.save(),R.strokeStyle="#00FF00",R.lineWidth=.5,R.setLineDash([4,4]),R.beginPath(),R.moveTo(Te.x,Te.y),R.lineTo(ne.x,ne.y),R.stroke(),R.restore();const we=`${Mn.dist.toFixed(2)} < ${Mn.snappedAngle}`,Ee={x:Nt.x+15,y:Nt.y-15};R.font="12px sans-serif";const Ue=R.measureText(we);R.fillStyle="rgba(0, 0, 0, 0.7)",R.fillRect(Ee.x-2,Ee.y-12,Ue.width+4,16),R.fillStyle="#00FF00",R.fillText(we,Ee.x,Ee.y)}}},[e,ye,ot,Vl,T,Ye,Nt,I,n,en,Ut,Kn,Mn,de,b,Pe,Re,Xe]),ee.useEffect(()=>{if(!Ze)return;if(T.type==="drawing-elastic-line-end"){const R=parseFloat(Ze);if(!isNaN(R)&&R>0){J({type:"drawing-elastic-line-direction",startPoint:T.startPoint,length:R}),le(`Elastic Line length set to: ${R}`),it();return}}if(T.type==="drawing-elastic-polyline-point"&&T.points.length>0){const R=parseFloat(Ze);if(!isNaN(R)&&R>0){J({type:"drawing-elastic-polyline-direction",points:T.points,length:R}),le(`Elastic Polyline length set to: ${R}`),it();return}}const M=Ze.split(/[, ]+/).filter(R=>R.trim()!=="");if(M.length>=2){const R=parseFloat(M[0]),Q=parseFloat(M[1]);if(!isNaN(R)&&!isNaN(Q)){const ie={x:R,y:Q},G={button:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,preventDefault:()=>{}};Ct(ie),Qn(G),$o(G),it();return}}nt(Ze)},[Ze,it,nt,Qn,$o,T,le]);const Xi=ee.useMemo(()=>I.find(M=>M.id===w),[I,w]),{width:Gs,label:Zo}=ee.useMemo(()=>A1(ye.scale),[ye.scale]);return C.jsxs("div",{ref:j,className:"relative flex-grow bg-zinc-900 overflow-hidden cursor-crosshair",children:[C.jsx("canvas",{ref:yt,className:"absolute top-0 left-0",onMouseDown:Qn,onMouseMove:mr,onMouseUp:$o,onWheel:zs,onContextMenu:xn}),T.type==="box-selecting"&&Nt&&C.jsx("div",{className:"absolute border border-dashed border-cyan-400 bg-cyan-400 bg-opacity-20 pointer-events-none",style:{left:Math.min(T.startPoint.x,Nt.x),top:Math.min(T.startPoint.y,Nt.y),width:Math.abs(T.startPoint.x-Nt.x),height:Math.abs(T.startPoint.y-Nt.y)}}),zt&&C.jsxs("div",{ref:xe,className:"absolute bg-zinc-800 border border-zinc-700 rounded-md shadow-lg p-1 text-white text-xs z-30 w-48",style:{left:zt.x,top:zt.y},children:[C.jsxs("div",{className:"px-3 py-1.5 rounded-sm hover:bg-zinc-700 cursor-pointer",onClick:()=>{Oe&&f(Oe),nn(null)},children:["Repeat ",Oe==null?void 0:Oe.name]}),C.jsx("div",{className:"border-t border-zinc-700 my-1"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${P?"hover:bg-zinc-700 cursor-pointer":"text-zinc-500 cursor-not-allowed"}`,onClick:()=>{P&&v(on({x:zt.x,y:zt.y})),nn(null)},children:"Paste"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${s.length===0?"text-zinc-500 cursor-not-allowed":"hover:bg-zinc-700 cursor-pointer"}`,onClick:()=>{s.length>0&&m(),nn(null)},children:"Copy"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${s.length===0?"text-zinc-500 cursor-not-allowed":"hover:bg-zinc-700 cursor-pointer"}`,onClick:()=>{s.length>0&&p(),nn(null)},children:"Cut"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${s.length===0?"text-zinc-500 cursor-not-allowed":"hover:bg-zinc-700 cursor-pointer"}`,onClick:()=>{s.length>0&&x(),nn(null)},children:"Duplicate"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${s.length===0?"text-zinc-500 cursor-not-allowed":"hover:bg-zinc-700 cursor-pointer"}`,onClick:()=>{s.length>0&&y(),nn(null)},children:"Delete"}),C.jsx("div",{className:"border-t border-zinc-700 my-1"}),C.jsx("div",{className:"px-3 py-1.5 rounded-sm hover:bg-zinc-700 cursor-pointer",onClick:()=>{Qo(),nn(null)},children:"Cancel"}),C.jsx("div",{className:"border-t border-zinc-700 my-1"}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${wt?"hover:bg-zinc-700 cursor-pointer":"text-zinc-500 cursor-not-allowed"}`,onClick:()=>{wt&&S(),nn(null)},children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(pt,{type:"group",className:"w-4 h-4 mr-2"}),C.jsx("span",{children:"Group"})]})}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${Lt?"hover:bg-zinc-700 cursor-pointer":"text-zinc-500 cursor-not-allowed"}`,onClick:()=>{Lt&&_(),nn(null)},children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(pt,{type:"ungroup",className:"w-4 h-4 mr-2"}),C.jsx("span",{children:"Ungroup"})]})}),C.jsx("div",{className:`px-3 py-1.5 rounded-sm flex items-center justify-between ${ct?"hover:bg-zinc-700 cursor-pointer":"text-zinc-500 cursor-not-allowed"}`,onClick:()=>{ct&&U(),nn(null)},children:C.jsxs("div",{className:"flex items-center",children:[C.jsx(pt,{type:"explode",className:"w-4 h-4 mr-2"}),C.jsx("span",{children:"Explode"})]})})]}),C.jsxs("div",{className:"absolute bottom-0 left-0 right-0 h-7 bg-zinc-800 border-t border-zinc-700 flex items-center justify-between px-2 text-xs text-gray-300",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("button",{onClick:()=>kl(M=>!M),title:"Grid Snap",className:`px-3 py-1 rounded-sm transition-colors ${Gi?"bg-sky-600 text-white":"bg-zinc-700 hover:bg-zinc-600 text-gray-300"}`,children:"GRID"}),C.jsx("button",{onClick:()=>xo(M=>!M),title:"Ortho Mode",className:`px-3 py-1 rounded-sm transition-colors ${vo?"bg-sky-600 text-white":"bg-zinc-700 hover:bg-zinc-600 text-gray-300"}`,children:"ORTHO"}),C.jsxs("div",{className:"relative",children:[C.jsx("button",{onClick:()=>mi(M=>!M),title:"Polar Tracking","data-polar-button":!0,className:`px-3 py-1 rounded-sm transition-colors ${yi?"bg-sky-600 text-white":"bg-zinc-700 hover:bg-zinc-600 text-gray-300"}`,children:"POLAR"}),tn&&C.jsx("div",{ref:at,children:C.jsx(u1,{currentAngle:So,onAngleSelect:M=>{qi(!0),zl(M),mi(!1)},isPolarTrackingEnabled:yi,onTogglePolarTracking:()=>qi(M=>!M)})})]}),C.jsxs("div",{className:"relative",children:[C.jsx("button",{onClick:()=>Ko(M=>!M),title:"Object Snap Settings","data-osnap-button":!0,className:`px-3 py-1 rounded-sm transition-colors ${Xn?"bg-sky-600 text-white":"bg-zinc-700 hover:bg-zinc-600 text-gray-300"}`,children:"OSNAP"}),Xo&&C.jsx("div",{ref:We,children:C.jsx(a1,{activeModes:Yt,onToggle:M=>{const R=new Set(Yt);R.has(M)?R.delete(M):R.add(M),Ln(R)},isOsnapEnabled:Xn,onToggleOsnap:()=>To(M=>!M)})})]})]}),Xi&&C.jsx("div",{className:"flex-1 flex justify-center items-center",children:C.jsxs("div",{className:"flex items-center space-x-2 px-2 py-0.5 rounded",title:`Current Layer: ${Xi.name}`,children:[C.jsx("div",{style:{backgroundColor:Xi.color},className:"w-3 h-3 rounded-sm border border-zinc-500"}),C.jsx("span",{className:"text-gray-200",children:Xi.name})]})}),C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsxs("div",{className:"flex items-center space-x-2",title:"Scale",children:[C.jsx("span",{className:"text-right w-10",children:Zo}),C.jsx("div",{className:"h-3 border-l border-r border-b border-gray-400",style:{width:Gs}})]}),C.jsx("div",{className:"w-32 text-left tabular-nums",children:Ye?`${Ye.x.toFixed(2)}, ${Ye.y.toFixed(2)}`:""}),C.jsxs("div",{className:"w-24 text-left",children:["Zoom: ",(ye.scale*100).toFixed(0),"%"]}),C.jsxs("div",{ref:ze,className:"relative",children:[C.jsx("button",{onClick:()=>W(M=>!M),className:"bg-zinc-700 hover:bg-zinc-600 px-2 py-1 rounded",children:"View"}),V&&C.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-zinc-800 border border-zinc-700 rounded-md shadow-lg p-1 text-white text-xs pointer-events-auto",children:[C.jsxs("div",{className:"px-3 py-1.5 rounded-sm hover:bg-zinc-700 cursor-pointer flex justify-between items-center",onClick:()=>Se(M=>!M),children:["Show Origin ",C.jsx("input",{type:"checkbox",checked:Pe,readOnly:!0,className:"pointer-events-none"})]}),C.jsxs("div",{className:"px-3 py-1.5 rounded-sm hover:bg-zinc-700 cursor-pointer flex justify-between items-center",onClick:()=>se(M=>!M),children:["Ruler ",C.jsx("input",{type:"checkbox",checked:b,readOnly:!0,className:"pointer-events-none"})]}),C.jsx("div",{className:"border-t border-zinc-700 my-1"}),C.jsx("div",{className:"px-2 py-1 text-gray-400",children:"Grid Density"}),["ultra-fine","extra-fine","fine","medium","coarse","extra-coarse"].map(M=>C.jsxs("div",{className:"px-3 py-1.5 rounded-sm hover:bg-zinc-700 cursor-pointer flex justify-between items-center",onClick:()=>K(M),children:[M.charAt(0).toUpperCase()+M.slice(1).replace("-"," "),C.jsx("input",{type:"radio",name:"grid-density",value:M,checked:de===M,readOnly:!0,className:"pointer-events-none"})]},M))]})]})]})]})]})},Im=({active:n,onClick:e,children:o})=>C.jsx("button",{onClick:e,className:`px-4 py-2 text-xs font-medium w-full ${n?"bg-zinc-700 text-white":"bg-zinc-800 text-gray-400 hover:bg-zinc-700"}`,children:o}),R1=({selectedObject:n,onObjectPropertyChange:e,layers:o})=>{const s=(c,f)=>{if(!n)return;const y=n.actualId||"";e(y,c,f)},r=()=>{if(!n)return null;const c=n.type==="Multiple",f=o.find(p=>p.id===n.layerId),y=n.color??(f==null?void 0:f.color)??"#FFFFFF",m=n.color===void 0;return C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-gray-400",children:"Color"}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("span",{onClick:()=>s("color",void 0),className:`cursor-pointer px-2 py-1 rounded ${m&&!c?"bg-sky-600 text-white":"bg-zinc-700 hover:bg-zinc-600"}`,children:"ByLayer"}),C.jsx("input",{type:"color",value:c&&n.color===void 0?"#ffffff":y,onChange:p=>s("color",p.target.value),className:"w-10 h-6 p-0.5 bg-zinc-800 border border-zinc-600 rounded-sm cursor-pointer",title:c&&n.color===void 0?"Multiple Colors":y})]})]}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-gray-400",children:"Linetype"}),C.jsxs("select",{value:n.linetype||"ByLayer",onChange:p=>s("linetype",p.target.value==="ByLayer"?void 0:p.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:[c&&n.linetype===void 0&&C.jsx("option",{value:"ByLayer",disabled:!0,children:"-- Multiple --"}),C.jsx("option",{value:"ByLayer",children:"ByLayer"}),C.jsx("option",{value:"Solid",children:"Solid"}),C.jsx("option",{value:"Dashed",children:"Dashed"}),C.jsx("option",{value:"Dotted",children:"Dotted"}),C.jsx("option",{value:"DashDot",children:"DashDot"})]})]})]})};return C.jsxs("div",{className:"p-2 space-y-3 text-xs",children:[C.jsx("h3",{className:"text-sm font-semibold text-gray-200 border-b border-zinc-700 pb-2",children:"Properties"}),n?n.type==="Multiple"?C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-400",children:"Selection"}),C.jsxs("span",{children:[n.properties.Count," items selected"]})]}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-gray-400",children:"Layer"}),C.jsxs("select",{value:n.layerId===-1?"":n.layerId,onChange:c=>s("layerId",parseInt(c.target.value,10)),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:[n.layerId===-1&&C.jsx("option",{value:"",disabled:!0,children:"-- Multiple --"}),o.map(c=>C.jsx("option",{value:c.id,children:c.name},c.id))]})]}),r()]}):C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-400",children:"Type"}),C.jsx("span",{children:n.type})]}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-gray-400",children:"Layer"}),C.jsx("select",{value:n.layerId,onChange:c=>s("layerId",parseInt(c.target.value,10)),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:o.map(c=>C.jsx("option",{value:c.id,children:c.name},c.id))})]}),r(),C.jsx("div",{className:"pt-2 mt-2 border-t border-zinc-700",children:Object.entries(n.properties).map(([c,f])=>{const y=n.actualId;if(!y)return null;if(c==="Interpolation"&&n.type==="Spline")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsxs("select",{value:f.toString(),onChange:m=>e(y,"interpolation",m.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:[C.jsx("option",{value:"Cardinal",children:"Cardinal"}),C.jsx("option",{value:"Basis",children:"Basis"}),C.jsx("option",{value:"Linear",children:"Linear"})]})]},c);if(n.type==="Text"){if(c==="Content")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsx("input",{autoFocus:!0,type:"text",value:f.toString(),onChange:m=>e(y,"content",m.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2"})]},c);if(c==="Font Size")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsx("input",{type:"number",value:f.toString(),onChange:m=>e(y,"fontSize",parseFloat(m.target.value)||0),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2"})]},c);if(c==="Font Family")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsx("select",{value:f.toString(),onChange:m=>e(y,"fontFamily",m.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:Gc.map(m=>C.jsx("option",{value:m,children:m},m))})]},c);if(c==="Rotation")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsx("input",{type:"number",value:f.toString(),onChange:m=>e(y,"rotation",(parseFloat(m.target.value)||0)*Math.PI/180),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2"})]},c);if(c==="Text Align")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsxs("select",{value:f.toString(),onChange:m=>e(y,"textAlign",m.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:[C.jsx("option",{value:"left",children:"Left"}),C.jsx("option",{value:"center",children:"Center"}),C.jsx("option",{value:"right",children:"Right"})]})]},c);if(c==="Vertical Align")return C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsxs("select",{value:f.toString(),onChange:m=>e(y,"textBaseline",m.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 w-1/2",children:[C.jsx("option",{value:"top",children:"Top"}),C.jsx("option",{value:"middle",children:"Middle"}),C.jsx("option",{value:"bottom",children:"Bottom"})]})]},c)}return C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-400",children:c}),C.jsx("span",{children:f.toString()})]},c)})})]}):C.jsx("div",{className:"text-gray-500 text-center py-4",children:"No object selected."})]})},N1=({layers:n,setLayers:e,activeLayerId:o,setActiveLayerId:s})=>{const r=ee.useRef(Math.max(...n.map(v=>v.id),0)+1),[c,f]=ee.useState(null),y=(v,x)=>{e(S=>S.map(_=>_.id===v?{..._,...x}:_))},m=()=>{const v={id:r.current++,name:`Layer ${r.current-1}`,color:"#FFFFFF",isVisible:!0,isLocked:!1};e(x=>[...x,v])},p=v=>{n.length<=1||(e(x=>x.filter(S=>S.id!==v)),o===v&&s(n.find(x=>x.id!==v).id))};return C.jsxs("div",{className:"p-2 space-y-2 text-xs",children:[C.jsxs("h3",{className:"text-sm font-semibold text-gray-200 border-b border-zinc-700 pb-2 flex justify-between items-center",children:[C.jsx("span",{children:"Layers"}),C.jsxs("div",{children:[C.jsx("button",{onClick:m,className:"p-1 hover:bg-zinc-600 rounded",children:C.jsx(pt,{type:"plus",className:"w-4 h-4"})}),C.jsx("button",{onClick:()=>p(o),className:"p-1 hover:bg-zinc-600 rounded disabled:opacity-50",disabled:n.length<=1,children:C.jsx(pt,{type:"trash",className:"w-4 h-4"})})]})]}),C.jsx("div",{className:"space-y-1",children:n.map(v=>C.jsxs("div",{className:`flex items-center p-1 rounded-sm cursor-pointer ${o===v.id?"bg-sky-800":"hover:bg-zinc-700"}`,onClick:()=>s(v.id),children:[C.jsx("input",{type:"color",value:v.color,onChange:x=>y(v.id,{color:x.target.value}),onClick:x=>x.stopPropagation(),className:"w-5 h-5 bg-transparent border-none cursor-pointer"}),C.jsx("div",{className:"flex-grow px-2",onDoubleClick:()=>f(v.id),children:c===v.id?C.jsx("input",{type:"text",defaultValue:v.name,autoFocus:!0,onBlur:x=>{y(v.id,{name:x.target.value}),f(null)},onKeyDown:x=>{x.key==="Enter"&&x.currentTarget.blur()},className:"bg-zinc-900 w-full"}):C.jsx("span",{children:v.name})}),C.jsx("button",{onClick:x=>{x.stopPropagation(),y(v.id,{isVisible:!v.isVisible})},className:"p-1",children:C.jsx(pt,{type:v.isVisible?"eye":"eye-slash",className:"w-4 h-4"})}),C.jsx("button",{onClick:x=>{x.stopPropagation(),y(v.id,{isLocked:!v.isLocked})},className:"p-1",children:C.jsx(pt,{type:v.isLocked?"lock-closed":"lock-open",className:"w-4 h-4"})})]},v.id))})]})},w1=({layers:n,setLayers:e,selectedObject:o,onObjectPropertyChange:s,activeLayerId:r,setActiveLayerId:c})=>{const[f,y]=ee.useState("Properties");return C.jsxs("aside",{className:"w-64 bg-zinc-800 border-l border-zinc-700 flex flex-col text-gray-300",children:[C.jsxs("div",{className:"flex-shrink-0 flex",children:[C.jsx(Im,{active:f==="Properties",onClick:()=>y("Properties"),children:"Properties"}),C.jsx(Im,{active:f==="Layers",onClick:()=>y("Layers"),children:"Layers"})]}),C.jsxs("div",{className:"flex-grow overflow-y-auto",children:[f==="Properties"&&C.jsx(R1,{selectedObject:o,onObjectPropertyChange:s,layers:n}),f==="Layers"&&C.jsx(N1,{layers:n,setLayers:e,activeLayerId:r,setActiveLayerId:c})]})]})},I1=({history:n,currentCommand:e,setCurrentCommand:o,executeCommand:s,isAiThinking:r,commandOptions:c,executeSubCommand:f,onCancelAi:y})=>{const m=ee.useRef(null);ee.useEffect(()=>{var S;(S=m.current)==null||S.scrollIntoView({behavior:"smooth"})},[n]);const p=S=>{S.key==="Enter"&&s(e)},v=n.length>0?n[n.length-1]:"",x=c.length>0&&!v.startsWith(">");return C.jsxs("div",{className:"flex-shrink-0 h-32 bg-zinc-900 border-t border-zinc-700 flex flex-col p-1 font-mono text-xs",children:[C.jsxs("div",{className:"flex-grow overflow-y-auto pr-2",children:[n.slice(0,-1).map((S,_)=>C.jsx("div",{className:S.startsWith(">")?"text-cyan-400":"text-gray-400",children:S},_)),n.length>0&&C.jsxs("div",{className:v.startsWith(">")?"text-cyan-400":"text-gray-400",children:[v,x&&c.map(S=>C.jsxs("button",{onClick:()=>f(S),className:"ml-2 text-sky-400 hover:text-sky-300 hover:underline",children:["[",S,"]"]},S))]}),C.jsx("div",{ref:m})]}),C.jsxs("div",{className:"flex items-center pt-1",children:[C.jsx("label",{htmlFor:"command-input",className:"text-gray-400 mr-2",children:"Command:"}),C.jsxs("div",{className:"flex-grow relative flex items-center",children:[C.jsx("input",{id:"command-input",type:"text",value:r?"AI is processing...":e,onChange:S=>o(S.target.value),onKeyDown:p,className:"w-full bg-zinc-800 border border-zinc-700 rounded-sm px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-sky-500 focus:border-sky-500 disabled:bg-zinc-700 disabled:text-gray-500 disabled:cursor-not-allowed",autoComplete:"off",disabled:r}),r&&C.jsx("button",{onClick:y,className:"absolute right-1.5 top-1/2 -translate-y-1/2 bg-red-600 hover:bg-red-700 text-white px-3 py-0.5 rounded-sm text-xs font-semibold","aria-label":"Stop AI generation",children:"STOP"})]})]})]})},D1={Solid:[],Dashed:[8,4],Dotted:[2,3],DashDot:[8,4,2,4]},b1=(n,e)=>{const o=e.find(y=>y.id===n.layerId);if(!o||!o.isVisible)return"";const s=n.color||o.color,r=n.linetype,c=r&&r!=="Solid"?`stroke-dasharray="${D1[r].join(" ")}"`:"",f=`stroke="${s}" stroke-width="1.5" fill="none" ${c}`;switch(n.type){case"line":return`<line x1="${n.points[0].x}" y1="${n.points[0].y}" x2="${n.points[1].x}" y2="${n.points[1].y}" ${f} />`;case"rectangle":return`<rect x="${n.x}" y="${n.y}" width="${n.width}" height="${n.height}" ${f} />`;case"circle":return`<circle cx="${n.center.x}" cy="${n.center.y}" r="${n.radius}" ${f} />`;case"polyline":return`<polyline points="${n.points.map(m=>`${m.x},${m.y}`).join(" ")}" ${f} />`;case"spline":return`<polyline points="${n.points.map(p=>`${p.x},${p.y}`).join(" ")}" ${f} />`;case"arc":{const m={x:n.center.x+n.radius*Math.cos(n.startAngle),y:n.center.y+n.radius*Math.sin(n.startAngle)},p={x:n.center.x+n.radius*Math.cos(n.endAngle),y:n.center.y+n.radius*Math.sin(n.endAngle)};let v=n.endAngle-n.startAngle;n.counterClockwise?v>0&&(v-=2*Math.PI):v<0&&(v+=2*Math.PI);const x=Math.abs(v)>Math.PI?1:0,S=n.counterClockwise?0:1;return`<path d="${`M ${m.x} ${m.y} A ${n.radius} ${n.radius} 0 ${x} ${S} ${p.x} ${p.y}`}" ${f} />`}case"ellipse":{const m=n.rotation*180/Math.PI;return`<ellipse cx="${n.center.x}" cy="${n.center.y}" rx="${n.radiusX}" ry="${n.radiusY}" transform="rotate(${m} ${n.center.x} ${n.center.y})" ${f} />`}case"text":{const m=n.rotation*180/Math.PI,p=n.textBaseline==="middle"?"central":n.textBaseline,v=n.textAlign==="center"?"middle":n.textAlign;return`<text x="${n.position.x}" y="${n.position.y}" font-family="${n.fontFamily}" font-size="${n.fontSize}" fill="${s}" dominant-baseline="${p}" text-anchor="${v}" transform="rotate(${m} ${n.position.x} ${n.position.y})">${n.content}</text>`}case"point":return`<circle cx="${n.position.x}" cy="${n.position.y}" r="2" fill="${s}" stroke="none" />`;default:return""}},Dm=200,Ac=n=>{let e=[];if(n.type==="point")e.push(n.position);else if(n.type==="line"||n.type==="polyline"||n.type==="spline")e.push(...n.points);else if(n.type==="rectangle")e.push({x:n.x,y:n.y},{x:n.x+n.width,y:n.y+n.height});else if(n.type==="circle")e.push({x:n.center.x-n.radius,y:n.center.y-n.radius},{x:n.center.x+n.radius,y:n.center.y+n.radius});else if(n.type==="arc"){const f={x:n.center.x+n.radius*Math.cos(n.startAngle),y:n.center.y+n.radius*Math.sin(n.startAngle)},y={x:n.center.x+n.radius*Math.cos(n.endAngle),y:n.center.y+n.radius*Math.sin(n.endAngle)};e.push(f,y)}else if(n.type==="text"){const{position:f,content:y,fontSize:m,textAlign:p,textBaseline:v,rotation:x}=n,S=y.length*(m*.6),_=m;let U=0,P=0;p==="center"?U-=S/2:p==="right"&&(U-=S),v==="middle"?P-=_/2:v==="bottom"&&(P-=_);const w=[{x:U,y:P},{x:U+S,y:P},{x:U+S,y:P+_},{x:U,y:P+_}],I=Math.cos(x),pe=Math.sin(x),le=w.map(he=>({x:f.x+he.x*I-he.y*pe,y:f.y+he.x*pe+he.y*I}));e.push(...le)}else if(n.type==="ellipse"){const{center:f,radiusX:y,radiusY:m,rotation:p}=n,v=Math.cos(p),x=Math.sin(p),S=Math.sqrt(Math.pow(y*v,2)+Math.pow(m*x,2)),_=Math.sqrt(Math.pow(y*x,2)+Math.pow(m*v,2));e.push({x:f.x-S,y:f.y-_},{x:f.x+S,y:f.y+_})}if(e.length===0)return{minX:0,minY:0,maxX:0,maxY:0};const o=Math.min(...e.map(f=>f.x)),s=Math.min(...e.map(f=>f.y)),r=Math.max(...e.map(f=>f.x)),c=Math.max(...e.map(f=>f.y));return{minX:o,minY:s,maxX:r,maxY:c}},U1=()=>{const[n,e]=ee.useState(pi[0]),[o,s]=ee.useState(Em),[r,c]=ee.useState(1),[f,y]=ee.useState(null),[m,p]=ee.useState(["Welcome to React CAD Professional.","Type a command, or tell the AI what to draw."]),[v,x]=ee.useState(""),[S,_]=ee.useState([[]]),[U,P]=ee.useState(0),w=ee.useMemo(()=>S[U]||[],[S,U]),[I,pe]=ee.useState([]),[le,he]=ee.useState(!1),[Ce,_e]=ee.useState(null),[ve,Je]=ee.useState("Welcome to React CAD Professional."),[Ae,Ve]=ee.useState(null),[Ze,it]=ee.useState([]),[nt,ht]=ee.useState(null),[yt,j]=ee.useState(10),[xe,ze]=ee.useState([10,10]),[We,at]=ee.useState(null),[L,T]=ee.useState(null),[J,Re]=ee.useState(null),Fe=ee.useRef(!1),Xe=ee.useMemo(()=>{try{return new ZA({apiKey:"PLACEHOLDER_API_KEY"})}catch(V){return console.error("Failed to initialize GoogleGenAI",V),null}},[]);ee.useEffect(()=>{},[]);const He=ee.useCallback(V=>{const W=S[U],de=typeof V=="function"?V(W):V;if(JSON.stringify(de)===JSON.stringify(W))return;const K=S.slice(0,U+1);K.push(de),_(K),P(K.length-1)},[S,U]),Ye=U>0,Ct=U<S.length-1,Nt=ee.useCallback(()=>{Ye&&(pe([]),P(V=>V-1))},[Ye]),oi=ee.useCallback(()=>{Ct&&(pe([]),P(V=>V-1))},[Ct]),Ut=ee.useCallback(V=>{V.length!==0&&He(W=>[...W,...V])},[He]),hi=ee.useCallback(()=>{Fe.current=!0},[]),en=ee.useCallback(V=>{const W=[],de=[];let K=[...o];if(!V.drawings||!Array.isArray(V.drawings))return console.error("Invalid drawing data format"),{newObjects:W,newLayers:de};for(const b of V.drawings){let se=r;if(b.layerName){let Ne=K.find(Ge=>Ge.name.toLowerCase()===b.layerName.toLowerCase());if(Ne)se=Ne.id;else{const Ge=Date.now()+de.length,je={id:Ge,name:b.layerName,color:`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,isVisible:!0,isLocked:!1};de.push(je),K.push(je),se=Ge}}const Se={id:`${b.shape}-${Date.now()}-${Math.random()}`,layerId:se,color:b.color,linetype:b.linetype};switch(b.shape){case"rectangle":typeof b.x=="number"&&typeof b.y=="number"&&typeof b.width=="number"&&b.width>0&&typeof b.height=="number"&&b.height>0&&W.push({...Se,type:"rectangle",x:b.x,y:b.y,width:b.width,height:b.height});break;case"circle":b.center&&typeof b.center.x=="number"&&typeof b.center.y=="number"&&typeof b.radius=="number"&&b.radius>0&&W.push({...Se,type:"circle",center:b.center,radius:b.radius});break;case"line":Array.isArray(b.points)&&b.points.length===2&&W.push({...Se,type:"line",points:[b.points[0],b.points[1]]});break;case"polyline":Array.isArray(b.points)&&b.points.length>=2&&W.push({...Se,type:"polyline",points:b.points});break;case"spline":Array.isArray(b.points)&&b.points.length>=2&&W.push({...Se,type:"spline",points:b.points,interpolation:b.interpolation||"Cardinal"});break;case"point":b.position&&typeof b.position.x=="number"&&typeof b.position.y=="number"&&W.push({...Se,type:"point",position:b.position});break;case"arc":b.center&&typeof b.radius=="number"&&b.radius>0&&typeof b.startAngle=="number"&&typeof b.endAngle=="number"&&W.push({...Se,type:"arc",center:b.center,radius:b.radius,startAngle:b.startAngle,endAngle:b.endAngle,counterClockwise:b.counterClockwise||!1});break;case"text":b.position&&b.content&&W.push({...Se,type:"text",position:b.position,content:b.content,fontSize:b.fontSize||16,fontFamily:b.fontFamily||"sans-serif",textAlign:b.textAlign||"left",textBaseline:b.textBaseline||"top",rotation:b.rotation||0});break;case"ellipse":b.center&&b.radiusX>0&&b.radiusY>0&&W.push({...Se,type:"ellipse",center:b.center,radiusX:b.radiusX,radiusY:b.radiusY,rotation:b.rotation||0});break;case"dimension-linear":b.p1&&b.p2&&b.textPosition&&W.push({...Se,type:"dimension-linear",p1:b.p1,p2:b.p2,textPosition:b.textPosition});break;case"dimension-aligned":b.p1&&b.p2&&b.textPosition&&W.push({...Se,type:"dimension-aligned",p1:b.p1,p2:b.p2,textPosition:b.textPosition});break;case"dimension-radial":b.center&&b.radiusPoint&&W.push({...Se,type:"dimension-radial",center:b.center,radiusPoint:b.radiusPoint});break;case"dimension-diameter":b.p1&&b.p2&&W.push({...Se,type:"dimension-diameter",p1:b.p1,p2:b.p2});break;case"dimension-angular":b.center&&b.p1&&b.p2&&typeof b.radius=="number"&&b.radius>0&&W.push({...Se,type:"dimension-angular",center:b.center,p1:b.p1,p2:b.p2,radius:b.radius});break;case"dimension-coordinate":b.point&&b.leaderEndPoint&&b.axis&&W.push({...Se,type:"dimension-coordinate",point:b.point,leaderEndPoint:b.leaderEndPoint,axis:b.axis});break}}return{newObjects:W,newLayers:de}},[o,r]),Jn=ee.useCallback(async V=>{if(!V.trim())return;if(!Xe){p(se=>[...se,"Error: Gemini API is not initialized. Please configure your API key."]);return}Fe.current=!1,he(!0),p(se=>[...se,"AI is thinking..."]),x("");const W=o.map(se=>({name:se.name,color:se.color})),de={type:dt.OBJECT,properties:{x:{type:dt.NUMBER},y:{type:dt.NUMBER}},required:["x","y"]},K={type:dt.OBJECT,properties:{drawings:{type:dt.ARRAY,description:"An array of shapes or dimensions to draw on the canvas.",items:{type:dt.OBJECT,properties:{shape:{type:dt.STRING,enum:["rectangle","circle","line","polyline","arc","spline","point","text","ellipse","dimension-linear","dimension-aligned","dimension-radial","dimension-diameter","dimension-angular","dimension-coordinate"]},layerName:{type:dt.STRING,description:"Name of the layer for the object. If it doesn't exist, it will be created."},color:{type:dt.STRING,description:"Hex color code (e.g., '#FF0000'). Overrides layer color."},linetype:{type:dt.STRING,enum:["Solid","Dashed","Dotted","DashDot"],description:"Linetype for the object."},x:{type:dt.NUMBER,description:"Top-left x-coordinate for a rectangle."},y:{type:dt.NUMBER,description:"Top-left y-coordinate for a rectangle."},width:{type:dt.NUMBER,description:"Width for a rectangle."},height:{type:dt.NUMBER,description:"Height for a rectangle."},center:{...de,description:"Center point for a circle, arc, or ellipse."},radius:{type:dt.NUMBER,description:"Radius for a circle or arc."},startAngle:{type:dt.NUMBER,description:"Start angle in radians for an arc."},endAngle:{type:dt.NUMBER,description:"End angle in radians for an arc."},counterClockwise:{type:dt.BOOLEAN,description:"Direction for an arc."},points:{type:dt.ARRAY,items:de,description:"Array of points for lines, polylines, or splines."},position:{...de,description:"Position for a single point or text."},content:{type:dt.STRING,description:"Text content."},fontSize:{type:dt.NUMBER},fontFamily:{type:dt.STRING,enum:Gc,description:"The font to use for the text."},radiusX:{type:dt.NUMBER,description:"Horizontal radius for an ellipse."},radiusY:{type:dt.NUMBER,description:"Vertical radius for an ellipse."},rotation:{type:dt.NUMBER,description:"Rotation in radians for text or ellipse."},interpolation:{type:dt.STRING,enum:["Cardinal","Basis","Linear"],description:"Interpolation for splines. Defaults to Cardinal."},p1:{...de,description:"First point for a dimension."},p2:{...de,description:"Second point for a dimension."},textPosition:{...de,description:"Position for the dimension text."},radiusPoint:{...de,description:"A point on the circumference for a radial dimension."},axis:{type:dt.STRING,enum:["X","Y"],description:"Axis for a coordinate dimension."},leaderEndPoint:{...de,description:"End point of the leader line for a coordinate dimension."}},required:["shape"]}}},required:["drawings"]},b=`You are an expert CAD AI assistant. Your task is to convert the user's natural language requests into a structured JSON format to draw shapes and dimensions on a 2D canvas. The canvas origin (0,0) is at the top-left. All units are in pixels.

Current layers available: ${JSON.stringify(W)}.

Based on the 'shape' property, you MUST include the required properties:
- Basic Shapes:
  - 'rectangle': requires 'x', 'y', 'width', 'height'.
  - 'circle': requires 'center' and 'radius'.
  - 'line': requires 'points' (an array of 2 points).
  - 'polyline': requires 'points' (an array of 2 or more points).
  - 'spline': requires 'points' (an array of 2 or more points).
  - 'arc': requires 'center', 'radius', 'startAngle', 'endAngle'.
  - 'point': requires 'position'.
  - 'text': requires 'position', 'content'. Optional: 'fontSize', 'rotation', 'fontFamily'. Available fonts are: ${Gc.join(", ")}. The default is 'sans-serif'.
  - 'ellipse': requires 'center', 'radiusX', 'radiusY'. Optional: 'rotation'.
- Dimensions:
  - 'dimension-linear': requires 'p1', 'p2', 'textPosition'. For horizontal or vertical dimensions.
  - 'dimension-aligned': requires 'p1', 'p2', 'textPosition'. For dimensions aligned with the two points.
  - 'dimension-radial': requires 'center' (of the circle/arc) and 'radiusPoint' (where the leader line points).
  - 'dimension-diameter': requires 'p1' and 'p2' (two opposite points on the circle's circumference).
  - 'dimension-angular': requires 'center' (the vertex of the angle), 'p1' (a point on the first leg), 'p2' (a point on the second leg), and 'radius' (for the dimension arc).
  - 'dimension-coordinate': requires 'point' (the feature to measure), 'leaderEndPoint' (where the text goes), and 'axis' ('X' or 'Y').

Optional properties for all shapes:
- 'layerName' (string): The name of the layer. Use a name from the list of available layers. If the layer name doesn't exist, it will be created. If omitted, the current active layer is used.
- 'color' (string): A hex color string (e.g., "#FF0000"). This will override the layer's color.
- 'linetype' (string): Can be 'Solid', 'Dashed', 'Dotted', or 'DashDot'.

General rules:
- If the user does not specify a location, place drawings around the center of the viewport (approx. x=400, y=300).
- If a user asks to put something on a layer that doesn't exist, just include the new layer name in the 'layerName' property.
- Generate a reasonable number of shapes, ideally under 100.
- Respond ONLY with the JSON object that adheres to the provided schema. Do not include markdown backticks or any other text.`;try{const se=await Xe.models.generateContent({model:"gemini-2.5-flash",contents:V,config:{systemInstruction:b,responseMimeType:"application/json",responseSchema:K}});if(Fe.current){p(Ne=>[...Ne.slice(0,-1),"AI generation stopped by user."]);return}let Pe=se.text.trim();Pe.startsWith("```json")?Pe=Pe.substring(7,Pe.length-3).trim():Pe.startsWith("```")&&(Pe=Pe.substring(3,Pe.length-3).trim());const Se=JSON.parse(Pe);if(Se.drawings&&Array.isArray(Se.drawings)){if(Se.drawings.length>Dm){p(je=>[...je.slice(0,-1),`Error: AI response generated too many objects (${Se.drawings.length}). Please try a simpler request.`]);return}const{newObjects:Ne,newLayers:Ge}=en(Se);if(Ge.length>0&&s(je=>[...je,...Ge]),Ne.length>0){Ut(Ne);let je=`AI drew ${Ne.length} object(s).`;Ge.length>0&&(je+=` ${Ge.length} new layer(s) were created.`),p(dn=>[...dn.slice(0,-1),je])}else p(je=>[...je.slice(0,-1),"AI could not interpret the drawing command."])}else p(Ne=>[...Ne.slice(0,-1),"AI response was not in the expected format."])}catch(se){if(Fe.current){p(Se=>[...Se.slice(0,-1),"AI generation stopped by user."]);return}console.error("AI command failed:",se);let Pe=se instanceof Error?se.message:"An unknown error occurred.";Pe.includes("API key not valid")&&(Pe="The provided API Key is not valid."),p(Se=>[...Se.slice(0,-1),`Error: ${Pe}`])}finally{he(!1)}},[Xe,Ut,o,en]),Gi=ee.useCallback(V=>{p(W=>[...W,`Executing example: "${V}"`]),Jn(V)},[Jn]),kl=ee.useCallback((V,W)=>{p(de=>[...de,`Loading instant example: "${W}"`]);try{if(V.drawings.length>Dm){p(b=>[...b,`Error: Example contains too many objects (${V.drawings.length}).`]);return}const{newObjects:de,newLayers:K}=en(V);if(K.length>0&&s(b=>[...b,...K]),de.length>0){Ut(de);let b=`Loaded ${de.length} object(s) from example.`;K.length>0&&(b+=` ${K.length} new layer(s) were created.`),p(se=>[...se,b])}else p(b=>[...b,"Example contained no valid objects."])}catch(de){console.error("Failed to process JSON example:",de),p(K=>[...K,"Error: Failed to load example."])}},[en,Ut]),vo=ee.useCallback(V=>{Je(V),p(W=>W[W.length-1]!==V?[...W,V]:W)},[]),xo=ee.useCallback(V=>{if(!V.trim())return;p(b=>[...b,`> ${V}`]),x(""),it([]);const W=V.toLowerCase().split(" "),de=parseFloat(W[0]);if((n==null?void 0:n.id)==="offset"&&!isNaN(de)&&isFinite(de)){Ve(de),p(b=>[...b,`Offset distance set to: ${de}`]);return}if((n==null?void 0:n.id)==="fillet"){const b=W[0]==="radius"&&W.length>1?parseFloat(W[1]):isNaN(de)?-1:de;if(b>=0){j(b),p(se=>[...se,`Fillet radius set to: ${b}`]);return}}if((n==null?void 0:n.id)==="chamfer"){let b,se;if(W[0]==="distance"&&W.length>=2?(b=parseFloat(W[1]),se=W.length>2?parseFloat(W[2]):b):W.length===1&&!isNaN(parseFloat(W[0]))?b=se=parseFloat(W[0]):W.length===2&&!isNaN(parseFloat(W[0]))&&!isNaN(parseFloat(W[1]))&&(b=parseFloat(W[0]),se=parseFloat(W[1])),b!==void 0&&se!==void 0&&b>=0&&se>=0){ze([b,se]),p(Pe=>[...Pe,`Chamfer distances set to: ${b}, ${se}`]);return}}const K=pi.find(b=>b.command.toLowerCase()===V.toLowerCase());K?e(K):at(V)},[n]),yi=ee.useCallback(V=>{Jn(V)},[Jn]),qi=ee.useCallback(V=>{p(W=>{const de=W[W.length-1];return[...W.slice(0,-1),`${de} ${V}`]}),ht(V),it([])},[]),So=ee.useCallback(V=>{e(V),p(W=>[...W,`> ${V.command}`]),it([])},[]);ee.useEffect(()=>{x(n?n.command:"")},[n]);const zl=ee.useCallback(V=>{He(V)},[He]),tn=ee.useCallback((V,W,de)=>{He(K=>K.map(b=>{if(I.includes(b.id)){const se={...b};if(W.includes(".")){const[Pe,Se]=W.split("."),Ne=Pe;if(typeof se[Ne]=="object"&&se[Ne]!==null){const Ge={...se[Ne],[Se]:de};return{...se,[Ne]:Ge}}}else{const Pe=W;de===void 0?delete se[Pe]:se[Pe]=de}return se}return b}))},[I,He]),mi=ee.useCallback(()=>{I.length>0&&(He(V=>V.filter(W=>!I.includes(W.id))),pe([]))},[I,He]),Mn=ee.useCallback(()=>{if(I.length>0){const V=w.filter(W=>I.includes(W.id));_e(V)}},[I,w]),Eo=ee.useCallback(()=>{if(I.length>0){const V=w.filter(W=>I.includes(W.id));_e(V),He(W=>W.filter(de=>!I.includes(de.id))),pe([])}},[I,w,He]),Xn=ee.useCallback(V=>{if(!Ce)return;let W=1/0,de=1/0;Ce.forEach(Pe=>{const Se=Ac(Pe);W=Math.min(W,Se.minX),de=Math.min(de,Se.minY)});const K=isFinite(W)?V.x-W:0,b=isFinite(de)?V.y-de:0,se=Ce.map(Pe=>{const Se=JSON.parse(JSON.stringify(Pe));return Se.id=`${Pe.type}-${Date.now()}-${Math.random()}`,Se.type==="line"||Se.type==="polyline"||Se.type==="spline"?Se.points=Se.points.map(Ne=>({x:Ne.x+K,y:Ne.y+b})):Se.type==="point"||Se.type==="text"?Se.position={x:Se.position.x+K,y:Se.position.y+b}:Se.type==="rectangle"?(Se.x+=K,Se.y+=b):(Se.type==="circle"||Se.type==="arc"||Se.type==="ellipse")&&(Se.center.x+=K,Se.center.y+=b),Se});Ut(se),pe(se.map(Pe=>Pe.id))},[Ce,Ut]),To=ee.useCallback(()=>{if(I.length>0){const V=w.filter(K=>I.includes(K.id)),W=10,de=V.map(K=>{const b=JSON.parse(JSON.stringify(K));return b.id=`${K.type}-${Date.now()}-${Math.random()}`,b.type==="line"||b.type==="polyline"||b.type==="spline"?b.points=b.points.map(se=>({x:se.x+W,y:se.y+W})):b.type==="point"||b.type==="text"?b.position={x:b.position.x+W,y:b.position.y+W}:b.type==="rectangle"?(b.x+=W,b.y+=W):(b.type==="circle"||b.type==="arc"||b.type==="ellipse")&&(b.center.x+=W,b.center.y+=W),b});Ut(de),pe(de.map(K=>K.id))}},[I,w,Ut]),Xo=ee.useCallback(()=>{if(I.length<2)return;const V=`group-${Date.now()}-${Math.random()}`;He(W=>W.map(de=>I.includes(de.id)?{...de,groupId:V}:de))},[I,He]),Ko=ee.useCallback(()=>{if(I.length===0)return;const V=w.filter(de=>I.includes(de.id)),W=new Set(V.map(de=>de.groupId).filter(de=>!!de));W.size!==0&&He(de=>de.map(K=>{if(K.groupId&&W.has(K.groupId)){const{groupId:b,...se}=K;return se}return K}))},[I,w,He]),Kn=ee.useCallback(()=>{if(I.length===0)return;const V=[],W=new Set;w.filter(K=>I.includes(K.id)).forEach(K=>{if(K.type==="polyline"){W.add(K.id);for(let b=0;b<K.points.length-1;b++)V.push({id:`line-${Date.now()}-${Math.random()}`,type:"line",points:[K.points[b],K.points[b+1]],layerId:K.layerId,color:K.color,linetype:K.linetype})}else if(K.type==="rectangle"){W.add(K.id);const{x:b,y:se,width:Pe,height:Se}=K,Ne={x:b,y:se},Ge={x:b+Pe,y:se},je={x:b+Pe,y:se+Se},dn={x:b,y:se+Se};[[Ne,Ge],[Ge,je],[je,dn],[dn,Ne]].forEach(gi=>{V.push({id:`line-${Date.now()}-${Math.random()}`,type:"line",points:gi,layerId:K.layerId,color:K.color,linetype:K.linetype})})}}),W.size>0&&(He(K=>[...K.filter(b=>!W.has(b.id)),...V]),pe(V.map(K=>K.id)))},[I,w,He]),li=ee.useCallback(()=>{if(w.length===0){T({minX:-100,minY:-100,maxX:900,maxY:700});return}let V=1/0,W=1/0,de=-1/0,K=-1/0;w.forEach(b=>{const se=Ac(b);V=Math.min(V,se.minX),W=Math.min(W,se.minY),de=Math.max(de,se.maxX),K=Math.max(K,se.maxY)}),isFinite(V)&&(de-V<1e-6&&K-W<1e-6&&(de+=10,K+=10,V-=10,W-=10),T({minX:V,minY:W,maxX:de,maxY:K}))},[w]),Yt=ee.useCallback(()=>{_([[]]),P(0),s(Em),c(1),pe([]),Re(null),p(["New file created."])},[]),Ln=ee.useCallback(()=>{const V=document.createElement("input");V.type="file",V.accept=".rcad,application/json",V.onchange=W=>{var b;const de=(b=W.target.files)==null?void 0:b[0];if(!de)return;const K=new FileReader;K.onload=se=>{var Pe;try{const Se=(Pe=se.target)==null?void 0:Pe.result;if(typeof Se!="string")throw new Error("Invalid file content");const Ne=JSON.parse(Se);if(!Ne||!Array.isArray(Ne.objects)||!Array.isArray(Ne.layers))throw new Error("Invalid file format.");s(Ne.layers),_([Ne.objects]),P(0),pe([]),Re(de.name),p(["File opened successfully.",`Loaded ${Ne.objects.length} objects and ${Ne.layers.length} layers.`])}catch(Se){const Ne=Se instanceof Error?Se.message:"An unknown error occurred.";p(Ge=>[...Ge,`Error opening file: ${Ne}`])}},K.readAsText(de)},V.click()},[]),zt=ee.useCallback(async()=>{if(w.length===0){p(de=>[...de,"Nothing to save."]);return}const V=JSON.stringify({version:"1.0",layers:o,objects:w},null,2),W=new Blob([V],{type:"application/json"});try{const de=await window.showSaveFilePicker({suggestedName:J||"drawing.rcad",types:[{description:"React CAD Files",accept:{"application/json":[".rcad"]}}]}),K=await de.createWritable();await K.write(W),await K.close(),Re(de.name),p(b=>[...b,`File saved as ${de.name}`])}catch(de){if(de.name!=="AbortError"){console.error("File save failed, using fallback:",de);const K=URL.createObjectURL(W),b=document.createElement("a");b.href=K,b.download=J||"drawing.rcad",document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(K),p(se=>[...se,"File downloaded as drawing.rcad"])}}},[w,o,J]),nn=ee.useCallback(async()=>{if(w.length===0){p(Ne=>[...Ne,"Nothing to export."]);return}const V={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};w.forEach(Ne=>{const Ge=Ac(Ne);V.minX=Math.min(V.minX,Ge.minX),V.minY=Math.min(V.minY,Ge.minY),V.maxX=Math.max(V.maxX,Ge.maxX),V.maxY=Math.max(V.maxY,Ge.maxY)});const W=20,de=V.maxX-V.minX+W*2,K=V.maxY-V.minY+W*2,b=`${V.minX-W} ${V.minY-W} ${de} ${K}`,se=w.map(Ne=>b1(Ne,o)).join(`
    `),Pe=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${b}" width="${Math.round(de)}" height="${Math.round(K)}">
  <g>
    ${se}
  </g>
</svg>`,Se=new Blob([Pe],{type:"image/svg+xml"});try{const Ne=await window.showSaveFilePicker({suggestedName:"drawing.svg",types:[{description:"SVG Files",accept:{"image/svg+xml":[".svg"]}}]}),Ge=await Ne.createWritable();await Ge.write(Se),await Ge.close(),p(je=>[...je,`File exported as ${Ne.name}`])}catch(Ne){if(Ne.name!=="AbortError"){console.error("File export failed, using fallback:",Ne);const Ge=URL.createObjectURL(Se),je=document.createElement("a");je.href=Ge,je.download="drawing.svg",document.body.appendChild(je),je.click(),document.body.removeChild(je),URL.revokeObjectURL(Ge),p(dn=>[...dn,"File downloaded as drawing.svg"])}}},[w,o]),ye=ee.useCallback(()=>{const V=document.createElement("input");V.type="file",V.accept=".svg,image/svg+xml",V.onchange=W=>{var b;const de=(b=W.target.files)==null?void 0:b[0];if(!de)return;const K=new FileReader;K.onload=se=>{var Pe;try{const Se=(Pe=se.target)==null?void 0:Pe.result;if(typeof Se!="string")throw new Error("Invalid file content");const Ge=new DOMParser().parseFromString(Se,"image/svg+xml"),je=[];Ge.querySelectorAll("line, rect, circle, ellipse, polyline, polygon, text").forEach(Oe=>{const Ht={id:`${Oe.tagName}-${Date.now()}-${Math.random()}`,layerId:r};if(Oe.tagName.toLowerCase()==="line"){const Gt=parseFloat(Oe.getAttribute("x1")||"0"),ot=parseFloat(Oe.getAttribute("y1")||"0"),ct=parseFloat(Oe.getAttribute("x2")||"0"),wt=parseFloat(Oe.getAttribute("y2")||"0");je.push({...Ht,type:"line",points:[{x:Gt,y:ot},{x:ct,y:wt}]})}else if(Oe.tagName.toLowerCase()==="rect"){const Gt=parseFloat(Oe.getAttribute("x")||"0"),ot=parseFloat(Oe.getAttribute("y")||"0"),ct=parseFloat(Oe.getAttribute("width")||"0"),wt=parseFloat(Oe.getAttribute("height")||"0");ct>0&&wt>0&&je.push({...Ht,type:"rectangle",x:Gt,y:ot,width:ct,height:wt})}else if(Oe.tagName.toLowerCase()==="circle"){const Gt=parseFloat(Oe.getAttribute("cx")||"0"),ot=parseFloat(Oe.getAttribute("cy")||"0"),ct=parseFloat(Oe.getAttribute("r")||"0");ct>0&&je.push({...Ht,type:"circle",center:{x:Gt,y:ot},radius:ct})}else if(Oe.tagName.toLowerCase()==="ellipse"){const Gt=parseFloat(Oe.getAttribute("cx")||"0"),ot=parseFloat(Oe.getAttribute("cy")||"0"),ct=parseFloat(Oe.getAttribute("rx")||"0"),wt=parseFloat(Oe.getAttribute("ry")||"0");ct>0&&wt>0&&je.push({...Ht,type:"ellipse",center:{x:Gt,y:ot},radiusX:ct,radiusY:wt,rotation:0})}else if(Oe.tagName.toLowerCase()==="polyline"||Oe.tagName.toLowerCase()==="polygon"){const ot=(Oe.getAttribute("points")||"").split(/[\s,]+/).reduce((ct,wt,Lt)=>(Lt%2===0&&wt?ct.push({x:parseFloat(wt),y:0}):ct.length>0&&wt&&(ct[ct.length-1].y=parseFloat(wt)),ct),[]).filter(ct=>!isNaN(ct.x)&&!isNaN(ct.y));ot.length>=2&&je.push({...Ht,type:"polyline",points:ot})}else if(Oe.tagName.toLowerCase()==="text"){const Gt=parseFloat(Oe.getAttribute("x")||"0"),ot=parseFloat(Oe.getAttribute("y")||"0"),ct=Oe.textContent||"",wt=parseFloat(Oe.getAttribute("font-size")||"16");je.push({...Ht,type:"text",position:{x:Gt,y:ot},content:ct,fontSize:wt,fontFamily:Oe.getAttribute("font-family")||"sans-serif",textAlign:Oe.getAttribute("text-anchor")==="middle"?"center":Oe.getAttribute("text-anchor")==="end"?"right":"left",textBaseline:Oe.getAttribute("dominant-baseline")==="central"?"middle":Oe.getAttribute("dominant-baseline")||"top",rotation:0})}}),je.length>0?(He(je),p(Oe=>[...Oe,`Imported ${je.length} objects from SVG.`])):p(Oe=>[...Oe,"No compatible objects found in SVG file."])}catch(Se){const Ne=Se instanceof Error?Se.message:"An unknown error occurred.";p(Ge=>[...Ge,`Error importing file: ${Ne}`])}},K.readAsText(de)},V.click()},[r,He]);ee.useEffect(()=>{const V=W=>{if((W.ctrlKey||W.metaKey)&&!W.shiftKey&&W.key.toLowerCase()==="z"){W.preventDefault(),Nt();return}if((W.ctrlKey||W.metaKey)&&(W.key.toLowerCase()==="y"||W.shiftKey&&W.key.toLowerCase()==="z")){W.preventDefault(),oi();return}W.target.tagName.toLowerCase()!=="input"&&(W.key==="Delete"||W.key==="Backspace")&&mi()};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[mi,Nt,oi]),ee.useEffect(()=>{if(I.length===1){const V=w.find(W=>W.id===I[0]);if(V){const W=o.find(K=>K.id===V.layerId),de={id:Math.random(),layer:W?W.name:"Unknown",layerId:V.layerId,actualId:V.id,color:V.color,linetype:V.linetype,groupId:V.groupId};if(V.type==="line"){const K=V,b=Math.hypot(K.points[1].x-K.points[0].x,K.points[1].y-K.points[0].y);y({...de,type:"Line",properties:{ID:V.id.substring(0,8),Length:parseFloat(b.toFixed(2))}})}else if(V.type==="point"){const K=V;y({...de,type:"Point",properties:{ID:V.id.substring(0,8),X:parseFloat(K.position.x.toFixed(2)),Y:parseFloat(K.position.y.toFixed(2))}})}else if(V.type==="text"){const K=V;y({...de,type:"Text",properties:{ID:V.id.substring(0,8),Content:K.content,"Font Size":K.fontSize,"Font Family":K.fontFamily,Rotation:parseFloat((K.rotation*180/Math.PI).toFixed(1)),"Text Align":K.textAlign,"Vertical Align":K.textBaseline}})}else if(V.type==="polyline"){const K=V;let b=0;for(let se=0;se<K.points.length-1;se++){const Pe=K.points[se],Se=K.points[se+1];b+=Math.hypot(Se.x-Pe.x,Se.y-Pe.y)}y({...de,type:"Polyline",properties:{ID:V.id.substring(0,8),Length:parseFloat(b.toFixed(2)),Vertices:K.points.length}})}else if(V.type==="spline"){const K=V;let b=0;for(let se=0;se<K.points.length-1;se++){const Pe=K.points[se],Se=K.points[se+1];b+=Math.hypot(Se.x-Pe.x,Se.y-Pe.y)}y({...de,type:"Spline",properties:{ID:V.id.substring(0,8),Interpolation:K.interpolation,"Approx. Length":parseFloat(b.toFixed(2)),"Control Points":K.points.length}})}else if(V.type==="rectangle"){const K=V;y({...de,type:"Rectangle",properties:{ID:V.id.substring(0,8),X:parseFloat(K.x.toFixed(2)),Y:parseFloat(K.y.toFixed(2)),Width:parseFloat(K.width.toFixed(2)),Height:parseFloat(K.height.toFixed(2))}})}else if(V.type==="circle"){const K=V;y({...de,type:"Circle",properties:{ID:V.id.substring(0,8),"Center X":parseFloat(K.center.x.toFixed(2)),"Center Y":parseFloat(K.center.y.toFixed(2)),Radius:parseFloat(K.radius.toFixed(2))}})}else if(V.type==="arc"){const K=V;let b=K.startAngle,se=K.endAngle;K.counterClockwise&&([b,se]=[se,b]);const Pe=2*Math.PI,Se=je=>(je%Pe+Pe)%Pe;b=Se(b),se=Se(se);let Ne=se-b;Ne<0&&(Ne+=Pe);const Ge=Ne*K.radius;y({...de,type:"Arc",properties:{ID:V.id.substring(0,8),"Center X":parseFloat(K.center.x.toFixed(2)),"Center Y":parseFloat(K.center.y.toFixed(2)),Radius:parseFloat(K.radius.toFixed(2)),"Start Angle":parseFloat((K.startAngle*180/Math.PI).toFixed(1)),"End Angle":parseFloat((K.endAngle*180/Math.PI).toFixed(1)),Length:parseFloat(Ge.toFixed(2))}})}else if(V.type==="ellipse"){const K=V;y({...de,type:"Ellipse",properties:{ID:V.id.substring(0,8),"Center X":parseFloat(K.center.x.toFixed(2)),"Center Y":parseFloat(K.center.y.toFixed(2)),"Radius X":parseFloat(K.radiusX.toFixed(2)),"Radius Y":parseFloat(K.radiusY.toFixed(2)),Rotation:parseFloat((K.rotation*180/Math.PI).toFixed(1))}})}else if(V.type.startsWith("dimension-")){let K="Dimension",b={};if(V.type==="dimension-linear"){const se=V;K="Linear Dimension",b.Distance=Math.abs(se.p1.x===se.p2.x?se.p2.y-se.p1.y:se.p2.x-se.p1.x).toFixed(2)}else if(V.type==="dimension-aligned"){const se=V;K="Aligned Dimension",b.Distance=Math.hypot(se.p2.x-se.p1.x,se.p2.y-se.p1.y).toFixed(2)}else if(V.type==="dimension-angular"){const se=V;K="Angular Dimension";const Pe=Math.atan2(se.p1.y-se.center.y,se.p1.x-se.center.x),Se=Math.atan2(se.p2.y-se.center.y,se.p2.x-se.center.x);let Ne=Math.abs(Se-Pe);Ne>Math.PI&&(Ne=2*Math.PI-Ne),b.Angle=(Ne*180/Math.PI).toFixed(1)+""}else if(V.type==="dimension-radial"){const se=V;K="Radial Dimension",b.Radius=Math.hypot(se.radiusPoint.x-se.center.x,se.radiusPoint.y-se.center.y).toFixed(2)}else if(V.type==="dimension-diameter"){const se=V;K="Diameter Dimension",b.Diameter=Math.hypot(se.p2.x-se.p1.x,se.p2.y-se.p1.y).toFixed(2)}else if(V.type==="dimension-coordinate"){const se=V;K="Coordinate Dimension",b.Axis=se.axis,b.Value=(se.axis==="X"?se.point.x:se.point.y).toFixed(2)}y({...de,type:K,properties:b})}else y(null)}else y(null)}else if(I.length>1){const V=w.filter(Ge=>I.includes(Ge.id));if(V.length===0){y(null);return}const W=V[0].groupId;if(W&&V.every(Ge=>Ge.groupId===W)){const Ge=w.filter(je=>je.groupId===W);if(Ge.length===V.length){const je=V[0].layerId,dn=V.every(ct=>ct.layerId===je),Oe=V[0].color,gi=V.every(ct=>ct.color===Oe),Ht=V[0].linetype,Gt=V.every(ct=>ct.linetype===Ht),ot=dn?o.find(ct=>ct.id===je):null;y({id:-2,type:"Group",layer:ot?ot.name:"Multiple",layerId:ot?ot.id:-1,properties:{Count:Ge.length},groupId:W,color:gi?Oe:void 0,linetype:Gt?Ht:void 0});return}}const de=V[0].layerId,K=V.every(Ge=>Ge.layerId===de),b=V[0].color,se=V.every(Ge=>Ge.color===b),Pe=V[0].linetype,Se=V.every(Ge=>Ge.linetype===Pe),Ne=K?o.find(Ge=>Ge.id===de):null;y({id:-1,type:"Multiple",layer:Ne?Ne.name:"Multiple",layerId:Ne?Ne.id:-1,properties:{Count:I.length},color:se?b:void 0,linetype:Se?Pe:void 0})}else y(null)},[I,w,o]);const Vi=pi.filter(V=>!V.id.startsWith("dimension-"));return C.jsxs("div",{className:"flex flex-col h-screen bg-zinc-800 text-gray-300 font-sans text-sm overflow-hidden",children:[C.jsx(o1,{tools:pi,onToolSelect:So,onUndo:Nt,onRedo:oi,canUndo:Ye,canRedo:Ct,onZoomExtents:li,onNew:Yt,onOpen:Ln,onSave:zt,onExport:nn,onImport:ye,onExecuteExample:Gi,onExecuteJsonExample:kl}),C.jsxs("div",{className:"flex flex-grow h-full overflow-hidden",children:[C.jsx(l1,{tools:Vi,activeTool:n,onToolSelect:So}),C.jsxs("div",{className:"flex-grow flex flex-col",children:[C.jsx(M1,{activeTool:n,drawableObjects:w,addDrawableObjects:Ut,selectedObjectIds:I,onSelectionChange:pe,onObjectsUpdate:zl,setActiveTool:e,onDelete:mi,onCopy:Mn,onCut:Eo,onPaste:Xn,onDuplicate:To,onGroup:Xo,onUngroup:Ko,onExplode:Kn,hasClipboard:!!Ce,activeLayerId:r,layers:o,statusText:ve,onStatusChange:vo,offsetDistanceCommand:Ae,onOffsetDistanceSet:()=>Ve(null),onSetCommandOptions:it,subCommand:nt,onSubCommandProcessed:()=>ht(null),filletRadius:yt,chamferDistances:xe,commandToExecute:We,onCommandProcessed:()=>at(null),onCommandRejected:yi,viewBoundsToFit:L}),C.jsx(I1,{history:m,currentCommand:v,setCurrentCommand:x,executeCommand:xo,isAiThinking:le,commandOptions:Ze,executeSubCommand:qi,onCancelAi:hi})]}),C.jsx(w1,{layers:o,setLayers:s,selectedObject:f,onObjectPropertyChange:tn,activeLayerId:r,setActiveLayerId:c})]})]})},Rg=document.getElementById("root");if(!Rg)throw new Error("Could not find root element to mount to");const F1=Gv.createRoot(Rg);F1.render(C.jsx(Um.StrictMode,{children:C.jsx(U1,{})}));
